2019-07-04 03:28:45,287 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-07-04 03:28:45,430 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-07-04 03:28:45,516 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-07-04 03:28:45,523 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-07-04 03:28:45,528 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 41018 (custom)
2019-07-04 03:28:45,529 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-07-04 03:28:45,531 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-07-04 03:28:45,532 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-07-04 03:28:45,533 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-07-04 03:28:45,589 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8] (custom)
2019-07-04 03:28:45,595 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(428)) - Starting XceiverServerRatis 33b3e724-6905-431a-b7c7-3232113902f8 at port 41018
2019-07-04 03:28:45,610 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 33b3e724-6905-431a-b7c7-3232113902f8: start RPC server
2019-07-04 03:28:45,611 INFO  server.GrpcService (GrpcService.java:startImpl(149)) - 33b3e724-6905-431a-b7c7-3232113902f8: GrpcService started, listening on 0.0.0.0/0.0.0.0:41018
2019-07-04 03:28:45,697 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 33b3e724-6905-431a-b7c7-3232113902f8: addNew group-3950E2335ED1:[33b3e724-6905-431a-b7c7-3232113902f8:0.0.0.0:41018] returns group-3950E2335ED1:java.util.concurrent.CompletableFuture@469cd9dd[Not completed]
2019-07-04 03:28:45,710 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(93)) - 33b3e724-6905-431a-b7c7-3232113902f8: new RaftServerImpl for group-3950E2335ED1:[33b3e724-6905-431a-b7c7-3232113902f8:0.0.0.0:41018] with ContainerStateMachine:uninitialized
2019-07-04 03:28:45,712 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-07-04 03:28:45,714 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-07-04 03:28:45,715 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-07-04 03:28:45,716 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-07-04 03:28:45,717 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-07-04 03:28:45,725 INFO  impl.RaftServerImpl (ServerState.java:<init>(105)) - 33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1 ConfigurationManager, init=-1: [33b3e724-6905-431a-b7c7-3232113902f8:0.0.0.0:41018], old=null, confs=<EMPTY_MAP>
2019-07-04 03:28:45,726 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8] (custom)
2019-07-04 03:28:45,735 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1 does not exist. Creating ...
2019-07-04 03:28:45,759 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1/in_use.lock acquired by nodename 13716@ozone-hdds-1735-g25x8-3605130544
2019-07-04 03:28:45,775 INFO  storage.RaftStorage (RaftStorage.java:format(72)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1 has been successfully formatted.
2019-07-04 03:28:45,778 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(198)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-07-04 03:28:45,778 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-07-04 03:28:45,780 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-07-04 03:28:45,786 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1000000000 (custom)
2019-07-04 03:28:45,786 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-07-04 03:28:45,787 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-07-04 03:28:45,792 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-07-04 03:28:45,797 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new 33b3e724-6905-431a-b7c7-3232113902f8-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1 for RaftStorage:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1
2019-07-04 03:28:45,859 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-07-04 03:28:45,860 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-07-04 03:28:45,865 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-07-04 03:28:45,865 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-07-04 03:28:45,866 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-07-04 03:28:45,866 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-07-04 03:28:45,867 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-07-04 03:28:45,867 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-07-04 03:28:45,868 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-07-04 03:28:45,876 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-07-04 03:28:45,880 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - 33b3e724-6905-431a-b7c7-3232113902f8-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1: flushIndex: setUnconditionally 0 -> -1
2019-07-04 03:28:45,883 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-07-04 03:28:45,884 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-07-04 03:28:45,885 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-07-04 03:28:45,902 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(180)) - 33b3e724-6905-431a-b7c7-3232113902f8: start group-3950E2335ED1
2019-07-04 03:28:45,903 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-07-04 03:28:45,904 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 33b3e724-6905-431a-b7c7-3232113902f8: start FollowerState
2019-07-04 03:28:45,906 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3950E2335ED1,id=33b3e724-6905-431a-b7c7-3232113902f8
2019-07-04 03:28:45,989 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(255)) - client-84A14682CE1D->33b3e724-6905-431a-b7c7-3232113902f8: receive RaftClientReply:client-84A14682CE1D->33b3e724-6905-431a-b7c7-3232113902f8@group-3950E2335ED1, cid=1, FAILED org.apache.ratis.protocol.NotLeaderException: Server 33b3e724-6905-431a-b7c7-3232113902f8 is not the leader (null). Request must be sent to leader., logIndex=0, commits[33b3e724-6905-431a-b7c7-3232113902f8:c-1]
2019-07-04 03:28:47,019 INFO  impl.FollowerState (FollowerState.java:run(106)) - 33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1 changes to CANDIDATE, lastRpcTime:1115, electionTimeout:1114ms
2019-07-04 03:28:47,020 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 33b3e724-6905-431a-b7c7-3232113902f8: shutdown FollowerState
2019-07-04 03:28:47,020 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-07-04 03:28:47,023 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 33b3e724-6905-431a-b7c7-3232113902f8: start LeaderElection
2019-07-04 03:28:47,038 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1:LeaderElection1: begin an election at term 1 for -1: [33b3e724-6905-431a-b7c7-3232113902f8:0.0.0.0:41018], old=null
2019-07-04 03:28:47,040 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 33b3e724-6905-431a-b7c7-3232113902f8: shutdown LeaderElection
2019-07-04 03:28:47,041 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-07-04 03:28:47,041 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1 change Leader from null to 33b3e724-6905-431a-b7c7-3232113902f8 at term 1 for becomeLeader, leader elected after 1263ms
2019-07-04 03:28:47,049 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-07-04 03:28:47,049 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-07-04 03:28:47,053 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-07-04 03:28:47,056 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-07-04 03:28:47,056 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-07-04 03:28:47,057 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-07-04 03:28:47,068 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 33b3e724-6905-431a-b7c7-3232113902f8: start LeaderState
2019-07-04 03:28:47,088 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - 33b3e724-6905-431a-b7c7-3232113902f8-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1: Starting segment from index:0
2019-07-04 03:28:47,097 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1 set configuration 0: [33b3e724-6905-431a-b7c7-3232113902f8:0.0.0.0:41018], old=null at 0
2019-07-04 03:28:47,279 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - 33b3e724-6905-431a-b7c7-3232113902f8-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1/current/log_inprogress_0
2019-07-04 03:28:48,051 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-07-04 03:28:48,063 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(255)) - client-84A14682CE1D->33b3e724-6905-431a-b7c7-3232113902f8: receive RaftClientReply:client-84A14682CE1D->33b3e724-6905-431a-b7c7-3232113902f8@group-3950E2335ED1, cid=1, SUCCESS, logIndex=1, commits[33b3e724-6905-431a-b7c7-3232113902f8:c1]
2019-07-04 03:28:48,066 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-07-04 03:28:48,105 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(255)) - client-6BDF61170F10->33b3e724-6905-431a-b7c7-3232113902f8: receive RaftClientReply:client-6BDF61170F10->33b3e724-6905-431a-b7c7-3232113902f8@group-3950E2335ED1, cid=2, SUCCESS, logIndex=3, commits[33b3e724-6905-431a-b7c7-3232113902f8:c3]
2019-07-04 03:28:48,111 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 33b3e724-6905-431a-b7c7-3232113902f8: close
2019-07-04 03:28:48,114 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(245)) - 33b3e724-6905-431a-b7c7-3232113902f8: shutdown group-3950E2335ED1
2019-07-04 03:28:48,114 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-3950E2335ED1,id=33b3e724-6905-431a-b7c7-3232113902f8
2019-07-04 03:28:48,115 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 33b3e724-6905-431a-b7c7-3232113902f8: shutdown LeaderState
2019-07-04 03:28:48,115 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - 33b3e724-6905-431a-b7c7-3232113902f8-PendingRequests: sendNotLeaderResponses
2019-07-04 03:28:48,121 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(115)) - StateMachineUpdater:33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1: set stopIndex = 4
2019-07-04 03:28:48,121 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(244)) - Taking snapshot at termIndex:(t:1, i:3)
2019-07-04 03:28:48,122 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(248)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1/sm/snapshot.1_3
2019-07-04 03:28:48,134 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(242)) - StateMachineUpdater:33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1: Took a snapshot at index 3
2019-07-04 03:28:48,134 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(80)) - StateMachineUpdater:33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1: snapshotIndex: updateIncreasingly -1 -> 3
2019-07-04 03:28:48,143 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 33b3e724-6905-431a-b7c7-3232113902f8:group-3950E2335ED1 closes. The last applied log index is 4
2019-07-04 03:28:48,146 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - 33b3e724-6905-431a-b7c7-3232113902f8-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1 was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-07-04 03:28:48,147 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - 33b3e724-6905-431a-b7c7-3232113902f8-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/33b3e724-6905-431a-b7c7-3232113902f8/5534d730-9b7a-4c26-be0d-3950e2335ed1 close()
2019-07-04 03:28:48,149 INFO  server.GrpcService (GrpcService.java:closeImpl(155)) - 33b3e724-6905-431a-b7c7-3232113902f8: shutdown server with port 41018 now
2019-07-04 03:28:48,152 INFO  server.GrpcService (GrpcService.java:closeImpl(163)) - 33b3e724-6905-431a-b7c7-3232113902f8: shutdown server with port 41018 successfully
2019-07-04 03:28:48,161 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-07-04 03:28:48,163 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-07-04 03:28:48,163 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-07-04 03:28:48,164 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 43594 (custom)
2019-07-04 03:28:48,164 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-07-04 03:28:48,164 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-07-04 03:28:48,165 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-07-04 03:28:48,165 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-07-04 03:28:48,166 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778] (custom)
2019-07-04 03:28:48,167 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(428)) - Starting XceiverServerRatis 1d5e9e43-752d-4523-9148-42e3a87b6778 at port 43594
2019-07-04 03:28:48,200 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: start RPC server
2019-07-04 03:28:48,203 INFO  server.GrpcService (GrpcService.java:startImpl(149)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: GrpcService started, listening on 0.0.0.0/0.0.0.0:43594
2019-07-04 03:28:48,238 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: addNew group-3F825069B784:[7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594] returns group-3F825069B784:java.util.concurrent.CompletableFuture@5d00f03a[Not completed]
2019-07-04 03:28:48,239 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(93)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: new RaftServerImpl for group-3F825069B784:[7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594] with ContainerStateMachine:uninitialized
2019-07-04 03:28:48,240 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-07-04 03:28:48,240 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-07-04 03:28:48,241 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-07-04 03:28:48,241 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-07-04 03:28:48,241 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-07-04 03:28:48,242 INFO  impl.RaftServerImpl (ServerState.java:<init>(105)) - 1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784 ConfigurationManager, init=-1: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null, confs=<EMPTY_MAP>
2019-07-04 03:28:48,242 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778] (custom)
2019-07-04 03:28:48,243 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784 does not exist. Creating ...
2019-07-04 03:28:48,257 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784/in_use.lock acquired by nodename 13716@ozone-hdds-1735-g25x8-3605130544
2019-07-04 03:28:48,270 INFO  storage.RaftStorage (RaftStorage.java:format(72)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784 has been successfully formatted.
2019-07-04 03:28:48,270 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(198)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-07-04 03:28:48,271 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-07-04 03:28:48,271 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-07-04 03:28:48,271 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1000000000 (custom)
2019-07-04 03:28:48,272 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-07-04 03:28:48,272 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-07-04 03:28:48,272 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-07-04 03:28:48,272 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new 1d5e9e43-752d-4523-9148-42e3a87b6778-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784 for RaftStorage:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784
2019-07-04 03:28:48,273 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-07-04 03:28:48,273 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-07-04 03:28:48,273 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-07-04 03:28:48,274 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-07-04 03:28:48,274 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-07-04 03:28:48,274 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-07-04 03:28:48,275 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-07-04 03:28:48,275 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-07-04 03:28:48,275 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-07-04 03:28:48,276 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-07-04 03:28:48,276 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - 1d5e9e43-752d-4523-9148-42e3a87b6778-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784: flushIndex: setUnconditionally 0 -> -1
2019-07-04 03:28:48,277 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-07-04 03:28:48,277 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-07-04 03:28:48,277 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-07-04 03:28:48,278 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(180)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: start group-3F825069B784
2019-07-04 03:28:48,278 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-07-04 03:28:48,278 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: start FollowerState
2019-07-04 03:28:48,279 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F825069B784,id=1d5e9e43-752d-4523-9148-42e3a87b6778
2019-07-04 03:28:48,285 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-07-04 03:28:48,285 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-07-04 03:28:48,286 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 38341 (custom)
2019-07-04 03:28:48,286 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-07-04 03:28:48,287 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-07-04 03:28:48,287 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-07-04 03:28:48,287 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-07-04 03:28:48,288 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33] (custom)
2019-07-04 03:28:48,289 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(428)) - Starting XceiverServerRatis 4fa47aa0-a5ba-42ff-ac44-44ac287eec33 at port 38341
2019-07-04 03:28:48,298 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: start RPC server
2019-07-04 03:28:48,302 INFO  server.GrpcService (GrpcService.java:startImpl(149)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: GrpcService started, listening on 0.0.0.0/0.0.0.0:38341
2019-07-04 03:28:48,333 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: addNew group-3F825069B784:[7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594] returns group-3F825069B784:java.util.concurrent.CompletableFuture@180d5df9[Not completed]
2019-07-04 03:28:48,334 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(93)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: new RaftServerImpl for group-3F825069B784:[7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594] with ContainerStateMachine:uninitialized
2019-07-04 03:28:48,335 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-07-04 03:28:48,335 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-07-04 03:28:48,336 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-07-04 03:28:48,336 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-07-04 03:28:48,336 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-07-04 03:28:48,336 INFO  impl.RaftServerImpl (ServerState.java:<init>(105)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784 ConfigurationManager, init=-1: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null, confs=<EMPTY_MAP>
2019-07-04 03:28:48,337 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33] (custom)
2019-07-04 03:28:48,337 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784 does not exist. Creating ...
2019-07-04 03:28:48,352 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784/in_use.lock acquired by nodename 13716@ozone-hdds-1735-g25x8-3605130544
2019-07-04 03:28:48,363 INFO  storage.RaftStorage (RaftStorage.java:format(72)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784 has been successfully formatted.
2019-07-04 03:28:48,363 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(198)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-07-04 03:28:48,364 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-07-04 03:28:48,364 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-07-04 03:28:48,364 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1000000000 (custom)
2019-07-04 03:28:48,364 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-07-04 03:28:48,364 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-07-04 03:28:48,365 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-07-04 03:28:48,365 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new 4fa47aa0-a5ba-42ff-ac44-44ac287eec33-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784 for RaftStorage:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784
2019-07-04 03:28:48,365 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-07-04 03:28:48,366 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-07-04 03:28:48,366 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-07-04 03:28:48,366 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-07-04 03:28:48,366 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-07-04 03:28:48,367 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-07-04 03:28:48,367 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-07-04 03:28:48,367 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-07-04 03:28:48,367 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-07-04 03:28:48,368 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-07-04 03:28:48,368 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784: flushIndex: setUnconditionally 0 -> -1
2019-07-04 03:28:48,369 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-07-04 03:28:48,369 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-07-04 03:28:48,369 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-07-04 03:28:48,370 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(180)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: start group-3F825069B784
2019-07-04 03:28:48,370 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-07-04 03:28:48,370 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: start FollowerState
2019-07-04 03:28:48,371 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F825069B784,id=4fa47aa0-a5ba-42ff-ac44-44ac287eec33
2019-07-04 03:28:48,379 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-07-04 03:28:48,380 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-07-04 03:28:48,380 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 33415 (custom)
2019-07-04 03:28:48,380 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-07-04 03:28:48,381 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-07-04 03:28:48,381 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-07-04 03:28:48,382 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-07-04 03:28:48,383 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb] (custom)
2019-07-04 03:28:48,383 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(428)) - Starting XceiverServerRatis 7eb567d1-0fd2-42ed-af1d-45ce1790befb at port 33415
2019-07-04 03:28:48,393 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: start RPC server
2019-07-04 03:28:48,396 INFO  server.GrpcService (GrpcService.java:startImpl(149)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: GrpcService started, listening on 0.0.0.0/0.0.0.0:33415
2019-07-04 03:28:48,428 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: addNew group-3F825069B784:[7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594] returns group-3F825069B784:java.util.concurrent.CompletableFuture@1bfd5b93[Not completed]
2019-07-04 03:28:48,429 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(93)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: new RaftServerImpl for group-3F825069B784:[7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594] with ContainerStateMachine:uninitialized
2019-07-04 03:28:48,430 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-07-04 03:28:48,430 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-07-04 03:28:48,430 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-07-04 03:28:48,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-07-04 03:28:48,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-07-04 03:28:48,431 INFO  impl.RaftServerImpl (ServerState.java:<init>(105)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784 ConfigurationManager, init=-1: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null, confs=<EMPTY_MAP>
2019-07-04 03:28:48,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb] (custom)
2019-07-04 03:28:48,432 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784 does not exist. Creating ...
2019-07-04 03:28:48,453 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784/in_use.lock acquired by nodename 13716@ozone-hdds-1735-g25x8-3605130544
2019-07-04 03:28:48,468 INFO  storage.RaftStorage (RaftStorage.java:format(72)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784 has been successfully formatted.
2019-07-04 03:28:48,468 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(198)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-07-04 03:28:48,469 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-07-04 03:28:48,469 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-07-04 03:28:48,469 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1000000000 (custom)
2019-07-04 03:28:48,469 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-07-04 03:28:48,470 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-07-04 03:28:48,470 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-07-04 03:28:48,470 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new 7eb567d1-0fd2-42ed-af1d-45ce1790befb-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784 for RaftStorage:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784
2019-07-04 03:28:48,470 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-07-04 03:28:48,470 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-07-04 03:28:48,471 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-07-04 03:28:48,471 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-07-04 03:28:48,471 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-07-04 03:28:48,471 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-07-04 03:28:48,472 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-07-04 03:28:48,472 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-07-04 03:28:48,472 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-07-04 03:28:48,472 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-07-04 03:28:48,473 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784: flushIndex: setUnconditionally 0 -> -1
2019-07-04 03:28:48,473 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-07-04 03:28:48,474 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-07-04 03:28:48,474 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-07-04 03:28:48,474 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(180)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: start group-3F825069B784
2019-07-04 03:28:48,474 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-07-04 03:28:48,474 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: start FollowerState
2019-07-04 03:28:48,475 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F825069B784,id=7eb567d1-0fd2-42ed-af1d-45ce1790befb
2019-07-04 03:28:48,500 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(255)) - client-4C88E2CA6B44->1d5e9e43-752d-4523-9148-42e3a87b6778: receive RaftClientReply:client-4C88E2CA6B44->1d5e9e43-752d-4523-9148-42e3a87b6778@group-3F825069B784, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server 1d5e9e43-752d-4523-9148-42e3a87b6778 is not the leader (null). Request must be sent to leader., logIndex=0, commits[1d5e9e43-752d-4523-9148-42e3a87b6778:c-1]
2019-07-04 03:28:49,401 INFO  impl.FollowerState (FollowerState.java:run(106)) - 1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784 changes to CANDIDATE, lastRpcTime:1122, electionTimeout:1122ms
2019-07-04 03:28:49,401 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: shutdown FollowerState
2019-07-04 03:28:49,401 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-07-04 03:28:49,402 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: start LeaderElection
2019-07-04 03:28:49,430 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784:LeaderElection2: begin an election at term 1 for -1: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null
2019-07-04 03:28:49,565 INFO  impl.FollowerState (FollowerState.java:run(106)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784 changes to CANDIDATE, lastRpcTime:1195, electionTimeout:1137ms
2019-07-04 03:28:49,568 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: shutdown FollowerState
2019-07-04 03:28:49,568 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-07-04 03:28:49,568 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: start LeaderElection
2019-07-04 03:28:49,583 INFO  impl.FollowerState (FollowerState.java:run(106)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784 changes to CANDIDATE, lastRpcTime:1108, electionTimeout:1108ms
2019-07-04 03:28:49,583 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: shutdown FollowerState
2019-07-04 03:28:49,584 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-07-04 03:28:49,585 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: start LeaderElection
2019-07-04 03:28:49,588 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784:LeaderElection3: begin an election at term 1 for -1: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null
2019-07-04 03:28:49,603 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(255)) - client-4C88E2CA6B44->7eb567d1-0fd2-42ed-af1d-45ce1790befb: receive RaftClientReply:client-4C88E2CA6B44->7eb567d1-0fd2-42ed-af1d-45ce1790befb@group-3F825069B784, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server 7eb567d1-0fd2-42ed-af1d-45ce1790befb is not the leader (null). Request must be sent to leader., logIndex=0, commits[7eb567d1-0fd2-42ed-af1d-45ce1790befb:c-1]
Jul 04, 2019 3:28:49 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=40, target=0.0.0.0:43594} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:119)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:279)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:206)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-07-04 03:28:49,609 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784:LeaderElection4: begin an election at term 1 for -1: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null
Jul 04, 2019 3:28:49 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=56, target=0.0.0.0:33415} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:119)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:279)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:206)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jul 04, 2019 3:28:49 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=48, target=0.0.0.0:38341} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:119)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:279)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:206)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jul 04, 2019 3:28:49 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=17, target=0.0.0.0:41018} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:119)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:279)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:206)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jul 04, 2019 3:28:49 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=9, target=0.0.0.0:44153} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connectToDatanode(XceiverClientGrpc.java:163)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connect(XceiverClientGrpc.java:120)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:227)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServer(TestSecureContainerServer.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-07-04 03:28:49,660 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784:LeaderElection3: Election REJECTED; received 2 response(s) [4fa47aa0-a5ba-42ff-ac44-44ac287eec33<-7eb567d1-0fd2-42ed-af1d-45ce1790befb#0:FAIL-t1, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33<-1d5e9e43-752d-4523-9148-42e3a87b6778#0:FAIL-t1] and 0 exception(s); 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:t1, leader=null, voted=4fa47aa0-a5ba-42ff-ac44-44ac287eec33, raftlog=4fa47aa0-a5ba-42ff-ac44-44ac287eec33-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null
2019-07-04 03:28:49,662 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784 changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM
2019-07-04 03:28:49,662 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - 1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784:LeaderElection2: Election REJECTED; received 2 response(s) [1d5e9e43-752d-4523-9148-42e3a87b6778<-7eb567d1-0fd2-42ed-af1d-45ce1790befb#0:FAIL-t1, 1d5e9e43-752d-4523-9148-42e3a87b6778<-4fa47aa0-a5ba-42ff-ac44-44ac287eec33#0:FAIL-t1] and 0 exception(s); 1d5e9e43-752d-4523-9148-42e3a87b6778:t1, leader=null, voted=1d5e9e43-752d-4523-9148-42e3a87b6778, raftlog=1d5e9e43-752d-4523-9148-42e3a87b6778-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null
2019-07-04 03:28:49,663 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784:LeaderElection4: Election REJECTED; received 2 response(s) [7eb567d1-0fd2-42ed-af1d-45ce1790befb<-4fa47aa0-a5ba-42ff-ac44-44ac287eec33#0:FAIL-t1, 7eb567d1-0fd2-42ed-af1d-45ce1790befb<-1d5e9e43-752d-4523-9148-42e3a87b6778#0:FAIL-t1] and 0 exception(s); 7eb567d1-0fd2-42ed-af1d-45ce1790befb:t1, leader=null, voted=7eb567d1-0fd2-42ed-af1d-45ce1790befb, raftlog=7eb567d1-0fd2-42ed-af1d-45ce1790befb-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null
2019-07-04 03:28:49,662 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: shutdown LeaderElection
2019-07-04 03:28:49,664 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784 changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM
2019-07-04 03:28:49,663 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784 changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM
2019-07-04 03:28:49,665 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: shutdown LeaderElection
2019-07-04 03:28:49,665 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: start FollowerState
2019-07-04 03:28:49,665 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: start FollowerState
2019-07-04 03:28:49,665 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: shutdown LeaderElection
2019-07-04 03:28:49,666 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: start FollowerState
2019-07-04 03:28:50,624 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(255)) - client-4C88E2CA6B44->4fa47aa0-a5ba-42ff-ac44-44ac287eec33: receive RaftClientReply:client-4C88E2CA6B44->4fa47aa0-a5ba-42ff-ac44-44ac287eec33@group-3F825069B784, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server 4fa47aa0-a5ba-42ff-ac44-44ac287eec33 is not the leader (null). Request must be sent to leader., logIndex=0, commits[4fa47aa0-a5ba-42ff-ac44-44ac287eec33:c-1]
2019-07-04 03:28:50,715 INFO  impl.FollowerState (FollowerState.java:run(106)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784 changes to CANDIDATE, lastRpcTime:1049, electionTimeout:1047ms
2019-07-04 03:28:50,715 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: shutdown FollowerState
2019-07-04 03:28:50,715 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784 changes role from FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2019-07-04 03:28:50,715 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: start LeaderElection
2019-07-04 03:28:50,730 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784:LeaderElection5: begin an election at term 2 for -1: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null
2019-07-04 03:28:50,737 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784 changes role from FOLLOWER to FOLLOWER at term 2 for recognizeCandidate:7eb567d1-0fd2-42ed-af1d-45ce1790befb
2019-07-04 03:28:50,738 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: shutdown FollowerState
2019-07-04 03:28:50,738 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: start FollowerState
2019-07-04 03:28:50,739 INFO  impl.FollowerState (FollowerState.java:run(114)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-07-04 03:28:50,740 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784 changes role from FOLLOWER to FOLLOWER at term 2 for recognizeCandidate:7eb567d1-0fd2-42ed-af1d-45ce1790befb
2019-07-04 03:28:50,740 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: shutdown FollowerState
2019-07-04 03:28:50,741 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: start FollowerState
2019-07-04 03:28:50,741 INFO  impl.FollowerState (FollowerState.java:run(114)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-07-04 03:28:50,761 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784:LeaderElection5: Election PASSED; received 1 response(s) [7eb567d1-0fd2-42ed-af1d-45ce1790befb<-4fa47aa0-a5ba-42ff-ac44-44ac287eec33#0:OK-t2] and 0 exception(s); 7eb567d1-0fd2-42ed-af1d-45ce1790befb:t2, leader=null, voted=7eb567d1-0fd2-42ed-af1d-45ce1790befb, raftlog=7eb567d1-0fd2-42ed-af1d-45ce1790befb-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null
2019-07-04 03:28:50,763 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: shutdown LeaderElection
2019-07-04 03:28:50,764 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784 changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2019-07-04 03:28:50,764 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784 change Leader from null to 7eb567d1-0fd2-42ed-af1d-45ce1790befb at term 2 for becomeLeader, leader elected after 2295ms
2019-07-04 03:28:50,765 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-07-04 03:28:50,765 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-07-04 03:28:50,765 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-07-04 03:28:50,766 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-07-04 03:28:50,766 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-07-04 03:28:50,766 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-07-04 03:28:50,770 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-07-04 03:28:50,771 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-07-04 03:28:50,771 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-07-04 03:28:50,775 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-07-04 03:28:50,776 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-07-04 03:28:50,776 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-07-04 03:28:50,776 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-07-04 03:28:50,777 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-07-04 03:28:50,777 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-07-04 03:28:50,777 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-07-04 03:28:50,778 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-07-04 03:28:50,778 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-07-04 03:28:50,780 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: start LeaderState
2019-07-04 03:28:50,780 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784: Starting segment from index:0
2019-07-04 03:28:50,781 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784 set configuration 0: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null at 0
2019-07-04 03:28:50,819 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784 change Leader from null to 7eb567d1-0fd2-42ed-af1d-45ce1790befb at term 2 for appendEntries, leader elected after 2547ms
2019-07-04 03:28:50,819 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784 change Leader from null to 7eb567d1-0fd2-42ed-af1d-45ce1790befb at term 2 for appendEntries, leader elected after 2455ms
2019-07-04 03:28:50,823 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784/current/log_inprogress_0
2019-07-04 03:28:50,852 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784 set configuration 0: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null at 0
2019-07-04 03:28:50,852 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784 set configuration 0: [7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:0.0.0.0:38341, 1d5e9e43-752d-4523-9148-42e3a87b6778:0.0.0.0:43594], old=null at 0
2019-07-04 03:28:50,852 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - 1d5e9e43-752d-4523-9148-42e3a87b6778-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784: Starting segment from index:0
2019-07-04 03:28:50,853 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784: Starting segment from index:0
2019-07-04 03:28:50,884 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - 1d5e9e43-752d-4523-9148-42e3a87b6778-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784/current/log_inprogress_0
2019-07-04 03:28:50,884 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784/current/log_inprogress_0
2019-07-04 03:28:51,656 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-07-04 03:28:51,661 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(255)) - client-4C88E2CA6B44->7eb567d1-0fd2-42ed-af1d-45ce1790befb: receive RaftClientReply:client-4C88E2CA6B44->7eb567d1-0fd2-42ed-af1d-45ce1790befb@group-3F825069B784, cid=6, SUCCESS, logIndex=1, commits[7eb567d1-0fd2-42ed-af1d-45ce1790befb:c1, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:c0, 1d5e9e43-752d-4523-9148-42e3a87b6778:c0]
2019-07-04 03:28:51,662 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-07-04 03:28:51,671 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-07-04 03:28:51,671 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-07-04 03:28:51,686 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(255)) - client-8DDBFED8718F->1d5e9e43-752d-4523-9148-42e3a87b6778: receive RaftClientReply:client-8DDBFED8718F->1d5e9e43-752d-4523-9148-42e3a87b6778@group-3F825069B784, cid=7, FAILED org.apache.ratis.protocol.NotLeaderException: Server 1d5e9e43-752d-4523-9148-42e3a87b6778 is not the leader (7eb567d1-0fd2-42ed-af1d-45ce1790befb:0.0.0.0:33415). Request must be sent to leader., logIndex=0, commits[1d5e9e43-752d-4523-9148-42e3a87b6778:c1, 7eb567d1-0fd2-42ed-af1d-45ce1790befb:c1, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:c0]
2019-07-04 03:28:51,724 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(255)) - client-8DDBFED8718F->7eb567d1-0fd2-42ed-af1d-45ce1790befb: receive RaftClientReply:client-8DDBFED8718F->7eb567d1-0fd2-42ed-af1d-45ce1790befb@group-3F825069B784, cid=7, SUCCESS, logIndex=3, commits[7eb567d1-0fd2-42ed-af1d-45ce1790befb:c3, 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:c2, 1d5e9e43-752d-4523-9148-42e3a87b6778:c2]
2019-07-04 03:28:51,728 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: close
2019-07-04 03:28:51,730 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(245)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: shutdown group-3F825069B784
2019-07-04 03:28:51,732 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F825069B784,id=1d5e9e43-752d-4523-9148-42e3a87b6778
2019-07-04 03:28:51,733 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: shutdown FollowerState
2019-07-04 03:28:51,734 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(115)) - StateMachineUpdater:1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784: set stopIndex = 3
2019-07-04 03:28:51,734 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(244)) - Taking snapshot at termIndex:(t:2, i:3)
2019-07-04 03:28:51,734 INFO  impl.FollowerState (FollowerState.java:run(114)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-07-04 03:28:51,735 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(248)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784/sm/snapshot.2_3
2019-07-04 03:28:51,737 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(242)) - StateMachineUpdater:1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784: Took a snapshot at index 3
2019-07-04 03:28:51,737 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(80)) - StateMachineUpdater:1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784: snapshotIndex: updateIncreasingly -1 -> 3
2019-07-04 03:28:51,737 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 1d5e9e43-752d-4523-9148-42e3a87b6778:group-3F825069B784 closes. The last applied log index is 3
2019-07-04 03:28:51,738 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - 1d5e9e43-752d-4523-9148-42e3a87b6778-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784 was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-07-04 03:28:51,740 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - 1d5e9e43-752d-4523-9148-42e3a87b6778-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d5e9e43-752d-4523-9148-42e3a87b6778/b28a7668-fb3a-48cd-b967-3f825069b784 close()
2019-07-04 03:28:51,742 INFO  server.GrpcService (GrpcService.java:closeImpl(155)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: shutdown server with port 43594 now
2019-07-04 03:28:51,747 WARN  server.GrpcServerProtocolService (LogUtils.java:warn(134)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: appendEntries onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-07-04 03:28:51,749 WARN  server.GrpcLogAppender (LogUtils.java:warn(134)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb->1d5e9e43-752d-4523-9148-42e3a87b6778: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: HTTP/2 error code: CANCEL
Received Rst Stream
2019-07-04 03:28:51,749 INFO  server.GrpcService (GrpcService.java:closeImpl(163)) - 1d5e9e43-752d-4523-9148-42e3a87b6778: shutdown server with port 43594 successfully
2019-07-04 03:28:51,752 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb->1d5e9e43-752d-4523-9148-42e3a87b6778: nextIndex: updateUnconditionally 5 -> 4
2019-07-04 03:28:51,755 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: close
2019-07-04 03:28:51,755 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(245)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: shutdown group-3F825069B784
2019-07-04 03:28:51,756 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F825069B784,id=4fa47aa0-a5ba-42ff-ac44-44ac287eec33
2019-07-04 03:28:51,756 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: shutdown FollowerState
2019-07-04 03:28:51,757 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(115)) - StateMachineUpdater:4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784: set stopIndex = 3
2019-07-04 03:28:51,757 INFO  impl.FollowerState (FollowerState.java:run(114)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-07-04 03:28:51,757 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(244)) - Taking snapshot at termIndex:(t:2, i:3)
2019-07-04 03:28:51,760 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(248)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784/sm/snapshot.2_3
2019-07-04 03:28:51,760 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(242)) - StateMachineUpdater:4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784: Took a snapshot at index 3
2019-07-04 03:28:51,760 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(80)) - StateMachineUpdater:4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784: snapshotIndex: updateIncreasingly -1 -> 3
2019-07-04 03:28:51,761 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33:group-3F825069B784 closes. The last applied log index is 3
2019-07-04 03:28:51,762 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784 was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-07-04 03:28:51,764 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/4fa47aa0-a5ba-42ff-ac44-44ac287eec33/b28a7668-fb3a-48cd-b967-3f825069b784 close()
2019-07-04 03:28:51,768 INFO  server.GrpcService (GrpcService.java:closeImpl(155)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: shutdown server with port 38341 now
2019-07-04 03:28:51,786 INFO  server.GrpcService (GrpcService.java:closeImpl(163)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: shutdown server with port 38341 successfully
2019-07-04 03:28:51,787 WARN  server.GrpcLogAppender (LogUtils.java:warn(134)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb->4fa47aa0-a5ba-42ff-ac44-44ac287eec33: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: HTTP/2 error code: CANCEL
Received Rst Stream
2019-07-04 03:28:51,787 WARN  server.GrpcServerProtocolService (LogUtils.java:warn(134)) - 4fa47aa0-a5ba-42ff-ac44-44ac287eec33: appendEntries onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-07-04 03:28:51,793 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb->4fa47aa0-a5ba-42ff-ac44-44ac287eec33: nextIndex: updateUnconditionally 5 -> 4
2019-07-04 03:28:51,825 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: close
2019-07-04 03:28:51,826 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(245)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: shutdown group-3F825069B784
2019-07-04 03:28:51,828 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F825069B784,id=7eb567d1-0fd2-42ed-af1d-45ce1790befb
2019-07-04 03:28:51,828 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: shutdown LeaderState
2019-07-04 03:28:51,832 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb-PendingRequests: sendNotLeaderResponses
2019-07-04 03:28:51,832 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - GrpcLogAppender(7eb567d1-0fd2-42ed-af1d-45ce1790befb->4fa47aa0-a5ba-42ff-ac44-44ac287eec33): Wait interrupted by java.lang.InterruptedException
2019-07-04 03:28:51,832 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - GrpcLogAppender(7eb567d1-0fd2-42ed-af1d-45ce1790befb->1d5e9e43-752d-4523-9148-42e3a87b6778): Wait interrupted by java.lang.InterruptedException
2019-07-04 03:28:51,838 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(115)) - StateMachineUpdater:7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784: set stopIndex = 4
2019-07-04 03:28:51,844 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(244)) - Taking snapshot at termIndex:(t:2, i:3)
2019-07-04 03:28:51,847 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(248)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784/sm/snapshot.2_3
2019-07-04 03:28:51,847 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(242)) - StateMachineUpdater:7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784: Took a snapshot at index 3
2019-07-04 03:28:51,847 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(80)) - StateMachineUpdater:7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784: snapshotIndex: updateIncreasingly -1 -> 3
2019-07-04 03:28:51,848 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb:group-3F825069B784 closes. The last applied log index is 4
2019-07-04 03:28:51,849 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784 was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-07-04 03:28:51,850 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb-SegmentedRaftLogWorker:Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/7eb567d1-0fd2-42ed-af1d-45ce1790befb/b28a7668-fb3a-48cd-b967-3f825069b784 close()
2019-07-04 03:28:51,852 INFO  server.GrpcService (GrpcService.java:closeImpl(155)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: shutdown server with port 33415 now
2019-07-04 03:28:51,853 INFO  server.GrpcService (GrpcService.java:closeImpl(163)) - 7eb567d1-0fd2-42ed-af1d-45ce1790befb: shutdown server with port 33415 successfully
