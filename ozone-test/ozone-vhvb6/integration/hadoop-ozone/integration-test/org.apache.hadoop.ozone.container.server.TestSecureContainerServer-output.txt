2019-06-13 08:44:57,361 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-13 08:44:57,448 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-06-13 08:44:57,505 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 08:44:57,515 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 42587 (custom)
2019-06-13 08:44:57,516 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 08:44:57,518 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 08:44:57,519 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 08:44:57,520 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 08:44:57,566 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2fb6d0d1-0800-4f7e-9a00-23f7193a680f] (custom)
2019-06-13 08:44:57,570 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 2fb6d0d1-0800-4f7e-9a00-23f7193a680f at port 42587
2019-06-13 08:44:57,584 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: start RPC server
2019-06-13 08:44:57,585 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: GrpcService started, listening on 0.0.0.0/0.0.0.0:42587
2019-06-13 08:44:57,658 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: addNew group-230FBEC84D8F:[2fb6d0d1-0800-4f7e-9a00-23f7193a680f:0.0.0.0:42587] returns group-230FBEC84D8F:java.util.concurrent.CompletableFuture@2c255601[Not completed]
2019-06-13 08:44:57,664 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: new RaftServerImpl for group-230FBEC84D8F:[2fb6d0d1-0800-4f7e-9a00-23f7193a680f:0.0.0.0:42587] with ContainerStateMachine:uninitialized
2019-06-13 08:44:57,665 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 08:44:57,665 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 08:44:57,666 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 08:44:57,667 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 08:44:57,671 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f:group-230FBEC84D8F ConfigurationManager, init=-1: [2fb6d0d1-0800-4f7e-9a00-23f7193a680f:0.0.0.0:42587], old=null, confs=<EMPTY_MAP>
2019-06-13 08:44:57,671 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2fb6d0d1-0800-4f7e-9a00-23f7193a680f] (custom)
2019-06-13 08:44:57,676 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2fb6d0d1-0800-4f7e-9a00-23f7193a680f/2793fba4-f48e-4d30-a5f2-230fbec84d8f does not exist. Creating ...
2019-06-13 08:44:57,684 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2fb6d0d1-0800-4f7e-9a00-23f7193a680f/2793fba4-f48e-4d30-a5f2-230fbec84d8f/in_use.lock acquired by nodename 5717@ozone-vhvb6-1831697805
2019-06-13 08:44:57,690 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2fb6d0d1-0800-4f7e-9a00-23f7193a680f/2793fba4-f48e-4d30-a5f2-230fbec84d8f has been successfully formatted.
2019-06-13 08:44:57,691 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 08:44:57,692 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 08:44:57,693 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 08:44:57,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 08:44:57,697 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 08:44:57,700 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 08:44:57,702 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 2fb6d0d1-0800-4f7e-9a00-23f7193a680f-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2fb6d0d1-0800-4f7e-9a00-23f7193a680f/2793fba4-f48e-4d30-a5f2-230fbec84d8f
2019-06-13 08:44:57,702 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 08:44:57,702 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 08:44:57,704 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 08:44:57,704 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 08:44:57,705 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 08:44:57,705 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 08:44:57,706 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 08:44:57,706 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 08:44:57,707 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 08:44:57,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 08:44:57,713 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 08:44:57,714 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 08:44:57,714 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 08:44:57,726 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: start group-230FBEC84D8F
2019-06-13 08:44:57,727 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f:group-230FBEC84D8F changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 08:44:57,728 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: start FollowerState
2019-06-13 08:44:57,765 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-230FBEC84D8F,id=2fb6d0d1-0800-4f7e-9a00-23f7193a680f
2019-06-13 08:44:57,809 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-3019EE2F907F->2fb6d0d1-0800-4f7e-9a00-23f7193a680f: receive RaftClientReply:client-3019EE2F907F->2fb6d0d1-0800-4f7e-9a00-23f7193a680f@group-230FBEC84D8F, cid=1, FAILED org.apache.ratis.protocol.NotLeaderException: Server 2fb6d0d1-0800-4f7e-9a00-23f7193a680f is not the leader (null). Request must be sent to leader., logIndex=0, commits[2fb6d0d1-0800-4f7e-9a00-23f7193a680f:c-1]
2019-06-13 08:44:58,816 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-3019EE2F907F->2fb6d0d1-0800-4f7e-9a00-23f7193a680f: receive RaftClientReply:client-3019EE2F907F->2fb6d0d1-0800-4f7e-9a00-23f7193a680f@group-230FBEC84D8F, cid=1, FAILED org.apache.ratis.protocol.NotLeaderException: Server 2fb6d0d1-0800-4f7e-9a00-23f7193a680f is not the leader (null). Request must be sent to leader., logIndex=0, commits[2fb6d0d1-0800-4f7e-9a00-23f7193a680f:c-1]
2019-06-13 08:44:58,872 INFO  impl.FollowerState (FollowerState.java:run(101)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f:group-230FBEC84D8F changes to CANDIDATE, lastRpcTime:1144, electionTimeout:1144ms
2019-06-13 08:44:58,872 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: shutdown FollowerState
2019-06-13 08:44:58,872 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f:group-230FBEC84D8F changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-13 08:44:58,874 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: start LeaderElection
2019-06-13 08:44:58,876 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f:group-230FBEC84D8F:LeaderElection1: begin an election at term 1 for -1: [2fb6d0d1-0800-4f7e-9a00-23f7193a680f:0.0.0.0:42587], old=null
2019-06-13 08:44:58,877 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: shutdown LeaderElection
2019-06-13 08:44:58,878 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f:group-230FBEC84D8F changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-13 08:44:58,878 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f:group-230FBEC84D8F change Leader from null to 2fb6d0d1-0800-4f7e-9a00-23f7193a680f at term 1 for becomeLeader, leader elected after 1186ms
2019-06-13 08:44:58,881 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-13 08:44:58,881 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-13 08:44:58,883 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-13 08:44:58,883 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-13 08:44:58,889 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: start LeaderState
2019-06-13 08:44:58,900 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f-RaftLogWorker: Starting segment from index:0
2019-06-13 08:44:58,905 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f:group-230FBEC84D8F set configuration 0: [2fb6d0d1-0800-4f7e-9a00-23f7193a680f:0.0.0.0:42587], old=null at 0
2019-06-13 08:44:59,026 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2fb6d0d1-0800-4f7e-9a00-23f7193a680f/2793fba4-f48e-4d30-a5f2-230fbec84d8f/current/log_inprogress_0
2019-06-13 08:44:59,832 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-13 08:44:59,838 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-3019EE2F907F->2fb6d0d1-0800-4f7e-9a00-23f7193a680f: receive RaftClientReply:client-3019EE2F907F->2fb6d0d1-0800-4f7e-9a00-23f7193a680f@group-230FBEC84D8F, cid=1, SUCCESS, logIndex=1, commits[2fb6d0d1-0800-4f7e-9a00-23f7193a680f:c1]
2019-06-13 08:44:59,839 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-13 08:44:59,867 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-8B9EF9A54D63->2fb6d0d1-0800-4f7e-9a00-23f7193a680f: receive RaftClientReply:client-8B9EF9A54D63->2fb6d0d1-0800-4f7e-9a00-23f7193a680f@group-230FBEC84D8F, cid=2, SUCCESS, logIndex=3, commits[2fb6d0d1-0800-4f7e-9a00-23f7193a680f:c3]
2019-06-13 08:44:59,875 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-13 08:44:59,876 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: close
2019-06-13 08:44:59,876 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 1-OrderedRequestStreamObserver1: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-13 08:44:59,877 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: shutdown group-230FBEC84D8F
2019-06-13 08:44:59,878 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-230FBEC84D8F,id=2fb6d0d1-0800-4f7e-9a00-23f7193a680f
2019-06-13 08:44:59,878 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: shutdown LeaderState
2019-06-13 08:44:59,878 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f-PendingRequests: sendNotLeaderResponses
2019-06-13 08:44:59,881 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-2fb6d0d1-0800-4f7e-9a00-23f7193a680f-group-230FBEC84D8F: set stopIndex = 4
2019-06-13 08:44:59,881 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-13 08:44:59,882 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2fb6d0d1-0800-4f7e-9a00-23f7193a680f/2793fba4-f48e-4d30-a5f2-230fbec84d8f/sm/snapshot.1_4
2019-06-13 08:44:59,888 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f:group-230FBEC84D8F closes. The last applied log index is 4
2019-06-13 08:44:59,888 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 08:44:59,889 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f-RaftLogWorker close()
2019-06-13 08:44:59,890 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: shutdown server with port 42587 now
2019-06-13 08:44:59,891 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 2fb6d0d1-0800-4f7e-9a00-23f7193a680f: shutdown server with port 42587 successfully
2019-06-13 08:44:59,911 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-06-13 08:44:59,912 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 08:44:59,912 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 34953 (custom)
2019-06-13 08:44:59,913 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 08:44:59,913 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 08:44:59,913 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 08:44:59,913 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 08:44:59,914 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6f024772-60a4-44d0-8475-05be0b3338a0] (custom)
2019-06-13 08:44:59,914 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 6f024772-60a4-44d0-8475-05be0b3338a0 at port 34953
2019-06-13 08:44:59,932 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 6f024772-60a4-44d0-8475-05be0b3338a0: start RPC server
2019-06-13 08:44:59,934 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 6f024772-60a4-44d0-8475-05be0b3338a0: GrpcService started, listening on 0.0.0.0/0.0.0.0:34953
Jun 13, 2019 8:44:59 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=17, target=0.0.0.0:42587} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 13, 2019 8:44:59 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=9, target=0.0.0.0:40761} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connectToDatanode(XceiverClientGrpc.java:163)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connect(XceiverClientGrpc.java:120)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:227)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServer(TestSecureContainerServer.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-13 08:44:59,956 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 6f024772-60a4-44d0-8475-05be0b3338a0: addNew group-6936FEE59FC4:[6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559] returns group-6936FEE59FC4:java.util.concurrent.CompletableFuture@7c284b68[Not completed]
2019-06-13 08:44:59,956 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 6f024772-60a4-44d0-8475-05be0b3338a0: new RaftServerImpl for group-6936FEE59FC4:[6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559] with ContainerStateMachine:uninitialized
2019-06-13 08:44:59,957 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 08:44:59,957 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 08:44:59,957 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 08:44:59,957 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 08:44:59,957 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 6f024772-60a4-44d0-8475-05be0b3338a0:group-6936FEE59FC4 ConfigurationManager, init=-1: [6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559], old=null, confs=<EMPTY_MAP>
2019-06-13 08:44:59,958 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6f024772-60a4-44d0-8475-05be0b3338a0] (custom)
2019-06-13 08:44:59,958 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6f024772-60a4-44d0-8475-05be0b3338a0/0af97e30-edbc-43d8-a852-6936fee59fc4 does not exist. Creating ...
2019-06-13 08:44:59,960 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6f024772-60a4-44d0-8475-05be0b3338a0/0af97e30-edbc-43d8-a852-6936fee59fc4/in_use.lock acquired by nodename 5717@ozone-vhvb6-1831697805
2019-06-13 08:44:59,962 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6f024772-60a4-44d0-8475-05be0b3338a0/0af97e30-edbc-43d8-a852-6936fee59fc4 has been successfully formatted.
2019-06-13 08:44:59,963 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 08:44:59,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 08:44:59,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 08:44:59,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 08:44:59,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 08:44:59,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 08:44:59,963 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 6f024772-60a4-44d0-8475-05be0b3338a0-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6f024772-60a4-44d0-8475-05be0b3338a0/0af97e30-edbc-43d8-a852-6936fee59fc4
2019-06-13 08:44:59,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 08:44:59,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 08:44:59,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 08:44:59,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 08:44:59,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 08:44:59,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 08:44:59,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 08:44:59,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 08:44:59,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 08:44:59,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 08:44:59,966 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 08:44:59,966 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 08:44:59,966 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 08:44:59,966 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 6f024772-60a4-44d0-8475-05be0b3338a0: start group-6936FEE59FC4
2019-06-13 08:44:59,966 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 6f024772-60a4-44d0-8475-05be0b3338a0:group-6936FEE59FC4 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 08:44:59,967 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 6f024772-60a4-44d0-8475-05be0b3338a0: start FollowerState
2019-06-13 08:44:59,968 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-6936FEE59FC4,id=6f024772-60a4-44d0-8475-05be0b3338a0
2019-06-13 08:44:59,976 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 08:44:59,977 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 41559 (custom)
2019-06-13 08:44:59,977 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 08:44:59,977 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 08:44:59,977 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 08:44:59,978 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 08:44:59,978 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e98f0018-8d1b-45e4-a833-ebf883986831] (custom)
2019-06-13 08:44:59,978 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis e98f0018-8d1b-45e4-a833-ebf883986831 at port 41559
2019-06-13 08:44:59,983 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - e98f0018-8d1b-45e4-a833-ebf883986831: start RPC server
2019-06-13 08:44:59,984 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - e98f0018-8d1b-45e4-a833-ebf883986831: GrpcService started, listening on 0.0.0.0/0.0.0.0:41559
2019-06-13 08:45:00,004 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - e98f0018-8d1b-45e4-a833-ebf883986831: addNew group-6936FEE59FC4:[6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559] returns group-6936FEE59FC4:java.util.concurrent.CompletableFuture@59edd4c0[Not completed]
2019-06-13 08:45:00,005 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - e98f0018-8d1b-45e4-a833-ebf883986831: new RaftServerImpl for group-6936FEE59FC4:[6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559] with ContainerStateMachine:uninitialized
2019-06-13 08:45:00,005 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 08:45:00,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 08:45:00,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 08:45:00,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 08:45:00,006 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - e98f0018-8d1b-45e4-a833-ebf883986831:group-6936FEE59FC4 ConfigurationManager, init=-1: [6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559], old=null, confs=<EMPTY_MAP>
2019-06-13 08:45:00,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e98f0018-8d1b-45e4-a833-ebf883986831] (custom)
2019-06-13 08:45:00,007 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e98f0018-8d1b-45e4-a833-ebf883986831/0af97e30-edbc-43d8-a852-6936fee59fc4 does not exist. Creating ...
2019-06-13 08:45:00,009 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e98f0018-8d1b-45e4-a833-ebf883986831/0af97e30-edbc-43d8-a852-6936fee59fc4/in_use.lock acquired by nodename 5717@ozone-vhvb6-1831697805
2019-06-13 08:45:00,011 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e98f0018-8d1b-45e4-a833-ebf883986831/0af97e30-edbc-43d8-a852-6936fee59fc4 has been successfully formatted.
2019-06-13 08:45:00,011 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 08:45:00,011 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 08:45:00,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 08:45:00,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 08:45:00,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 08:45:00,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 08:45:00,012 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new e98f0018-8d1b-45e4-a833-ebf883986831-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e98f0018-8d1b-45e4-a833-ebf883986831/0af97e30-edbc-43d8-a852-6936fee59fc4
2019-06-13 08:45:00,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 08:45:00,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 08:45:00,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 08:45:00,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 08:45:00,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 08:45:00,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 08:45:00,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 08:45:00,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 08:45:00,014 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 08:45:00,014 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 08:45:00,014 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 08:45:00,014 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 08:45:00,015 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 08:45:00,015 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - e98f0018-8d1b-45e4-a833-ebf883986831: start group-6936FEE59FC4
2019-06-13 08:45:00,015 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e98f0018-8d1b-45e4-a833-ebf883986831:group-6936FEE59FC4 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 08:45:00,015 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e98f0018-8d1b-45e4-a833-ebf883986831: start FollowerState
2019-06-13 08:45:00,016 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-6936FEE59FC4,id=e98f0018-8d1b-45e4-a833-ebf883986831
2019-06-13 08:45:00,021 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 08:45:00,021 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 39883 (custom)
2019-06-13 08:45:00,021 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 08:45:00,022 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 08:45:00,022 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 08:45:00,022 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 08:45:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2c32d143-70bf-4edb-8a5f-2c752412339d] (custom)
2019-06-13 08:45:00,023 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 2c32d143-70bf-4edb-8a5f-2c752412339d at port 39883
2019-06-13 08:45:00,028 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: start RPC server
2019-06-13 08:45:00,029 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: GrpcService started, listening on 0.0.0.0/0.0.0.0:39883
2019-06-13 08:45:00,045 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: addNew group-6936FEE59FC4:[6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559] returns group-6936FEE59FC4:java.util.concurrent.CompletableFuture@258aa37d[Not completed]
2019-06-13 08:45:00,045 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: new RaftServerImpl for group-6936FEE59FC4:[6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559] with ContainerStateMachine:uninitialized
2019-06-13 08:45:00,046 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 08:45:00,046 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 08:45:00,047 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 08:45:00,047 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 08:45:00,047 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 2c32d143-70bf-4edb-8a5f-2c752412339d:group-6936FEE59FC4 ConfigurationManager, init=-1: [6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559], old=null, confs=<EMPTY_MAP>
2019-06-13 08:45:00,047 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2c32d143-70bf-4edb-8a5f-2c752412339d] (custom)
2019-06-13 08:45:00,047 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2c32d143-70bf-4edb-8a5f-2c752412339d/0af97e30-edbc-43d8-a852-6936fee59fc4 does not exist. Creating ...
2019-06-13 08:45:00,051 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2c32d143-70bf-4edb-8a5f-2c752412339d/0af97e30-edbc-43d8-a852-6936fee59fc4/in_use.lock acquired by nodename 5717@ozone-vhvb6-1831697805
2019-06-13 08:45:00,053 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2c32d143-70bf-4edb-8a5f-2c752412339d/0af97e30-edbc-43d8-a852-6936fee59fc4 has been successfully formatted.
2019-06-13 08:45:00,053 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 08:45:00,054 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 08:45:00,054 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 08:45:00,054 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 08:45:00,054 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 08:45:00,054 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 08:45:00,054 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 2c32d143-70bf-4edb-8a5f-2c752412339d-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2c32d143-70bf-4edb-8a5f-2c752412339d/0af97e30-edbc-43d8-a852-6936fee59fc4
2019-06-13 08:45:00,054 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 08:45:00,054 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 08:45:00,054 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 08:45:00,055 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 08:45:00,055 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 08:45:00,055 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 08:45:00,055 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 08:45:00,055 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 08:45:00,055 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 08:45:00,055 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 08:45:00,056 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 08:45:00,056 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 08:45:00,056 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 08:45:00,056 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: start group-6936FEE59FC4
2019-06-13 08:45:00,056 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 2c32d143-70bf-4edb-8a5f-2c752412339d:group-6936FEE59FC4 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 08:45:00,056 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: start FollowerState
2019-06-13 08:45:00,056 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-6936FEE59FC4,id=2c32d143-70bf-4edb-8a5f-2c752412339d
2019-06-13 08:45:00,068 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-80EB9F1D60D4->6f024772-60a4-44d0-8475-05be0b3338a0: receive RaftClientReply:client-80EB9F1D60D4->6f024772-60a4-44d0-8475-05be0b3338a0@group-6936FEE59FC4, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server 6f024772-60a4-44d0-8475-05be0b3338a0 is not the leader (2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883). Request must be sent to leader., logIndex=0, commits[6f024772-60a4-44d0-8475-05be0b3338a0:c-1]
2019-06-13 08:45:00,070 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-13 08:45:00,992 INFO  impl.FollowerState (FollowerState.java:run(101)) - 6f024772-60a4-44d0-8475-05be0b3338a0:group-6936FEE59FC4 changes to CANDIDATE, lastRpcTime:1025, electionTimeout:1025ms
2019-06-13 08:45:00,993 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 6f024772-60a4-44d0-8475-05be0b3338a0: shutdown FollowerState
2019-06-13 08:45:00,993 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 6f024772-60a4-44d0-8475-05be0b3338a0:group-6936FEE59FC4 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-13 08:45:00,993 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 6f024772-60a4-44d0-8475-05be0b3338a0: start LeaderElection
2019-06-13 08:45:00,996 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 6f024772-60a4-44d0-8475-05be0b3338a0:group-6936FEE59FC4:LeaderElection2: begin an election at term 1 for -1: [6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559], old=null
2019-06-13 08:45:01,013 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 2c32d143-70bf-4edb-8a5f-2c752412339d:group-6936FEE59FC4 changes role from FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:6f024772-60a4-44d0-8475-05be0b3338a0
2019-06-13 08:45:01,013 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e98f0018-8d1b-45e4-a833-ebf883986831:group-6936FEE59FC4 changes role from FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:6f024772-60a4-44d0-8475-05be0b3338a0
2019-06-13 08:45:01,013 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: shutdown FollowerState
2019-06-13 08:45:01,014 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - e98f0018-8d1b-45e4-a833-ebf883986831: shutdown FollowerState
2019-06-13 08:45:01,014 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e98f0018-8d1b-45e4-a833-ebf883986831: start FollowerState
2019-06-13 08:45:01,014 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: start FollowerState
2019-06-13 08:45:01,014 INFO  impl.FollowerState (FollowerState.java:run(109)) - e98f0018-8d1b-45e4-a833-ebf883986831: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-13 08:45:01,014 INFO  impl.FollowerState (FollowerState.java:run(109)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-13 08:45:01,026 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - 6f024772-60a4-44d0-8475-05be0b3338a0:group-6936FEE59FC4:LeaderElection2: Election PASSED; received 1 response(s) [6f024772-60a4-44d0-8475-05be0b3338a0->e98f0018-8d1b-45e4-a833-ebf883986831,true-t1] and 0 exception(s); 6f024772-60a4-44d0-8475-05be0b3338a0:t1, leader=null, voted=6f024772-60a4-44d0-8475-05be0b3338a0, raftlog=6f024772-60a4-44d0-8475-05be0b3338a0-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559], old=null
2019-06-13 08:45:01,026 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 6f024772-60a4-44d0-8475-05be0b3338a0: shutdown LeaderElection
2019-06-13 08:45:01,027 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 6f024772-60a4-44d0-8475-05be0b3338a0:group-6936FEE59FC4 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-13 08:45:01,027 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 6f024772-60a4-44d0-8475-05be0b3338a0:group-6936FEE59FC4 change Leader from null to 6f024772-60a4-44d0-8475-05be0b3338a0 at term 1 for becomeLeader, leader elected after 1063ms
2019-06-13 08:45:01,027 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-13 08:45:01,027 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-13 08:45:01,027 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-13 08:45:01,027 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-13 08:45:01,029 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-06-13 08:45:01,029 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 08:45:01,030 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-06-13 08:45:01,031 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-06-13 08:45:01,031 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 08:45:01,031 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 08:45:01,031 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-06-13 08:45:01,032 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 08:45:01,032 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-06-13 08:45:01,032 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-06-13 08:45:01,032 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 08:45:01,032 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 08:45:01,032 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 6f024772-60a4-44d0-8475-05be0b3338a0: start LeaderState
2019-06-13 08:45:01,033 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 6f024772-60a4-44d0-8475-05be0b3338a0-RaftLogWorker: Starting segment from index:0
2019-06-13 08:45:01,051 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 6f024772-60a4-44d0-8475-05be0b3338a0:group-6936FEE59FC4 set configuration 0: [6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559], old=null at 0
2019-06-13 08:45:01,071 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 6f024772-60a4-44d0-8475-05be0b3338a0-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6f024772-60a4-44d0-8475-05be0b3338a0/0af97e30-edbc-43d8-a852-6936fee59fc4/current/log_inprogress_0
2019-06-13 08:45:01,138 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 2c32d143-70bf-4edb-8a5f-2c752412339d:group-6936FEE59FC4 change Leader from null to 6f024772-60a4-44d0-8475-05be0b3338a0 at term 1 for appendEntries, leader elected after 1084ms
2019-06-13 08:45:01,142 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - e98f0018-8d1b-45e4-a833-ebf883986831:group-6936FEE59FC4 change Leader from null to 6f024772-60a4-44d0-8475-05be0b3338a0 at term 1 for appendEntries, leader elected after 1130ms
2019-06-13 08:45:01,143 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-80EB9F1D60D4->e98f0018-8d1b-45e4-a833-ebf883986831: receive RaftClientReply:client-80EB9F1D60D4->e98f0018-8d1b-45e4-a833-ebf883986831@group-6936FEE59FC4, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server e98f0018-8d1b-45e4-a833-ebf883986831 is not the leader (6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953). Request must be sent to leader., logIndex=0, commits[e98f0018-8d1b-45e4-a833-ebf883986831:c-1]
2019-06-13 08:45:01,149 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-13 08:45:01,157 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 2c32d143-70bf-4edb-8a5f-2c752412339d:group-6936FEE59FC4 set configuration 0: [6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559], old=null at 0
2019-06-13 08:45:01,158 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - e98f0018-8d1b-45e4-a833-ebf883986831:group-6936FEE59FC4 set configuration 0: [6f024772-60a4-44d0-8475-05be0b3338a0:0.0.0.0:34953, 2c32d143-70bf-4edb-8a5f-2c752412339d:0.0.0.0:39883, e98f0018-8d1b-45e4-a833-ebf883986831:0.0.0.0:41559], old=null at 0
2019-06-13 08:45:01,158 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 2c32d143-70bf-4edb-8a5f-2c752412339d-RaftLogWorker: Starting segment from index:0
2019-06-13 08:45:01,158 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - e98f0018-8d1b-45e4-a833-ebf883986831-RaftLogWorker: Starting segment from index:0
2019-06-13 08:45:01,202 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - e98f0018-8d1b-45e4-a833-ebf883986831-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e98f0018-8d1b-45e4-a833-ebf883986831/0af97e30-edbc-43d8-a852-6936fee59fc4/current/log_inprogress_0
2019-06-13 08:45:01,205 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 2c32d143-70bf-4edb-8a5f-2c752412339d-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2c32d143-70bf-4edb-8a5f-2c752412339d/0af97e30-edbc-43d8-a852-6936fee59fc4/current/log_inprogress_0
Jun 13, 2019 8:45:02 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=43, target=0.0.0.0:41559} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 13, 2019 8:45:02 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=51, target=0.0.0.0:39883} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 13, 2019 8:45:02 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=35, target=0.0.0.0:34953} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-13 08:45:02,165 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-13 08:45:02,171 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-13 08:45:02,174 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-13 08:45:02,175 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-80EB9F1D60D4->6f024772-60a4-44d0-8475-05be0b3338a0: receive RaftClientReply:client-80EB9F1D60D4->6f024772-60a4-44d0-8475-05be0b3338a0@group-6936FEE59FC4, cid=6, SUCCESS, logIndex=1, commits[6f024772-60a4-44d0-8475-05be0b3338a0:c1, 2c32d143-70bf-4edb-8a5f-2c752412339d:c0, e98f0018-8d1b-45e4-a833-ebf883986831:c0]
2019-06-13 08:45:02,175 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-13 08:45:02,194 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-7FB074C9C0F7->6f024772-60a4-44d0-8475-05be0b3338a0: receive RaftClientReply:client-7FB074C9C0F7->6f024772-60a4-44d0-8475-05be0b3338a0@group-6936FEE59FC4, cid=7, SUCCESS, logIndex=3, commits[6f024772-60a4-44d0-8475-05be0b3338a0:c3, 2c32d143-70bf-4edb-8a5f-2c752412339d:c2, e98f0018-8d1b-45e4-a833-ebf883986831:c2]
2019-06-13 08:45:02,197 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 6f024772-60a4-44d0-8475-05be0b3338a0: close
2019-06-13 08:45:02,197 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 6f024772-60a4-44d0-8475-05be0b3338a0: shutdown group-6936FEE59FC4
2019-06-13 08:45:02,197 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-6936FEE59FC4,id=6f024772-60a4-44d0-8475-05be0b3338a0
2019-06-13 08:45:02,197 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 6f024772-60a4-44d0-8475-05be0b3338a0: shutdown LeaderState
2019-06-13 08:45:02,198 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 6f024772-60a4-44d0-8475-05be0b3338a0-PendingRequests: sendNotLeaderResponses
2019-06-13 08:45:02,198 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(142)) - GrpcLogAppender(6f024772-60a4-44d0-8475-05be0b3338a0 -> e98f0018-8d1b-45e4-a833-ebf883986831): Wait interrupted by java.lang.InterruptedException
2019-06-13 08:45:02,198 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(142)) - GrpcLogAppender(6f024772-60a4-44d0-8475-05be0b3338a0 -> 2c32d143-70bf-4edb-8a5f-2c752412339d): Wait interrupted by java.lang.InterruptedException
2019-06-13 08:45:02,200 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(104)) - e98f0018-8d1b-45e4-a833-ebf883986831: appendEntries completed
2019-06-13 08:45:02,200 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-6f024772-60a4-44d0-8475-05be0b3338a0-group-6936FEE59FC4: set stopIndex = 4
2019-06-13 08:45:02,200 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-13 08:45:02,201 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(104)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: appendEntries completed
2019-06-13 08:45:02,201 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6f024772-60a4-44d0-8475-05be0b3338a0/0af97e30-edbc-43d8-a852-6936fee59fc4/sm/snapshot.1_4
2019-06-13 08:45:02,201 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 6f024772-60a4-44d0-8475-05be0b3338a0:group-6936FEE59FC4 closes. The last applied log index is 4
2019-06-13 08:45:02,202 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(277)) - 6f024772-60a4-44d0-8475-05be0b3338a0: follower 6f024772-60a4-44d0-8475-05be0b3338a0->e98f0018-8d1b-45e4-a833-ebf883986831(c3,m4,n5, attendVote=true, lastRpcSendTime=14, lastRpcResponseTime=11) response Completed
2019-06-13 08:45:02,202 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 6f024772-60a4-44d0-8475-05be0b3338a0-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 08:45:02,202 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - 6f024772-60a4-44d0-8475-05be0b3338a0->e98f0018-8d1b-45e4-a833-ebf883986831: nextIndex: updateUnconditionally 5 -> -1
2019-06-13 08:45:02,203 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(277)) - 6f024772-60a4-44d0-8475-05be0b3338a0: follower 6f024772-60a4-44d0-8475-05be0b3338a0->2c32d143-70bf-4edb-8a5f-2c752412339d(c3,m4,n5, attendVote=true, lastRpcSendTime=16, lastRpcResponseTime=11) response Completed
2019-06-13 08:45:02,203 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - 6f024772-60a4-44d0-8475-05be0b3338a0->2c32d143-70bf-4edb-8a5f-2c752412339d: nextIndex: updateUnconditionally 5 -> -1
2019-06-13 08:45:02,206 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 6f024772-60a4-44d0-8475-05be0b3338a0-RaftLogWorker close()
2019-06-13 08:45:02,206 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 6f024772-60a4-44d0-8475-05be0b3338a0: shutdown server with port 34953 now
2019-06-13 08:45:02,207 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 6f024772-60a4-44d0-8475-05be0b3338a0: shutdown server with port 34953 successfully
2019-06-13 08:45:02,212 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - e98f0018-8d1b-45e4-a833-ebf883986831: close
2019-06-13 08:45:02,212 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - e98f0018-8d1b-45e4-a833-ebf883986831: shutdown group-6936FEE59FC4
2019-06-13 08:45:02,212 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-6936FEE59FC4,id=e98f0018-8d1b-45e4-a833-ebf883986831
2019-06-13 08:45:02,213 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - e98f0018-8d1b-45e4-a833-ebf883986831: shutdown FollowerState
2019-06-13 08:45:02,213 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-e98f0018-8d1b-45e4-a833-ebf883986831-group-6936FEE59FC4: set stopIndex = 3
2019-06-13 08:45:02,213 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-13 08:45:02,213 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e98f0018-8d1b-45e4-a833-ebf883986831/0af97e30-edbc-43d8-a852-6936fee59fc4/sm/snapshot.1_3
2019-06-13 08:45:02,213 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - e98f0018-8d1b-45e4-a833-ebf883986831:group-6936FEE59FC4 closes. The last applied log index is 3
2019-06-13 08:45:02,213 INFO  impl.FollowerState (FollowerState.java:run(109)) - e98f0018-8d1b-45e4-a833-ebf883986831: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-13 08:45:02,214 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - e98f0018-8d1b-45e4-a833-ebf883986831-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 08:45:02,215 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - e98f0018-8d1b-45e4-a833-ebf883986831-RaftLogWorker close()
2019-06-13 08:45:02,215 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - e98f0018-8d1b-45e4-a833-ebf883986831: shutdown server with port 41559 now
2019-06-13 08:45:02,216 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - e98f0018-8d1b-45e4-a833-ebf883986831: shutdown server with port 41559 successfully
2019-06-13 08:45:02,217 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: close
2019-06-13 08:45:02,218 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: shutdown group-6936FEE59FC4
2019-06-13 08:45:02,219 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-6936FEE59FC4,id=2c32d143-70bf-4edb-8a5f-2c752412339d
2019-06-13 08:45:02,219 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: shutdown FollowerState
2019-06-13 08:45:02,219 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-2c32d143-70bf-4edb-8a5f-2c752412339d-group-6936FEE59FC4: set stopIndex = 3
2019-06-13 08:45:02,219 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-13 08:45:02,220 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/2c32d143-70bf-4edb-8a5f-2c752412339d/0af97e30-edbc-43d8-a852-6936fee59fc4/sm/snapshot.1_3
2019-06-13 08:45:02,220 INFO  impl.FollowerState (FollowerState.java:run(109)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-13 08:45:02,220 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 2c32d143-70bf-4edb-8a5f-2c752412339d:group-6936FEE59FC4 closes. The last applied log index is 3
2019-06-13 08:45:02,221 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 2c32d143-70bf-4edb-8a5f-2c752412339d-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 08:45:02,223 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 2c32d143-70bf-4edb-8a5f-2c752412339d-RaftLogWorker close()
2019-06-13 08:45:02,223 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: shutdown server with port 39883 now
2019-06-13 08:45:02,223 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 2c32d143-70bf-4edb-8a5f-2c752412339d: shutdown server with port 39883 successfully
