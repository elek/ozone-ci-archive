2019-06-13 05:00:23,923 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler013b3df9-3d01-44d7-988d-0c0c1996b503/hdds of  storage type : DISK and capacity : 104021790720
2019-06-13 05:00:23,927 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler013b3df9-3d01-44d7-988d-0c0c1996b503/hdds to VolumeSet
2019-06-13 05:00:23,937 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
2019-06-13 05:00:23,976 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-06-13 05:00:24,468 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 44793
2019-06-13 05:00:24,907 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-13 05:00:24,929 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 05:00:24,937 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 44793 (custom)
2019-06-13 05:00:24,938 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 05:00:24,940 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 05:00:24,941 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 05:00:24,941 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 05:00:25,092 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler013b3df9-3d01-44d7-988d-0c0c1996b503/ratis] (custom)
2019-06-13 05:00:25,104 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 32863
2019-06-13 05:00:25,125 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-13 05:00:25,126 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-13 05:00:25,127 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis e5a5a15f-36ca-4193-b124-78c0b7feac1d at port 44793
2019-06-13 05:00:25,138 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: start RPC server
2019-06-13 05:00:25,299 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: GrpcService started, listening on 0.0.0.0/0.0.0.0:44793
2019-06-13 05:00:25,567 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: addNew group-C67399C5E28F:[e5a5a15f-36ca-4193-b124-78c0b7feac1d:127.0.0.1:44793] returns group-C67399C5E28F:java.util.concurrent.CompletableFuture@3fc33b87[Not completed]
2019-06-13 05:00:25,594 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: new RaftServerImpl for group-C67399C5E28F:[e5a5a15f-36ca-4193-b124-78c0b7feac1d:127.0.0.1:44793] with ContainerStateMachine:uninitialized
2019-06-13 05:00:25,595 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 05:00:25,595 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 05:00:25,595 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 05:00:25,596 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 05:00:25,600 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d:group-C67399C5E28F ConfigurationManager, init=-1: [e5a5a15f-36ca-4193-b124-78c0b7feac1d:127.0.0.1:44793], old=null, confs=<EMPTY_MAP>
2019-06-13 05:00:25,600 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler013b3df9-3d01-44d7-988d-0c0c1996b503/ratis] (custom)
2019-06-13 05:00:25,606 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler013b3df9-3d01-44d7-988d-0c0c1996b503/ratis/59a904fe-9e6e-49bf-adf6-c67399c5e28f does not exist. Creating ...
2019-06-13 05:00:25,618 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler013b3df9-3d01-44d7-988d-0c0c1996b503/ratis/59a904fe-9e6e-49bf-adf6-c67399c5e28f/in_use.lock acquired by nodename 4193@ozone-2qf2r-4254018156
2019-06-13 05:00:25,627 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler013b3df9-3d01-44d7-988d-0c0c1996b503/ratis/59a904fe-9e6e-49bf-adf6-c67399c5e28f has been successfully formatted.
2019-06-13 05:00:25,629 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 05:00:25,629 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 05:00:25,631 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 05:00:25,634 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 05:00:25,637 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 05:00:25,641 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 05:00:25,643 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new e5a5a15f-36ca-4193-b124-78c0b7feac1d-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler013b3df9-3d01-44d7-988d-0c0c1996b503/ratis/59a904fe-9e6e-49bf-adf6-c67399c5e28f
2019-06-13 05:00:25,644 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 05:00:25,644 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 05:00:25,646 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 05:00:25,647 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 05:00:25,647 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 05:00:25,647 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 05:00:25,648 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 05:00:25,648 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 05:00:25,649 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 05:00:25,651 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 05:00:25,655 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 05:00:25,656 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 05:00:25,657 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 05:00:25,761 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: start group-C67399C5E28F
2019-06-13 05:00:25,763 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d:group-C67399C5E28F changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 05:00:25,764 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: start FollowerState
2019-06-13 05:00:25,766 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-C67399C5E28F,id=e5a5a15f-36ca-4193-b124-78c0b7feac1d
2019-06-13 05:00:26,907 INFO  impl.FollowerState (FollowerState.java:run(101)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d:group-C67399C5E28F changes to CANDIDATE, lastRpcTime:1144, electionTimeout:1143ms
2019-06-13 05:00:26,908 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: shutdown FollowerState
2019-06-13 05:00:26,908 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d:group-C67399C5E28F changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-13 05:00:26,909 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: start LeaderElection
2019-06-13 05:00:26,912 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d:group-C67399C5E28F:LeaderElection1: begin an election at term 1 for -1: [e5a5a15f-36ca-4193-b124-78c0b7feac1d:127.0.0.1:44793], old=null
2019-06-13 05:00:26,913 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: shutdown LeaderElection
2019-06-13 05:00:26,914 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d:group-C67399C5E28F changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-13 05:00:26,914 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d:group-C67399C5E28F change Leader from null to e5a5a15f-36ca-4193-b124-78c0b7feac1d at term 1 for becomeLeader, leader elected after 1284ms
2019-06-13 05:00:26,917 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-13 05:00:26,917 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-13 05:00:26,919 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-13 05:00:26,919 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-13 05:00:26,927 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: start LeaderState
2019-06-13 05:00:26,938 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d-RaftLogWorker: Starting segment from index:0
2019-06-13 05:00:26,947 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d:group-C67399C5E28F set configuration 0: [e5a5a15f-36ca-4193-b124-78c0b7feac1d:127.0.0.1:44793], old=null at 0
2019-06-13 05:00:27,082 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler013b3df9-3d01-44d7-988d-0c0c1996b503/ratis/59a904fe-9e6e-49bf-adf6-c67399c5e28f/current/log_inprogress_0
2019-06-13 05:00:27,985 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-06-13 05:00:28,040 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 4101313144366077720 is closed with bcsId 0.
2019-06-13 05:00:28,041 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-13 05:00:28,042 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: close
2019-06-13 05:00:28,044 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: shutdown group-C67399C5E28F
2019-06-13 05:00:28,044 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-C67399C5E28F,id=e5a5a15f-36ca-4193-b124-78c0b7feac1d
2019-06-13 05:00:28,044 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: shutdown LeaderState
2019-06-13 05:00:28,045 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d-PendingRequests: sendNotLeaderResponses
2019-06-13 05:00:28,048 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-e5a5a15f-36ca-4193-b124-78c0b7feac1d-group-C67399C5E28F: set stopIndex = 4
2019-06-13 05:00:28,048 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-13 05:00:28,049 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler013b3df9-3d01-44d7-988d-0c0c1996b503/ratis/59a904fe-9e6e-49bf-adf6-c67399c5e28f/sm/snapshot.1_4
2019-06-13 05:00:28,058 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d:group-C67399C5E28F closes. The last applied log index is 4
2019-06-13 05:00:28,060 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 05:00:28,060 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d-RaftLogWorker close()
2019-06-13 05:00:28,061 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: shutdown server with port 44793 now
2019-06-13 05:00:28,067 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - e5a5a15f-36ca-4193-b124-78c0b7feac1d: shutdown server with port 44793 successfully
2019-06-13 05:00:28,074 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-13 05:00:28,111 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerecb4f75b-42b6-46e6-8bfb-bb8ac59216ee/hdds of  storage type : DISK and capacity : 104021790720
2019-06-13 05:00:28,111 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerecb4f75b-42b6-46e6-8bfb-bb8ac59216ee/hdds to VolumeSet
2019-06-13 05:00:28,111 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@6f7e336b
2019-06-13 05:00:28,118 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@6f7e336b
2019-06-13 05:00:28,131 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 44219
2019-06-13 05:00:28,131 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-13 05:00:28,132 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 05:00:28,132 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 44219 (custom)
2019-06-13 05:00:28,133 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 05:00:28,133 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 05:00:28,133 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 05:00:28,133 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 05:00:28,134 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerecb4f75b-42b6-46e6-8bfb-bb8ac59216ee/ratis] (custom)
2019-06-13 05:00:28,135 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 35099
2019-06-13 05:00:28,136 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-13 05:00:28,136 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-13 05:00:28,136 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis a86f88c0-3d45-463e-a0d5-97ca2e9557d4 at port 44219
2019-06-13 05:00:28,149 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: start RPC server
2019-06-13 05:00:28,151 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: GrpcService started, listening on 0.0.0.0/0.0.0.0:44219
2019-06-13 05:00:28,166 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: addNew group-4ED5EC72B4D6:[a86f88c0-3d45-463e-a0d5-97ca2e9557d4:127.0.0.1:44219] returns group-4ED5EC72B4D6:java.util.concurrent.CompletableFuture@259934e6[Not completed]
2019-06-13 05:00:28,167 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: new RaftServerImpl for group-4ED5EC72B4D6:[a86f88c0-3d45-463e-a0d5-97ca2e9557d4:127.0.0.1:44219] with ContainerStateMachine:uninitialized
2019-06-13 05:00:28,168 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 05:00:28,168 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 05:00:28,168 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 05:00:28,168 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 05:00:28,168 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4:group-4ED5EC72B4D6 ConfigurationManager, init=-1: [a86f88c0-3d45-463e-a0d5-97ca2e9557d4:127.0.0.1:44219], old=null, confs=<EMPTY_MAP>
2019-06-13 05:00:28,168 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerecb4f75b-42b6-46e6-8bfb-bb8ac59216ee/ratis] (custom)
2019-06-13 05:00:28,168 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerecb4f75b-42b6-46e6-8bfb-bb8ac59216ee/ratis/7faef652-7480-49d2-883c-4ed5ec72b4d6 does not exist. Creating ...
2019-06-13 05:00:28,171 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerecb4f75b-42b6-46e6-8bfb-bb8ac59216ee/ratis/7faef652-7480-49d2-883c-4ed5ec72b4d6/in_use.lock acquired by nodename 4193@ozone-2qf2r-4254018156
2019-06-13 05:00:28,173 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerecb4f75b-42b6-46e6-8bfb-bb8ac59216ee/ratis/7faef652-7480-49d2-883c-4ed5ec72b4d6 has been successfully formatted.
2019-06-13 05:00:28,174 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 05:00:28,174 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 05:00:28,174 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 05:00:28,174 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 05:00:28,174 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 05:00:28,175 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 05:00:28,175 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new a86f88c0-3d45-463e-a0d5-97ca2e9557d4-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerecb4f75b-42b6-46e6-8bfb-bb8ac59216ee/ratis/7faef652-7480-49d2-883c-4ed5ec72b4d6
2019-06-13 05:00:28,175 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 05:00:28,175 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 05:00:28,175 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 05:00:28,175 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 05:00:28,175 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 05:00:28,176 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 05:00:28,176 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 05:00:28,176 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 05:00:28,176 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 05:00:28,176 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 05:00:28,177 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 05:00:28,177 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 05:00:28,177 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 05:00:28,177 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: start group-4ED5EC72B4D6
2019-06-13 05:00:28,177 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4:group-4ED5EC72B4D6 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 05:00:28,178 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: start FollowerState
2019-06-13 05:00:28,178 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-4ED5EC72B4D6,id=a86f88c0-3d45-463e-a0d5-97ca2e9557d4
2019-06-13 05:00:29,299 INFO  impl.FollowerState (FollowerState.java:run(101)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4:group-4ED5EC72B4D6 changes to CANDIDATE, lastRpcTime:1121, electionTimeout:1121ms
2019-06-13 05:00:29,299 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: shutdown FollowerState
2019-06-13 05:00:29,299 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4:group-4ED5EC72B4D6 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-13 05:00:29,299 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: start LeaderElection
2019-06-13 05:00:29,304 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4:group-4ED5EC72B4D6:LeaderElection2: begin an election at term 1 for -1: [a86f88c0-3d45-463e-a0d5-97ca2e9557d4:127.0.0.1:44219], old=null
2019-06-13 05:00:29,304 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: shutdown LeaderElection
2019-06-13 05:00:29,304 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4:group-4ED5EC72B4D6 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-13 05:00:29,305 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4:group-4ED5EC72B4D6 change Leader from null to a86f88c0-3d45-463e-a0d5-97ca2e9557d4 at term 1 for becomeLeader, leader elected after 1130ms
2019-06-13 05:00:29,305 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-13 05:00:29,305 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-13 05:00:29,305 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-13 05:00:29,305 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-13 05:00:29,305 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: start LeaderState
2019-06-13 05:00:29,306 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4-RaftLogWorker: Starting segment from index:0
2019-06-13 05:00:29,318 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4:group-4ED5EC72B4D6 set configuration 0: [a86f88c0-3d45-463e-a0d5-97ca2e9557d4:127.0.0.1:44219], old=null at 0
2019-06-13 05:00:29,341 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerecb4f75b-42b6-46e6-8bfb-bb8ac59216ee/ratis/7faef652-7480-49d2-883c-4ed5ec72b4d6/current/log_inprogress_0
2019-06-13 05:00:30,220 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-13 05:00:30,221 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: close
2019-06-13 05:00:30,221 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: shutdown group-4ED5EC72B4D6
2019-06-13 05:00:30,222 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-4ED5EC72B4D6,id=a86f88c0-3d45-463e-a0d5-97ca2e9557d4
2019-06-13 05:00:30,222 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: shutdown LeaderState
2019-06-13 05:00:30,222 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4-PendingRequests: sendNotLeaderResponses
2019-06-13 05:00:30,223 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-a86f88c0-3d45-463e-a0d5-97ca2e9557d4-group-4ED5EC72B4D6: set stopIndex = 2
2019-06-13 05:00:30,223 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-13 05:00:30,224 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerecb4f75b-42b6-46e6-8bfb-bb8ac59216ee/ratis/7faef652-7480-49d2-883c-4ed5ec72b4d6/sm/snapshot.1_2
2019-06-13 05:00:30,224 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4:group-4ED5EC72B4D6 closes. The last applied log index is 2
2019-06-13 05:00:30,225 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 05:00:30,226 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4-RaftLogWorker close()
2019-06-13 05:00:30,227 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: shutdown server with port 44219 now
2019-06-13 05:00:30,228 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - a86f88c0-3d45-463e-a0d5-97ca2e9557d4: shutdown server with port 44219 successfully
2019-06-13 05:00:30,235 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-13 05:00:30,261 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleread22ed1-6b2e-49bc-a2b9-2d1d44f2b92c/hdds of  storage type : DISK and capacity : 104021790720
2019-06-13 05:00:30,261 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleread22ed1-6b2e-49bc-a2b9-2d1d44f2b92c/hdds to VolumeSet
2019-06-13 05:00:30,261 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1f51431
2019-06-13 05:00:30,272 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1f51431
2019-06-13 05:00:30,290 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 34635
2019-06-13 05:00:30,290 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-13 05:00:30,291 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 05:00:30,291 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 34635 (custom)
2019-06-13 05:00:30,292 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 05:00:30,292 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 05:00:30,292 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 05:00:30,292 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 05:00:30,293 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleread22ed1-6b2e-49bc-a2b9-2d1d44f2b92c/ratis] (custom)
2019-06-13 05:00:30,293 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 38589
2019-06-13 05:00:30,294 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-13 05:00:30,294 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-13 05:00:30,294 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 2cf79df7-2bc8-483f-ac86-3bd97ad33b45 at port 34635
2019-06-13 05:00:30,309 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: start RPC server
2019-06-13 05:00:30,310 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: GrpcService started, listening on 0.0.0.0/0.0.0.0:34635
2019-06-13 05:00:30,320 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: addNew group-8EF0E05F95A7:[2cf79df7-2bc8-483f-ac86-3bd97ad33b45:127.0.0.1:34635] returns group-8EF0E05F95A7:java.util.concurrent.CompletableFuture@6cc9a80d[Not completed]
2019-06-13 05:00:30,321 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: new RaftServerImpl for group-8EF0E05F95A7:[2cf79df7-2bc8-483f-ac86-3bd97ad33b45:127.0.0.1:34635] with ContainerStateMachine:uninitialized
2019-06-13 05:00:30,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 05:00:30,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 05:00:30,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 05:00:30,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 05:00:30,322 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45:group-8EF0E05F95A7 ConfigurationManager, init=-1: [2cf79df7-2bc8-483f-ac86-3bd97ad33b45:127.0.0.1:34635], old=null, confs=<EMPTY_MAP>
2019-06-13 05:00:30,323 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleread22ed1-6b2e-49bc-a2b9-2d1d44f2b92c/ratis] (custom)
2019-06-13 05:00:30,323 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleread22ed1-6b2e-49bc-a2b9-2d1d44f2b92c/ratis/205fabe8-a715-4f9d-98e1-8ef0e05f95a7 does not exist. Creating ...
2019-06-13 05:00:30,514 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleread22ed1-6b2e-49bc-a2b9-2d1d44f2b92c/ratis/205fabe8-a715-4f9d-98e1-8ef0e05f95a7/in_use.lock acquired by nodename 4193@ozone-2qf2r-4254018156
2019-06-13 05:00:30,520 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleread22ed1-6b2e-49bc-a2b9-2d1d44f2b92c/ratis/205fabe8-a715-4f9d-98e1-8ef0e05f95a7 has been successfully formatted.
2019-06-13 05:00:30,520 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 05:00:30,520 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 05:00:30,521 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 05:00:30,521 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 05:00:30,521 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 05:00:30,521 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 05:00:30,521 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 2cf79df7-2bc8-483f-ac86-3bd97ad33b45-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleread22ed1-6b2e-49bc-a2b9-2d1d44f2b92c/ratis/205fabe8-a715-4f9d-98e1-8ef0e05f95a7
2019-06-13 05:00:30,521 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 05:00:30,521 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 05:00:30,522 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 05:00:30,522 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 05:00:30,522 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 05:00:30,522 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 05:00:30,524 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 05:00:30,524 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 05:00:30,525 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 05:00:30,525 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 05:00:30,525 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 05:00:30,525 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 05:00:30,525 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 05:00:30,526 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: start group-8EF0E05F95A7
2019-06-13 05:00:30,526 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45:group-8EF0E05F95A7 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 05:00:30,526 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: start FollowerState
2019-06-13 05:00:30,526 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-8EF0E05F95A7,id=2cf79df7-2bc8-483f-ac86-3bd97ad33b45
2019-06-13 05:00:31,575 INFO  impl.FollowerState (FollowerState.java:run(101)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45:group-8EF0E05F95A7 changes to CANDIDATE, lastRpcTime:1048, electionTimeout:1048ms
2019-06-13 05:00:31,575 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: shutdown FollowerState
2019-06-13 05:00:31,575 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45:group-8EF0E05F95A7 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-13 05:00:31,575 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: start LeaderElection
2019-06-13 05:00:31,583 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45:group-8EF0E05F95A7:LeaderElection3: begin an election at term 1 for -1: [2cf79df7-2bc8-483f-ac86-3bd97ad33b45:127.0.0.1:34635], old=null
2019-06-13 05:00:31,584 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: shutdown LeaderElection
2019-06-13 05:00:31,584 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45:group-8EF0E05F95A7 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-13 05:00:31,584 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45:group-8EF0E05F95A7 change Leader from null to 2cf79df7-2bc8-483f-ac86-3bd97ad33b45 at term 1 for becomeLeader, leader elected after 1063ms
2019-06-13 05:00:31,584 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-13 05:00:31,585 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-13 05:00:31,585 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-13 05:00:31,585 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-13 05:00:31,585 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: start LeaderState
2019-06-13 05:00:31,586 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45-RaftLogWorker: Starting segment from index:0
2019-06-13 05:00:31,595 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45:group-8EF0E05F95A7 set configuration 0: [2cf79df7-2bc8-483f-ac86-3bd97ad33b45:127.0.0.1:34635], old=null at 0
2019-06-13 05:00:31,629 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleread22ed1-6b2e-49bc-a2b9-2d1d44f2b92c/ratis/205fabe8-a715-4f9d-98e1-8ef0e05f95a7/current/log_inprogress_0
2019-06-13 05:00:32,579 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 1376681459781387298 is closed with bcsId 0.
2019-06-13 05:00:32,579 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-13 05:00:32,580 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: close
2019-06-13 05:00:32,580 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: shutdown group-8EF0E05F95A7
2019-06-13 05:00:32,581 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-8EF0E05F95A7,id=2cf79df7-2bc8-483f-ac86-3bd97ad33b45
2019-06-13 05:00:32,581 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: shutdown LeaderState
2019-06-13 05:00:32,582 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45-PendingRequests: sendNotLeaderResponses
2019-06-13 05:00:32,583 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-2cf79df7-2bc8-483f-ac86-3bd97ad33b45-group-8EF0E05F95A7: set stopIndex = 2
2019-06-13 05:00:32,583 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-13 05:00:32,583 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleread22ed1-6b2e-49bc-a2b9-2d1d44f2b92c/ratis/205fabe8-a715-4f9d-98e1-8ef0e05f95a7/sm/snapshot.1_2
2019-06-13 05:00:32,583 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45:group-8EF0E05F95A7 closes. The last applied log index is 2
2019-06-13 05:00:32,584 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 05:00:32,585 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45-RaftLogWorker close()
2019-06-13 05:00:32,586 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: shutdown server with port 34635 now
2019-06-13 05:00:32,587 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 2cf79df7-2bc8-483f-ac86-3bd97ad33b45: shutdown server with port 34635 successfully
2019-06-13 05:00:32,607 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-13 05:00:32,630 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfe9814ba-db05-4aaf-9c0f-eb19dad2bed8/hdds of  storage type : DISK and capacity : 104021790720
2019-06-13 05:00:32,630 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfe9814ba-db05-4aaf-9c0f-eb19dad2bed8/hdds to VolumeSet
2019-06-13 05:00:32,630 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@66153688
2019-06-13 05:00:32,637 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@66153688
2019-06-13 05:00:32,648 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 34647
2019-06-13 05:00:32,648 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-13 05:00:32,649 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 05:00:32,649 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 34647 (custom)
2019-06-13 05:00:32,650 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 05:00:32,650 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 05:00:32,650 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 05:00:32,650 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 05:00:32,651 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfe9814ba-db05-4aaf-9c0f-eb19dad2bed8/ratis] (custom)
2019-06-13 05:00:32,651 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 45133
2019-06-13 05:00:32,652 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-13 05:00:32,652 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-13 05:00:32,652 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0 at port 34647
2019-06-13 05:00:32,657 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: start RPC server
2019-06-13 05:00:32,658 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: GrpcService started, listening on 0.0.0.0/0.0.0.0:34647
Jun 13, 2019 5:00:32 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:44219} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 13, 2019 5:00:32 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:34635} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-13 05:00:32,687 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: addNew group-DC4A7744830B:[9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:127.0.0.1:34647] returns group-DC4A7744830B:java.util.concurrent.CompletableFuture@9abcf32[Not completed]
2019-06-13 05:00:32,688 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: new RaftServerImpl for group-DC4A7744830B:[9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:127.0.0.1:34647] with ContainerStateMachine:uninitialized
2019-06-13 05:00:32,688 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 05:00:32,688 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 05:00:32,688 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 05:00:32,688 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 05:00:32,688 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:group-DC4A7744830B ConfigurationManager, init=-1: [9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:127.0.0.1:34647], old=null, confs=<EMPTY_MAP>
2019-06-13 05:00:32,689 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfe9814ba-db05-4aaf-9c0f-eb19dad2bed8/ratis] (custom)
2019-06-13 05:00:32,689 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfe9814ba-db05-4aaf-9c0f-eb19dad2bed8/ratis/7ca70dc4-9421-403a-a042-dc4a7744830b does not exist. Creating ...
2019-06-13 05:00:32,692 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfe9814ba-db05-4aaf-9c0f-eb19dad2bed8/ratis/7ca70dc4-9421-403a-a042-dc4a7744830b/in_use.lock acquired by nodename 4193@ozone-2qf2r-4254018156
2019-06-13 05:00:32,694 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfe9814ba-db05-4aaf-9c0f-eb19dad2bed8/ratis/7ca70dc4-9421-403a-a042-dc4a7744830b has been successfully formatted.
2019-06-13 05:00:32,694 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 05:00:32,694 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 05:00:32,694 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 05:00:32,694 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 05:00:32,694 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 05:00:32,694 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 05:00:32,694 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfe9814ba-db05-4aaf-9c0f-eb19dad2bed8/ratis/7ca70dc4-9421-403a-a042-dc4a7744830b
2019-06-13 05:00:32,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 05:00:32,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 05:00:32,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 05:00:32,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 05:00:32,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 05:00:32,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 05:00:32,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 05:00:32,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 05:00:32,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 05:00:32,696 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 05:00:32,696 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 05:00:32,696 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 05:00:32,696 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 05:00:32,697 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: start group-DC4A7744830B
2019-06-13 05:00:32,697 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:group-DC4A7744830B changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 05:00:32,697 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: start FollowerState
2019-06-13 05:00:32,698 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-DC4A7744830B,id=9a827c4b-9432-44d6-8b28-dee0d7d6dcf0
2019-06-13 05:00:33,711 INFO  impl.FollowerState (FollowerState.java:run(101)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:group-DC4A7744830B changes to CANDIDATE, lastRpcTime:1014, electionTimeout:1013ms
2019-06-13 05:00:33,711 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: shutdown FollowerState
2019-06-13 05:00:33,711 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:group-DC4A7744830B changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-13 05:00:33,711 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: start LeaderElection
2019-06-13 05:00:33,714 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:group-DC4A7744830B:LeaderElection4: begin an election at term 1 for -1: [9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:127.0.0.1:34647], old=null
2019-06-13 05:00:33,714 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: shutdown LeaderElection
2019-06-13 05:00:33,715 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:group-DC4A7744830B changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-13 05:00:33,715 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:group-DC4A7744830B change Leader from null to 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0 at term 1 for becomeLeader, leader elected after 1020ms
2019-06-13 05:00:33,715 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-13 05:00:33,715 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-13 05:00:33,715 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-13 05:00:33,715 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-13 05:00:33,716 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: start LeaderState
2019-06-13 05:00:33,716 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0-RaftLogWorker: Starting segment from index:0
2019-06-13 05:00:33,716 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:group-DC4A7744830B set configuration 0: [9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:127.0.0.1:34647], old=null at 0
2019-06-13 05:00:33,752 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfe9814ba-db05-4aaf-9c0f-eb19dad2bed8/ratis/7ca70dc4-9421-403a-a042-dc4a7744830b/current/log_inprogress_0
2019-06-13 05:00:34,739 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 6478063563244406352 is closed with bcsId 0.
2019-06-13 05:00:34,739 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-13 05:00:34,740 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: close
2019-06-13 05:00:34,740 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: shutdown group-DC4A7744830B
2019-06-13 05:00:34,740 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-DC4A7744830B,id=9a827c4b-9432-44d6-8b28-dee0d7d6dcf0
2019-06-13 05:00:34,740 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: shutdown LeaderState
2019-06-13 05:00:34,741 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0-PendingRequests: sendNotLeaderResponses
2019-06-13 05:00:34,742 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-9a827c4b-9432-44d6-8b28-dee0d7d6dcf0-group-DC4A7744830B: set stopIndex = 2
2019-06-13 05:00:34,742 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-13 05:00:34,742 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfe9814ba-db05-4aaf-9c0f-eb19dad2bed8/ratis/7ca70dc4-9421-403a-a042-dc4a7744830b/sm/snapshot.1_2
2019-06-13 05:00:34,742 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0:group-DC4A7744830B closes. The last applied log index is 2
2019-06-13 05:00:34,742 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 05:00:34,743 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0-RaftLogWorker close()
2019-06-13 05:00:34,744 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: shutdown server with port 34647 now
2019-06-13 05:00:34,745 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 9a827c4b-9432-44d6-8b28-dee0d7d6dcf0: shutdown server with port 34647 successfully
2019-06-13 05:00:34,749 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-13 05:00:34,771 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9280bea1-5894-457a-8838-90611c87c24a/hdds of  storage type : DISK and capacity : 104021790720
2019-06-13 05:00:34,771 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9280bea1-5894-457a-8838-90611c87c24a/hdds to VolumeSet
2019-06-13 05:00:34,771 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1ac45389
2019-06-13 05:00:34,778 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1ac45389
2019-06-13 05:00:34,800 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 40669
2019-06-13 05:00:34,801 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-13 05:00:34,802 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 05:00:34,802 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 40669 (custom)
2019-06-13 05:00:34,802 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 05:00:34,802 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 05:00:34,802 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 05:00:34,803 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 05:00:34,803 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9280bea1-5894-457a-8838-90611c87c24a/ratis] (custom)
2019-06-13 05:00:34,804 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 36989
2019-06-13 05:00:34,804 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-13 05:00:34,804 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-13 05:00:34,804 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 34cf62a1-49ff-4dcb-8860-ffa3127c74ff at port 40669
2019-06-13 05:00:34,834 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: start RPC server
2019-06-13 05:00:34,838 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: GrpcService started, listening on 0.0.0.0/0.0.0.0:40669
2019-06-13 05:00:34,852 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: addNew group-5D5901D0376D:[34cf62a1-49ff-4dcb-8860-ffa3127c74ff:127.0.0.1:40669] returns group-5D5901D0376D:java.util.concurrent.CompletableFuture@5df32781[Not completed]
2019-06-13 05:00:34,853 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: new RaftServerImpl for group-5D5901D0376D:[34cf62a1-49ff-4dcb-8860-ffa3127c74ff:127.0.0.1:40669] with ContainerStateMachine:uninitialized
2019-06-13 05:00:34,854 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 05:00:34,855 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 05:00:34,855 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 05:00:34,855 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 05:00:34,855 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff:group-5D5901D0376D ConfigurationManager, init=-1: [34cf62a1-49ff-4dcb-8860-ffa3127c74ff:127.0.0.1:40669], old=null, confs=<EMPTY_MAP>
2019-06-13 05:00:34,855 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9280bea1-5894-457a-8838-90611c87c24a/ratis] (custom)
2019-06-13 05:00:34,855 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9280bea1-5894-457a-8838-90611c87c24a/ratis/678630b8-d96e-41d6-955e-5d5901d0376d does not exist. Creating ...
2019-06-13 05:00:34,858 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9280bea1-5894-457a-8838-90611c87c24a/ratis/678630b8-d96e-41d6-955e-5d5901d0376d/in_use.lock acquired by nodename 4193@ozone-2qf2r-4254018156
2019-06-13 05:00:34,860 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9280bea1-5894-457a-8838-90611c87c24a/ratis/678630b8-d96e-41d6-955e-5d5901d0376d has been successfully formatted.
2019-06-13 05:00:34,861 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 05:00:34,861 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 05:00:34,861 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 05:00:34,861 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 05:00:34,862 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 05:00:34,862 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 05:00:34,862 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 34cf62a1-49ff-4dcb-8860-ffa3127c74ff-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9280bea1-5894-457a-8838-90611c87c24a/ratis/678630b8-d96e-41d6-955e-5d5901d0376d
2019-06-13 05:00:34,862 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 05:00:34,862 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 05:00:34,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 05:00:34,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 05:00:34,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 05:00:34,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 05:00:34,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 05:00:34,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 05:00:34,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 05:00:34,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 05:00:34,864 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 05:00:34,864 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 05:00:34,864 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 05:00:34,864 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: start group-5D5901D0376D
2019-06-13 05:00:34,864 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff:group-5D5901D0376D changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 05:00:34,865 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: start FollowerState
2019-06-13 05:00:34,867 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-5D5901D0376D,id=34cf62a1-49ff-4dcb-8860-ffa3127c74ff
2019-06-13 05:00:35,911 INFO  impl.FollowerState (FollowerState.java:run(101)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff:group-5D5901D0376D changes to CANDIDATE, lastRpcTime:1045, electionTimeout:1043ms
2019-06-13 05:00:35,911 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: shutdown FollowerState
2019-06-13 05:00:35,911 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff:group-5D5901D0376D changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-13 05:00:35,911 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: start LeaderElection
2019-06-13 05:00:35,915 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff:group-5D5901D0376D:LeaderElection5: begin an election at term 1 for -1: [34cf62a1-49ff-4dcb-8860-ffa3127c74ff:127.0.0.1:40669], old=null
2019-06-13 05:00:35,915 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: shutdown LeaderElection
2019-06-13 05:00:35,915 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff:group-5D5901D0376D changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-13 05:00:35,915 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff:group-5D5901D0376D change Leader from null to 34cf62a1-49ff-4dcb-8860-ffa3127c74ff at term 1 for becomeLeader, leader elected after 1054ms
2019-06-13 05:00:35,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-13 05:00:35,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-13 05:00:35,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-13 05:00:35,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-13 05:00:35,916 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: start LeaderState
2019-06-13 05:00:35,917 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff-RaftLogWorker: Starting segment from index:0
2019-06-13 05:00:35,922 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff:group-5D5901D0376D set configuration 0: [34cf62a1-49ff-4dcb-8860-ffa3127c74ff:127.0.0.1:40669], old=null at 0
2019-06-13 05:00:35,960 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9280bea1-5894-457a-8838-90611c87c24a/ratis/678630b8-d96e-41d6-955e-5d5901d0376d/current/log_inprogress_0
2019-06-13 05:00:36,909 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 5316369393430182792 is closed with bcsId 0.
2019-06-13 05:00:36,910 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-13 05:00:36,910 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: close
2019-06-13 05:00:36,911 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: shutdown group-5D5901D0376D
2019-06-13 05:00:36,911 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-5D5901D0376D,id=34cf62a1-49ff-4dcb-8860-ffa3127c74ff
2019-06-13 05:00:36,911 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: shutdown LeaderState
2019-06-13 05:00:36,911 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff-PendingRequests: sendNotLeaderResponses
2019-06-13 05:00:36,913 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-34cf62a1-49ff-4dcb-8860-ffa3127c74ff-group-5D5901D0376D: set stopIndex = 4
2019-06-13 05:00:36,913 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-13 05:00:36,913 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9280bea1-5894-457a-8838-90611c87c24a/ratis/678630b8-d96e-41d6-955e-5d5901d0376d/sm/snapshot.1_4
2019-06-13 05:00:36,913 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff:group-5D5901D0376D closes. The last applied log index is 4
2019-06-13 05:00:36,914 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 05:00:36,915 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff-RaftLogWorker close()
2019-06-13 05:00:36,915 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: shutdown server with port 40669 now
2019-06-13 05:00:36,916 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 34cf62a1-49ff-4dcb-8860-ffa3127c74ff: shutdown server with port 40669 successfully
2019-06-13 05:00:36,918 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
