2019-06-12 18:59:46,787 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-12 18:59:46,879 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-06-12 18:59:46,935 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-12 18:59:46,944 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 45513 (custom)
2019-06-12 18:59:46,945 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-12 18:59:46,947 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 18:59:46,947 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-12 18:59:46,948 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-12 18:59:46,987 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/a95415d0-0538-4968-8872-66e938db4f21] (custom)
2019-06-12 18:59:46,991 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis a95415d0-0538-4968-8872-66e938db4f21 at port 45513
2019-06-12 18:59:47,012 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - a95415d0-0538-4968-8872-66e938db4f21: start RPC server
2019-06-12 18:59:47,014 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - a95415d0-0538-4968-8872-66e938db4f21: GrpcService started, listening on 0.0.0.0/0.0.0.0:45513
2019-06-12 18:59:47,076 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - a95415d0-0538-4968-8872-66e938db4f21: addNew group-9804593DADE0:[a95415d0-0538-4968-8872-66e938db4f21:0.0.0.0:45513] returns group-9804593DADE0:java.util.concurrent.CompletableFuture@63fbf98a[Not completed]
2019-06-12 18:59:47,081 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - a95415d0-0538-4968-8872-66e938db4f21: new RaftServerImpl for group-9804593DADE0:[a95415d0-0538-4968-8872-66e938db4f21:0.0.0.0:45513] with ContainerStateMachine:uninitialized
2019-06-12 18:59:47,082 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-12 18:59:47,083 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-12 18:59:47,083 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-12 18:59:47,084 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-12 18:59:47,088 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - a95415d0-0538-4968-8872-66e938db4f21:group-9804593DADE0 ConfigurationManager, init=-1: [a95415d0-0538-4968-8872-66e938db4f21:0.0.0.0:45513], old=null, confs=<EMPTY_MAP>
2019-06-12 18:59:47,088 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/a95415d0-0538-4968-8872-66e938db4f21] (custom)
2019-06-12 18:59:47,093 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/a95415d0-0538-4968-8872-66e938db4f21/a01bb2c6-0b2c-48df-9f06-9804593dade0 does not exist. Creating ...
2019-06-12 18:59:47,101 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/a95415d0-0538-4968-8872-66e938db4f21/a01bb2c6-0b2c-48df-9f06-9804593dade0/in_use.lock acquired by nodename 29942@ozone-hw5hf-1599250011
2019-06-12 18:59:47,107 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/a95415d0-0538-4968-8872-66e938db4f21/a01bb2c6-0b2c-48df-9f06-9804593dade0 has been successfully formatted.
2019-06-12 18:59:47,109 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-12 18:59:47,109 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-12 18:59:47,111 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-12 18:59:47,112 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 18:59:47,115 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 18:59:47,118 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-12 18:59:47,120 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new a95415d0-0538-4968-8872-66e938db4f21-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/a95415d0-0538-4968-8872-66e938db4f21/a01bb2c6-0b2c-48df-9f06-9804593dade0
2019-06-12 18:59:47,120 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-12 18:59:47,120 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-12 18:59:47,122 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 18:59:47,122 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-12 18:59:47,123 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-12 18:59:47,123 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-12 18:59:47,124 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-12 18:59:47,124 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-12 18:59:47,124 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-12 18:59:47,126 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-12 18:59:47,131 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-12 18:59:47,132 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-12 18:59:47,132 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-12 18:59:47,145 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - a95415d0-0538-4968-8872-66e938db4f21: start group-9804593DADE0
2019-06-12 18:59:47,146 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a95415d0-0538-4968-8872-66e938db4f21:group-9804593DADE0 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-12 18:59:47,147 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a95415d0-0538-4968-8872-66e938db4f21: start FollowerState
2019-06-12 18:59:47,189 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-9804593DADE0,id=a95415d0-0538-4968-8872-66e938db4f21
2019-06-12 18:59:47,244 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-DB726964D985->a95415d0-0538-4968-8872-66e938db4f21: receive RaftClientReply:client-DB726964D985->a95415d0-0538-4968-8872-66e938db4f21@group-9804593DADE0, cid=1, FAILED org.apache.ratis.protocol.NotLeaderException: Server a95415d0-0538-4968-8872-66e938db4f21 is not the leader (null). Request must be sent to leader., logIndex=0, commits[a95415d0-0538-4968-8872-66e938db4f21:c-1]
2019-06-12 18:59:48,252 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-DB726964D985->a95415d0-0538-4968-8872-66e938db4f21: receive RaftClientReply:client-DB726964D985->a95415d0-0538-4968-8872-66e938db4f21@group-9804593DADE0, cid=1, FAILED org.apache.ratis.protocol.NotLeaderException: Server a95415d0-0538-4968-8872-66e938db4f21 is not the leader (null). Request must be sent to leader., logIndex=0, commits[a95415d0-0538-4968-8872-66e938db4f21:c-1]
2019-06-12 18:59:48,257 INFO  impl.FollowerState (FollowerState.java:run(101)) - a95415d0-0538-4968-8872-66e938db4f21:group-9804593DADE0 changes to CANDIDATE, lastRpcTime:1109, electionTimeout:1109ms
2019-06-12 18:59:48,257 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - a95415d0-0538-4968-8872-66e938db4f21: shutdown FollowerState
2019-06-12 18:59:48,257 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a95415d0-0538-4968-8872-66e938db4f21:group-9804593DADE0 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-12 18:59:48,258 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a95415d0-0538-4968-8872-66e938db4f21: start LeaderElection
2019-06-12 18:59:48,261 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - a95415d0-0538-4968-8872-66e938db4f21:group-9804593DADE0:LeaderElection1: begin an election at term 1 for -1: [a95415d0-0538-4968-8872-66e938db4f21:0.0.0.0:45513], old=null
2019-06-12 18:59:48,262 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - a95415d0-0538-4968-8872-66e938db4f21: shutdown LeaderElection
2019-06-12 18:59:48,262 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a95415d0-0538-4968-8872-66e938db4f21:group-9804593DADE0 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-12 18:59:48,262 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - a95415d0-0538-4968-8872-66e938db4f21:group-9804593DADE0 change Leader from null to a95415d0-0538-4968-8872-66e938db4f21 at term 1 for becomeLeader, leader elected after 1153ms
2019-06-12 18:59:48,266 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-12 18:59:48,266 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-12 18:59:48,267 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-12 18:59:48,268 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-12 18:59:48,274 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a95415d0-0538-4968-8872-66e938db4f21: start LeaderState
2019-06-12 18:59:48,286 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - a95415d0-0538-4968-8872-66e938db4f21-RaftLogWorker: Starting segment from index:0
2019-06-12 18:59:48,293 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - a95415d0-0538-4968-8872-66e938db4f21:group-9804593DADE0 set configuration 0: [a95415d0-0538-4968-8872-66e938db4f21:0.0.0.0:45513], old=null at 0
2019-06-12 18:59:48,414 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - a95415d0-0538-4968-8872-66e938db4f21-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/a95415d0-0538-4968-8872-66e938db4f21/a01bb2c6-0b2c-48df-9f06-9804593dade0/current/log_inprogress_0
2019-06-12 18:59:49,268 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-12 18:59:49,273 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-DB726964D985->a95415d0-0538-4968-8872-66e938db4f21: receive RaftClientReply:client-DB726964D985->a95415d0-0538-4968-8872-66e938db4f21@group-9804593DADE0, cid=1, SUCCESS, logIndex=1, commits[a95415d0-0538-4968-8872-66e938db4f21:c2]
2019-06-12 18:59:49,274 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-12 18:59:49,292 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-F837BC0C23C5->a95415d0-0538-4968-8872-66e938db4f21: receive RaftClientReply:client-F837BC0C23C5->a95415d0-0538-4968-8872-66e938db4f21@group-9804593DADE0, cid=2, SUCCESS, logIndex=3, commits[a95415d0-0538-4968-8872-66e938db4f21:c4]
2019-06-12 18:59:49,296 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - a95415d0-0538-4968-8872-66e938db4f21: close
2019-06-12 18:59:49,297 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - a95415d0-0538-4968-8872-66e938db4f21: shutdown group-9804593DADE0
2019-06-12 18:59:49,297 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-9804593DADE0,id=a95415d0-0538-4968-8872-66e938db4f21
2019-06-12 18:59:49,298 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - a95415d0-0538-4968-8872-66e938db4f21: shutdown LeaderState
2019-06-12 18:59:49,298 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - a95415d0-0538-4968-8872-66e938db4f21-PendingRequests: sendNotLeaderResponses
2019-06-12 18:59:49,302 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-a95415d0-0538-4968-8872-66e938db4f21-group-9804593DADE0: set stopIndex = 4
2019-06-12 18:59:49,302 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-12 18:59:49,303 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/a95415d0-0538-4968-8872-66e938db4f21/a01bb2c6-0b2c-48df-9f06-9804593dade0/sm/snapshot.1_4
2019-06-12 18:59:49,311 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - a95415d0-0538-4968-8872-66e938db4f21:group-9804593DADE0 closes. The last applied log index is 4
2019-06-12 18:59:49,312 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - a95415d0-0538-4968-8872-66e938db4f21-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-12 18:59:49,312 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - a95415d0-0538-4968-8872-66e938db4f21-RaftLogWorker close()
2019-06-12 18:59:49,313 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - a95415d0-0538-4968-8872-66e938db4f21: shutdown server with port 45513 now
2019-06-12 18:59:49,315 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - a95415d0-0538-4968-8872-66e938db4f21: shutdown server with port 45513 successfully
2019-06-12 18:59:49,343 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-06-12 18:59:49,350 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-12 18:59:49,350 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 44111 (custom)
2019-06-12 18:59:49,351 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-12 18:59:49,351 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 18:59:49,351 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-12 18:59:49,352 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-12 18:59:49,352 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/8f96c387-0b64-4e78-bd10-a2cf4046fb42] (custom)
2019-06-12 18:59:49,352 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 8f96c387-0b64-4e78-bd10-a2cf4046fb42 at port 44111
2019-06-12 18:59:49,367 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: start RPC server
2019-06-12 18:59:49,372 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: GrpcService started, listening on 0.0.0.0/0.0.0.0:44111
Jun 12, 2019 6:59:49 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=17, target=0.0.0.0:45513} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 12, 2019 6:59:49 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=9, target=0.0.0.0:41437} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connectToDatanode(XceiverClientGrpc.java:163)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connect(XceiverClientGrpc.java:120)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:227)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServer(TestSecureContainerServer.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-12 18:59:49,421 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: addNew group-69D70BC36218:[e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111] returns group-69D70BC36218:java.util.concurrent.CompletableFuture@53069b83[Not completed]
2019-06-12 18:59:49,422 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: new RaftServerImpl for group-69D70BC36218:[e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111] with ContainerStateMachine:uninitialized
2019-06-12 18:59:49,423 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-12 18:59:49,423 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-12 18:59:49,423 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-12 18:59:49,423 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-12 18:59:49,423 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42:group-69D70BC36218 ConfigurationManager, init=-1: [e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111], old=null, confs=<EMPTY_MAP>
2019-06-12 18:59:49,424 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/8f96c387-0b64-4e78-bd10-a2cf4046fb42] (custom)
2019-06-12 18:59:49,424 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/8f96c387-0b64-4e78-bd10-a2cf4046fb42/22613dd0-1136-48d2-b713-69d70bc36218 does not exist. Creating ...
2019-06-12 18:59:49,427 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/8f96c387-0b64-4e78-bd10-a2cf4046fb42/22613dd0-1136-48d2-b713-69d70bc36218/in_use.lock acquired by nodename 29942@ozone-hw5hf-1599250011
2019-06-12 18:59:49,430 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/8f96c387-0b64-4e78-bd10-a2cf4046fb42/22613dd0-1136-48d2-b713-69d70bc36218 has been successfully formatted.
2019-06-12 18:59:49,430 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-12 18:59:49,430 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-12 18:59:49,430 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-12 18:59:49,430 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 18:59:49,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 18:59:49,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-12 18:59:49,431 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 8f96c387-0b64-4e78-bd10-a2cf4046fb42-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/8f96c387-0b64-4e78-bd10-a2cf4046fb42/22613dd0-1136-48d2-b713-69d70bc36218
2019-06-12 18:59:49,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-12 18:59:49,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-12 18:59:49,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 18:59:49,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-12 18:59:49,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-12 18:59:49,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-12 18:59:49,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-12 18:59:49,432 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-12 18:59:49,432 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-12 18:59:49,433 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-12 18:59:49,437 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-12 18:59:49,437 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-12 18:59:49,437 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-12 18:59:49,438 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: start group-69D70BC36218
2019-06-12 18:59:49,438 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42:group-69D70BC36218 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-12 18:59:49,438 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: start FollowerState
2019-06-12 18:59:49,440 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-69D70BC36218,id=8f96c387-0b64-4e78-bd10-a2cf4046fb42
2019-06-12 18:59:49,443 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-12 18:59:49,444 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 33273 (custom)
2019-06-12 18:59:49,444 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-12 18:59:49,444 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 18:59:49,444 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-12 18:59:49,444 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-12 18:59:49,445 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/eec3d644-ef19-4fe8-a15d-34f7ffb3f055] (custom)
2019-06-12 18:59:49,445 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis eec3d644-ef19-4fe8-a15d-34f7ffb3f055 at port 33273
2019-06-12 18:59:49,451 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: start RPC server
2019-06-12 18:59:49,453 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: GrpcService started, listening on 0.0.0.0/0.0.0.0:33273
2019-06-12 18:59:49,480 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: addNew group-69D70BC36218:[e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111] returns group-69D70BC36218:java.util.concurrent.CompletableFuture@27d8fa9f[Not completed]
2019-06-12 18:59:49,481 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: new RaftServerImpl for group-69D70BC36218:[e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111] with ContainerStateMachine:uninitialized
2019-06-12 18:59:49,482 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-12 18:59:49,482 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-12 18:59:49,482 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-12 18:59:49,482 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-12 18:59:49,483 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055:group-69D70BC36218 ConfigurationManager, init=-1: [e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111], old=null, confs=<EMPTY_MAP>
2019-06-12 18:59:49,483 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/eec3d644-ef19-4fe8-a15d-34f7ffb3f055] (custom)
2019-06-12 18:59:49,483 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/eec3d644-ef19-4fe8-a15d-34f7ffb3f055/22613dd0-1136-48d2-b713-69d70bc36218 does not exist. Creating ...
2019-06-12 18:59:49,486 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/eec3d644-ef19-4fe8-a15d-34f7ffb3f055/22613dd0-1136-48d2-b713-69d70bc36218/in_use.lock acquired by nodename 29942@ozone-hw5hf-1599250011
2019-06-12 18:59:49,488 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/eec3d644-ef19-4fe8-a15d-34f7ffb3f055/22613dd0-1136-48d2-b713-69d70bc36218 has been successfully formatted.
2019-06-12 18:59:49,488 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-12 18:59:49,488 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-12 18:59:49,488 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-12 18:59:49,489 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 18:59:49,489 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 18:59:49,489 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-12 18:59:49,489 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new eec3d644-ef19-4fe8-a15d-34f7ffb3f055-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/eec3d644-ef19-4fe8-a15d-34f7ffb3f055/22613dd0-1136-48d2-b713-69d70bc36218
2019-06-12 18:59:49,489 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-12 18:59:49,490 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-12 18:59:49,490 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 18:59:49,490 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-12 18:59:49,490 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-12 18:59:49,490 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-12 18:59:49,490 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-12 18:59:49,491 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-12 18:59:49,491 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-12 18:59:49,491 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-12 18:59:49,491 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-12 18:59:49,492 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-12 18:59:49,492 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-12 18:59:49,492 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: start group-69D70BC36218
2019-06-12 18:59:49,492 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055:group-69D70BC36218 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-12 18:59:49,492 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: start FollowerState
2019-06-12 18:59:49,493 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-69D70BC36218,id=eec3d644-ef19-4fe8-a15d-34f7ffb3f055
2019-06-12 18:59:49,499 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-12 18:59:49,499 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 41337 (custom)
2019-06-12 18:59:49,499 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-12 18:59:49,500 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 18:59:49,500 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-12 18:59:49,500 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-12 18:59:49,501 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e983ab26-bdab-46de-8dfc-487501923cd5] (custom)
2019-06-12 18:59:49,501 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis e983ab26-bdab-46de-8dfc-487501923cd5 at port 41337
2019-06-12 18:59:49,511 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - e983ab26-bdab-46de-8dfc-487501923cd5: start RPC server
2019-06-12 18:59:49,512 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - e983ab26-bdab-46de-8dfc-487501923cd5: GrpcService started, listening on 0.0.0.0/0.0.0.0:41337
2019-06-12 18:59:49,531 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - e983ab26-bdab-46de-8dfc-487501923cd5: addNew group-69D70BC36218:[e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111] returns group-69D70BC36218:java.util.concurrent.CompletableFuture@563ea73d[Not completed]
2019-06-12 18:59:49,532 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - e983ab26-bdab-46de-8dfc-487501923cd5: new RaftServerImpl for group-69D70BC36218:[e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111] with ContainerStateMachine:uninitialized
2019-06-12 18:59:49,533 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-12 18:59:49,533 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-12 18:59:49,533 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-12 18:59:49,533 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-12 18:59:49,533 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - e983ab26-bdab-46de-8dfc-487501923cd5:group-69D70BC36218 ConfigurationManager, init=-1: [e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111], old=null, confs=<EMPTY_MAP>
2019-06-12 18:59:49,533 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e983ab26-bdab-46de-8dfc-487501923cd5] (custom)
2019-06-12 18:59:49,534 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e983ab26-bdab-46de-8dfc-487501923cd5/22613dd0-1136-48d2-b713-69d70bc36218 does not exist. Creating ...
2019-06-12 18:59:49,536 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e983ab26-bdab-46de-8dfc-487501923cd5/22613dd0-1136-48d2-b713-69d70bc36218/in_use.lock acquired by nodename 29942@ozone-hw5hf-1599250011
2019-06-12 18:59:49,538 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e983ab26-bdab-46de-8dfc-487501923cd5/22613dd0-1136-48d2-b713-69d70bc36218 has been successfully formatted.
2019-06-12 18:59:49,538 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-12 18:59:49,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-12 18:59:49,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-12 18:59:49,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 18:59:49,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 18:59:49,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-12 18:59:49,539 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new e983ab26-bdab-46de-8dfc-487501923cd5-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e983ab26-bdab-46de-8dfc-487501923cd5/22613dd0-1136-48d2-b713-69d70bc36218
2019-06-12 18:59:49,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-12 18:59:49,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-12 18:59:49,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 18:59:49,540 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-12 18:59:49,540 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-12 18:59:49,540 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-12 18:59:49,540 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-12 18:59:49,540 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-12 18:59:49,540 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-12 18:59:49,540 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-12 18:59:49,541 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-12 18:59:49,541 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-12 18:59:49,541 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-12 18:59:49,541 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - e983ab26-bdab-46de-8dfc-487501923cd5: start group-69D70BC36218
2019-06-12 18:59:49,541 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e983ab26-bdab-46de-8dfc-487501923cd5:group-69D70BC36218 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-12 18:59:49,541 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e983ab26-bdab-46de-8dfc-487501923cd5: start FollowerState
2019-06-12 18:59:49,542 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-69D70BC36218,id=e983ab26-bdab-46de-8dfc-487501923cd5
2019-06-12 18:59:49,557 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-1B75A0AD6DD9->8f96c387-0b64-4e78-bd10-a2cf4046fb42: receive RaftClientReply:client-1B75A0AD6DD9->8f96c387-0b64-4e78-bd10-a2cf4046fb42@group-69D70BC36218, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server 8f96c387-0b64-4e78-bd10-a2cf4046fb42 is not the leader (eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273). Request must be sent to leader., logIndex=0, commits[8f96c387-0b64-4e78-bd10-a2cf4046fb42:c-1]
2019-06-12 18:59:49,561 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-12 18:59:50,547 INFO  impl.FollowerState (FollowerState.java:run(101)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42:group-69D70BC36218 changes to CANDIDATE, lastRpcTime:1109, electionTimeout:1108ms
2019-06-12 18:59:50,548 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: shutdown FollowerState
2019-06-12 18:59:50,548 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42:group-69D70BC36218 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-12 18:59:50,548 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: start LeaderElection
2019-06-12 18:59:50,553 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42:group-69D70BC36218:LeaderElection2: begin an election at term 1 for -1: [e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111], old=null
2019-06-12 18:59:50,559 INFO  impl.FollowerState (FollowerState.java:run(101)) - e983ab26-bdab-46de-8dfc-487501923cd5:group-69D70BC36218 changes to CANDIDATE, lastRpcTime:1017, electionTimeout:1017ms
2019-06-12 18:59:50,562 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - e983ab26-bdab-46de-8dfc-487501923cd5: shutdown FollowerState
2019-06-12 18:59:50,562 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e983ab26-bdab-46de-8dfc-487501923cd5:group-69D70BC36218 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-12 18:59:50,562 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e983ab26-bdab-46de-8dfc-487501923cd5: start LeaderElection
2019-06-12 18:59:50,576 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - e983ab26-bdab-46de-8dfc-487501923cd5:group-69D70BC36218:LeaderElection3: begin an election at term 1 for -1: [e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111], old=null
2019-06-12 18:59:50,596 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055:group-69D70BC36218 changes role from FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:8f96c387-0b64-4e78-bd10-a2cf4046fb42
2019-06-12 18:59:50,596 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: shutdown FollowerState
2019-06-12 18:59:50,596 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: start FollowerState
2019-06-12 18:59:50,596 INFO  impl.FollowerState (FollowerState.java:run(109)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-12 18:59:50,626 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-1B75A0AD6DD9->e983ab26-bdab-46de-8dfc-487501923cd5: receive RaftClientReply:client-1B75A0AD6DD9->e983ab26-bdab-46de-8dfc-487501923cd5@group-69D70BC36218, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server e983ab26-bdab-46de-8dfc-487501923cd5 is not the leader (8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111). Request must be sent to leader., logIndex=0, commits[e983ab26-bdab-46de-8dfc-487501923cd5:c-1]
2019-06-12 18:59:50,653 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-12 18:59:50,659 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42:group-69D70BC36218:LeaderElection2: Election PASSED; received 2 response(s) [8f96c387-0b64-4e78-bd10-a2cf4046fb42->e983ab26-bdab-46de-8dfc-487501923cd5,false-t1, 8f96c387-0b64-4e78-bd10-a2cf4046fb42->eec3d644-ef19-4fe8-a15d-34f7ffb3f055,true-t1] and 0 exception(s); 8f96c387-0b64-4e78-bd10-a2cf4046fb42:t1, leader=null, voted=8f96c387-0b64-4e78-bd10-a2cf4046fb42, raftlog=8f96c387-0b64-4e78-bd10-a2cf4046fb42-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111], old=null
2019-06-12 18:59:50,660 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: shutdown LeaderElection
2019-06-12 18:59:50,661 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42:group-69D70BC36218 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-12 18:59:50,661 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42:group-69D70BC36218 change Leader from null to 8f96c387-0b64-4e78-bd10-a2cf4046fb42 at term 1 for becomeLeader, leader elected after 1230ms
2019-06-12 18:59:50,661 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-12 18:59:50,661 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-12 18:59:50,661 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-12 18:59:50,661 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-12 18:59:50,663 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-06-12 18:59:50,664 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 18:59:50,664 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-06-12 18:59:50,674 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-06-12 18:59:50,674 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-12 18:59:50,674 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-12 18:59:50,674 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-06-12 18:59:50,674 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 18:59:50,674 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-06-12 18:59:50,675 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-06-12 18:59:50,675 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-12 18:59:50,675 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-12 18:59:50,675 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: start LeaderState
2019-06-12 18:59:50,675 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42-RaftLogWorker: Starting segment from index:0
2019-06-12 18:59:50,697 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42:group-69D70BC36218 set configuration 0: [e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111], old=null at 0
2019-06-12 18:59:50,697 INFO  impl.RaftServerImpl (RaftServerImpl.java:requestVote(738)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42-LEADER: Withhold vote from candidate e983ab26-bdab-46de-8dfc-487501923cd5 with term 1. State: leader=8f96c387-0b64-4e78-bd10-a2cf4046fb42, term=1, lastRpcElapsed=null
2019-06-12 18:59:50,797 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/8f96c387-0b64-4e78-bd10-a2cf4046fb42/22613dd0-1136-48d2-b713-69d70bc36218/current/log_inprogress_0
2019-06-12 18:59:50,810 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - e983ab26-bdab-46de-8dfc-487501923cd5:group-69D70BC36218:LeaderElection3: Election REJECTED; received 2 response(s) [e983ab26-bdab-46de-8dfc-487501923cd5->eec3d644-ef19-4fe8-a15d-34f7ffb3f055,false-t1, e983ab26-bdab-46de-8dfc-487501923cd5->8f96c387-0b64-4e78-bd10-a2cf4046fb42,false-t1] and 0 exception(s); e983ab26-bdab-46de-8dfc-487501923cd5:t1, leader=null, voted=e983ab26-bdab-46de-8dfc-487501923cd5, raftlog=e983ab26-bdab-46de-8dfc-487501923cd5-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111], old=null
2019-06-12 18:59:50,810 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e983ab26-bdab-46de-8dfc-487501923cd5:group-69D70BC36218 changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM
2019-06-12 18:59:50,810 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - e983ab26-bdab-46de-8dfc-487501923cd5: shutdown LeaderElection
2019-06-12 18:59:50,810 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e983ab26-bdab-46de-8dfc-487501923cd5: start FollowerState
2019-06-12 18:59:50,811 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - e983ab26-bdab-46de-8dfc-487501923cd5:group-69D70BC36218 change Leader from null to 8f96c387-0b64-4e78-bd10-a2cf4046fb42 at term 1 for appendEntries, leader elected after 1272ms
2019-06-12 18:59:50,813 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055:group-69D70BC36218 change Leader from null to 8f96c387-0b64-4e78-bd10-a2cf4046fb42 at term 1 for appendEntries, leader elected after 1324ms
2019-06-12 18:59:50,832 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055:group-69D70BC36218 set configuration 0: [e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111], old=null at 0
2019-06-12 18:59:50,832 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055-RaftLogWorker: Starting segment from index:0
2019-06-12 18:59:50,833 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - e983ab26-bdab-46de-8dfc-487501923cd5:group-69D70BC36218 set configuration 0: [e983ab26-bdab-46de-8dfc-487501923cd5:0.0.0.0:41337, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:0.0.0.0:33273, 8f96c387-0b64-4e78-bd10-a2cf4046fb42:0.0.0.0:44111], old=null at 0
2019-06-12 18:59:50,833 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - e983ab26-bdab-46de-8dfc-487501923cd5-RaftLogWorker: Starting segment from index:0
2019-06-12 18:59:50,873 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/eec3d644-ef19-4fe8-a15d-34f7ffb3f055/22613dd0-1136-48d2-b713-69d70bc36218/current/log_inprogress_0
2019-06-12 18:59:50,889 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - e983ab26-bdab-46de-8dfc-487501923cd5-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e983ab26-bdab-46de-8dfc-487501923cd5/22613dd0-1136-48d2-b713-69d70bc36218/current/log_inprogress_0
Jun 12, 2019 6:59:51 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=43, target=0.0.0.0:33273} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 12, 2019 6:59:51 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=51, target=0.0.0.0:41337} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 12, 2019 6:59:51 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=35, target=0.0.0.0:44111} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-12 18:59:51,651 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-12 18:59:51,663 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-12 18:59:51,664 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-12 18:59:51,665 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-1B75A0AD6DD9->8f96c387-0b64-4e78-bd10-a2cf4046fb42: receive RaftClientReply:client-1B75A0AD6DD9->8f96c387-0b64-4e78-bd10-a2cf4046fb42@group-69D70BC36218, cid=6, SUCCESS, logIndex=1, commits[8f96c387-0b64-4e78-bd10-a2cf4046fb42:c1, e983ab26-bdab-46de-8dfc-487501923cd5:c0, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:c0]
2019-06-12 18:59:51,666 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-12 18:59:51,687 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-603A950D119C->8f96c387-0b64-4e78-bd10-a2cf4046fb42: receive RaftClientReply:client-603A950D119C->8f96c387-0b64-4e78-bd10-a2cf4046fb42@group-69D70BC36218, cid=7, SUCCESS, logIndex=3, commits[8f96c387-0b64-4e78-bd10-a2cf4046fb42:c3, e983ab26-bdab-46de-8dfc-487501923cd5:c2, eec3d644-ef19-4fe8-a15d-34f7ffb3f055:c2]
2019-06-12 18:59:51,689 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: close
2019-06-12 18:59:51,689 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: shutdown group-69D70BC36218
2019-06-12 18:59:51,690 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-69D70BC36218,id=8f96c387-0b64-4e78-bd10-a2cf4046fb42
2019-06-12 18:59:51,690 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: shutdown LeaderState
2019-06-12 18:59:51,691 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42-PendingRequests: sendNotLeaderResponses
2019-06-12 18:59:51,691 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(142)) - GrpcLogAppender(8f96c387-0b64-4e78-bd10-a2cf4046fb42 -> eec3d644-ef19-4fe8-a15d-34f7ffb3f055): Wait interrupted by java.lang.InterruptedException
2019-06-12 18:59:51,691 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(142)) - GrpcLogAppender(8f96c387-0b64-4e78-bd10-a2cf4046fb42 -> e983ab26-bdab-46de-8dfc-487501923cd5): Wait interrupted by java.lang.InterruptedException
2019-06-12 18:59:51,692 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(104)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: appendEntries completed
2019-06-12 18:59:51,693 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(104)) - e983ab26-bdab-46de-8dfc-487501923cd5: appendEntries completed
2019-06-12 18:59:51,694 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(277)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: follower 8f96c387-0b64-4e78-bd10-a2cf4046fb42->e983ab26-bdab-46de-8dfc-487501923cd5(c3,m4,n5, attendVote=true, lastRpcSendTime=15, lastRpcResponseTime=11) response Completed
2019-06-12 18:59:51,694 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42->e983ab26-bdab-46de-8dfc-487501923cd5: nextIndex: updateUnconditionally 5 -> 0
2019-06-12 18:59:51,694 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(277)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: follower 8f96c387-0b64-4e78-bd10-a2cf4046fb42->eec3d644-ef19-4fe8-a15d-34f7ffb3f055(c3,m4,n5, attendVote=true, lastRpcSendTime=16, lastRpcResponseTime=11) response Completed
2019-06-12 18:59:51,695 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42->eec3d644-ef19-4fe8-a15d-34f7ffb3f055: nextIndex: updateUnconditionally 5 -> 0
2019-06-12 18:59:51,701 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-8f96c387-0b64-4e78-bd10-a2cf4046fb42-group-69D70BC36218: set stopIndex = 4
2019-06-12 18:59:51,701 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-12 18:59:51,702 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/8f96c387-0b64-4e78-bd10-a2cf4046fb42/22613dd0-1136-48d2-b713-69d70bc36218/sm/snapshot.1_3
2019-06-12 18:59:51,702 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42:group-69D70BC36218 closes. The last applied log index is 4
2019-06-12 18:59:51,703 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-12 18:59:51,703 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42-RaftLogWorker close()
2019-06-12 18:59:51,703 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: shutdown server with port 44111 now
2019-06-12 18:59:51,704 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 8f96c387-0b64-4e78-bd10-a2cf4046fb42: shutdown server with port 44111 successfully
2019-06-12 18:59:51,706 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: close
2019-06-12 18:59:51,706 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: shutdown group-69D70BC36218
2019-06-12 18:59:51,707 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-69D70BC36218,id=eec3d644-ef19-4fe8-a15d-34f7ffb3f055
2019-06-12 18:59:51,707 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: shutdown FollowerState
2019-06-12 18:59:51,707 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-12 18:59:51,707 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/eec3d644-ef19-4fe8-a15d-34f7ffb3f055/22613dd0-1136-48d2-b713-69d70bc36218/sm/snapshot.1_3
2019-06-12 18:59:51,708 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-eec3d644-ef19-4fe8-a15d-34f7ffb3f055-group-69D70BC36218: set stopIndex = 3
2019-06-12 18:59:51,709 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055:group-69D70BC36218 closes. The last applied log index is 3
2019-06-12 18:59:51,708 INFO  impl.FollowerState (FollowerState.java:run(109)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-12 18:59:51,710 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-12 18:59:51,711 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055-RaftLogWorker close()
2019-06-12 18:59:51,711 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: shutdown server with port 33273 now
2019-06-12 18:59:51,711 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - eec3d644-ef19-4fe8-a15d-34f7ffb3f055: shutdown server with port 33273 successfully
2019-06-12 18:59:51,714 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - e983ab26-bdab-46de-8dfc-487501923cd5: close
2019-06-12 18:59:51,714 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - e983ab26-bdab-46de-8dfc-487501923cd5: shutdown group-69D70BC36218
2019-06-12 18:59:51,714 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-69D70BC36218,id=e983ab26-bdab-46de-8dfc-487501923cd5
2019-06-12 18:59:51,714 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - e983ab26-bdab-46de-8dfc-487501923cd5: shutdown FollowerState
2019-06-12 18:59:51,716 INFO  impl.FollowerState (FollowerState.java:run(109)) - e983ab26-bdab-46de-8dfc-487501923cd5: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-12 18:59:51,716 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-12 18:59:51,716 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/e983ab26-bdab-46de-8dfc-487501923cd5/22613dd0-1136-48d2-b713-69d70bc36218/sm/snapshot.1_3
2019-06-12 18:59:51,717 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-e983ab26-bdab-46de-8dfc-487501923cd5-group-69D70BC36218: set stopIndex = 3
2019-06-12 18:59:51,717 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - e983ab26-bdab-46de-8dfc-487501923cd5:group-69D70BC36218 closes. The last applied log index is 3
2019-06-12 18:59:51,717 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - e983ab26-bdab-46de-8dfc-487501923cd5-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-12 18:59:51,718 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - e983ab26-bdab-46de-8dfc-487501923cd5-RaftLogWorker close()
2019-06-12 18:59:51,718 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - e983ab26-bdab-46de-8dfc-487501923cd5: shutdown server with port 41337 now
2019-06-12 18:59:51,720 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - e983ab26-bdab-46de-8dfc-487501923cd5: shutdown server with port 41337 successfully
