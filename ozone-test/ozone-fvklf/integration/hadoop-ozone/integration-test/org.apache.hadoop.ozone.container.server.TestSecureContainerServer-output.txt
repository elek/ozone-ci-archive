2019-06-13 14:54:08,489 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-13 14:54:08,596 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-06-13 14:54:08,651 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 14:54:08,660 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 44441 (custom)
2019-06-13 14:54:08,661 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 14:54:08,663 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 14:54:08,664 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 14:54:08,664 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 14:54:08,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/da1a6613-de68-4478-ad60-2520ab476434] (custom)
2019-06-13 14:54:08,714 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis da1a6613-de68-4478-ad60-2520ab476434 at port 44441
2019-06-13 14:54:08,735 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - da1a6613-de68-4478-ad60-2520ab476434: start RPC server
2019-06-13 14:54:08,737 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - da1a6613-de68-4478-ad60-2520ab476434: GrpcService started, listening on 0.0.0.0/0.0.0.0:44441
2019-06-13 14:54:08,812 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - da1a6613-de68-4478-ad60-2520ab476434: addNew group-9A3E4C2FB267:[da1a6613-de68-4478-ad60-2520ab476434:0.0.0.0:44441] returns group-9A3E4C2FB267:java.util.concurrent.CompletableFuture@7b64c73d[Not completed]
2019-06-13 14:54:08,820 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - da1a6613-de68-4478-ad60-2520ab476434: new RaftServerImpl for group-9A3E4C2FB267:[da1a6613-de68-4478-ad60-2520ab476434:0.0.0.0:44441] with ContainerStateMachine:uninitialized
2019-06-13 14:54:08,821 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 14:54:08,821 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 14:54:08,822 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 14:54:08,822 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 14:54:08,827 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - da1a6613-de68-4478-ad60-2520ab476434:group-9A3E4C2FB267 ConfigurationManager, init=-1: [da1a6613-de68-4478-ad60-2520ab476434:0.0.0.0:44441], old=null, confs=<EMPTY_MAP>
2019-06-13 14:54:08,827 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/da1a6613-de68-4478-ad60-2520ab476434] (custom)
2019-06-13 14:54:08,832 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/da1a6613-de68-4478-ad60-2520ab476434/740be227-c23e-4912-bf9f-9a3e4c2fb267 does not exist. Creating ...
2019-06-13 14:54:08,840 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/da1a6613-de68-4478-ad60-2520ab476434/740be227-c23e-4912-bf9f-9a3e4c2fb267/in_use.lock acquired by nodename 28113@ozone-fvklf-62293414
2019-06-13 14:54:08,846 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/da1a6613-de68-4478-ad60-2520ab476434/740be227-c23e-4912-bf9f-9a3e4c2fb267 has been successfully formatted.
2019-06-13 14:54:08,848 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 14:54:08,849 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 14:54:08,850 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 14:54:08,853 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 14:54:08,855 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 14:54:08,858 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 14:54:08,860 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new da1a6613-de68-4478-ad60-2520ab476434-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/da1a6613-de68-4478-ad60-2520ab476434/740be227-c23e-4912-bf9f-9a3e4c2fb267
2019-06-13 14:54:08,861 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 14:54:08,861 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 14:54:08,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 14:54:08,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 14:54:08,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 14:54:08,864 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 14:54:08,865 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 14:54:08,865 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 14:54:08,865 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 14:54:08,867 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 14:54:08,871 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 14:54:08,872 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 14:54:08,872 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 14:54:08,885 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - da1a6613-de68-4478-ad60-2520ab476434: start group-9A3E4C2FB267
2019-06-13 14:54:08,886 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - da1a6613-de68-4478-ad60-2520ab476434:group-9A3E4C2FB267 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 14:54:08,887 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - da1a6613-de68-4478-ad60-2520ab476434: start FollowerState
2019-06-13 14:54:08,928 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-9A3E4C2FB267,id=da1a6613-de68-4478-ad60-2520ab476434
2019-06-13 14:54:08,984 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-4C97A5B23562->da1a6613-de68-4478-ad60-2520ab476434: receive RaftClientReply:client-4C97A5B23562->da1a6613-de68-4478-ad60-2520ab476434@group-9A3E4C2FB267, cid=1, FAILED org.apache.ratis.protocol.NotLeaderException: Server da1a6613-de68-4478-ad60-2520ab476434 is not the leader (null). Request must be sent to leader., logIndex=0, commits[da1a6613-de68-4478-ad60-2520ab476434:c-1]
2019-06-13 14:54:09,962 INFO  impl.FollowerState (FollowerState.java:run(101)) - da1a6613-de68-4478-ad60-2520ab476434:group-9A3E4C2FB267 changes to CANDIDATE, lastRpcTime:1075, electionTimeout:1075ms
2019-06-13 14:54:09,963 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - da1a6613-de68-4478-ad60-2520ab476434: shutdown FollowerState
2019-06-13 14:54:09,963 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - da1a6613-de68-4478-ad60-2520ab476434:group-9A3E4C2FB267 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-13 14:54:09,964 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - da1a6613-de68-4478-ad60-2520ab476434: start LeaderElection
2019-06-13 14:54:09,968 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - da1a6613-de68-4478-ad60-2520ab476434:group-9A3E4C2FB267:LeaderElection1: begin an election at term 1 for -1: [da1a6613-de68-4478-ad60-2520ab476434:0.0.0.0:44441], old=null
2019-06-13 14:54:09,968 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - da1a6613-de68-4478-ad60-2520ab476434: shutdown LeaderElection
2019-06-13 14:54:09,969 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - da1a6613-de68-4478-ad60-2520ab476434:group-9A3E4C2FB267 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-13 14:54:09,969 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - da1a6613-de68-4478-ad60-2520ab476434:group-9A3E4C2FB267 change Leader from null to da1a6613-de68-4478-ad60-2520ab476434 at term 1 for becomeLeader, leader elected after 1120ms
2019-06-13 14:54:09,972 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-13 14:54:09,973 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-13 14:54:09,975 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-13 14:54:09,975 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-13 14:54:09,981 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - da1a6613-de68-4478-ad60-2520ab476434: start LeaderState
2019-06-13 14:54:09,994 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - da1a6613-de68-4478-ad60-2520ab476434-RaftLogWorker: Starting segment from index:0
2019-06-13 14:54:10,006 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - da1a6613-de68-4478-ad60-2520ab476434:group-9A3E4C2FB267 set configuration 0: [da1a6613-de68-4478-ad60-2520ab476434:0.0.0.0:44441], old=null at 0
2019-06-13 14:54:10,129 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - da1a6613-de68-4478-ad60-2520ab476434-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/da1a6613-de68-4478-ad60-2520ab476434/740be227-c23e-4912-bf9f-9a3e4c2fb267/current/log_inprogress_0
2019-06-13 14:54:11,039 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-13 14:54:11,043 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-4C97A5B23562->da1a6613-de68-4478-ad60-2520ab476434: receive RaftClientReply:client-4C97A5B23562->da1a6613-de68-4478-ad60-2520ab476434@group-9A3E4C2FB267, cid=1, SUCCESS, logIndex=1, commits[da1a6613-de68-4478-ad60-2520ab476434:c2]
2019-06-13 14:54:11,044 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-13 14:54:11,062 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-FFEAC430DC9F->da1a6613-de68-4478-ad60-2520ab476434: receive RaftClientReply:client-FFEAC430DC9F->da1a6613-de68-4478-ad60-2520ab476434@group-9A3E4C2FB267, cid=2, SUCCESS, logIndex=3, commits[da1a6613-de68-4478-ad60-2520ab476434:c4]
2019-06-13 14:54:11,066 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - da1a6613-de68-4478-ad60-2520ab476434: close
2019-06-13 14:54:11,067 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - da1a6613-de68-4478-ad60-2520ab476434: shutdown group-9A3E4C2FB267
2019-06-13 14:54:11,068 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-9A3E4C2FB267,id=da1a6613-de68-4478-ad60-2520ab476434
2019-06-13 14:54:11,068 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - da1a6613-de68-4478-ad60-2520ab476434: shutdown LeaderState
2019-06-13 14:54:11,068 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-13 14:54:11,068 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - da1a6613-de68-4478-ad60-2520ab476434-PendingRequests: sendNotLeaderResponses
2019-06-13 14:54:11,071 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-da1a6613-de68-4478-ad60-2520ab476434-group-9A3E4C2FB267: set stopIndex = 4
2019-06-13 14:54:11,071 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-13 14:54:11,074 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/da1a6613-de68-4478-ad60-2520ab476434/740be227-c23e-4912-bf9f-9a3e4c2fb267/sm/snapshot.1_4
2019-06-13 14:54:11,079 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - da1a6613-de68-4478-ad60-2520ab476434:group-9A3E4C2FB267 closes. The last applied log index is 4
2019-06-13 14:54:11,080 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - da1a6613-de68-4478-ad60-2520ab476434-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 14:54:11,081 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - da1a6613-de68-4478-ad60-2520ab476434-RaftLogWorker close()
2019-06-13 14:54:11,158 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - da1a6613-de68-4478-ad60-2520ab476434: shutdown server with port 44441 now
2019-06-13 14:54:11,161 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - da1a6613-de68-4478-ad60-2520ab476434: shutdown server with port 44441 successfully
2019-06-13 14:54:11,169 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-06-13 14:54:11,170 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 14:54:11,171 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 33237 (custom)
2019-06-13 14:54:11,171 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 14:54:11,172 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 14:54:11,172 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 14:54:11,172 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 14:54:11,173 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/69a0e87f-3b7b-4982-ae62-c688c60f71e9] (custom)
2019-06-13 14:54:11,173 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 69a0e87f-3b7b-4982-ae62-c688c60f71e9 at port 33237
2019-06-13 14:54:11,190 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: start RPC server
2019-06-13 14:54:11,192 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: GrpcService started, listening on 0.0.0.0/0.0.0.0:33237
Jun 13, 2019 2:54:11 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=9, target=0.0.0.0:45729} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connectToDatanode(XceiverClientGrpc.java:163)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connect(XceiverClientGrpc.java:120)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:227)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServer(TestSecureContainerServer.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 13, 2019 2:54:11 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=17, target=0.0.0.0:44441} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-13 14:54:11,216 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: addNew group-CD6C39542E66:[69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337] returns group-CD6C39542E66:java.util.concurrent.CompletableFuture@4dee8e94[Not completed]
2019-06-13 14:54:11,217 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: new RaftServerImpl for group-CD6C39542E66:[69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337] with ContainerStateMachine:uninitialized
2019-06-13 14:54:11,217 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 14:54:11,217 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 14:54:11,218 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 14:54:11,218 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 14:54:11,218 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9:group-CD6C39542E66 ConfigurationManager, init=-1: [69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337], old=null, confs=<EMPTY_MAP>
2019-06-13 14:54:11,218 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/69a0e87f-3b7b-4982-ae62-c688c60f71e9] (custom)
2019-06-13 14:54:11,218 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/69a0e87f-3b7b-4982-ae62-c688c60f71e9/c039957b-72c7-42e4-9054-cd6c39542e66 does not exist. Creating ...
2019-06-13 14:54:11,221 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/69a0e87f-3b7b-4982-ae62-c688c60f71e9/c039957b-72c7-42e4-9054-cd6c39542e66/in_use.lock acquired by nodename 28113@ozone-fvklf-62293414
2019-06-13 14:54:11,223 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/69a0e87f-3b7b-4982-ae62-c688c60f71e9/c039957b-72c7-42e4-9054-cd6c39542e66 has been successfully formatted.
2019-06-13 14:54:11,224 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 14:54:11,224 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 14:54:11,224 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 14:54:11,224 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 14:54:11,224 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 14:54:11,224 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 14:54:11,224 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 69a0e87f-3b7b-4982-ae62-c688c60f71e9-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/69a0e87f-3b7b-4982-ae62-c688c60f71e9/c039957b-72c7-42e4-9054-cd6c39542e66
2019-06-13 14:54:11,224 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 14:54:11,225 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 14:54:11,225 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 14:54:11,225 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 14:54:11,225 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 14:54:11,225 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 14:54:11,225 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 14:54:11,225 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 14:54:11,226 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 14:54:11,226 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 14:54:11,226 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 14:54:11,226 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 14:54:11,227 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 14:54:11,227 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: start group-CD6C39542E66
2019-06-13 14:54:11,227 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9:group-CD6C39542E66 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 14:54:11,227 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: start FollowerState
2019-06-13 14:54:11,228 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-CD6C39542E66,id=69a0e87f-3b7b-4982-ae62-c688c60f71e9
2019-06-13 14:54:11,233 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 14:54:11,233 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 46711 (custom)
2019-06-13 14:54:11,233 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 14:54:11,234 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 14:54:11,234 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 14:54:11,234 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 14:54:11,234 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc] (custom)
2019-06-13 14:54:11,235 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc at port 46711
2019-06-13 14:54:11,242 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: start RPC server
2019-06-13 14:54:11,244 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: GrpcService started, listening on 0.0.0.0/0.0.0.0:46711
2019-06-13 14:54:11,269 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: addNew group-CD6C39542E66:[69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337] returns group-CD6C39542E66:java.util.concurrent.CompletableFuture@43783783[Not completed]
2019-06-13 14:54:11,270 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: new RaftServerImpl for group-CD6C39542E66:[69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337] with ContainerStateMachine:uninitialized
2019-06-13 14:54:11,271 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 14:54:11,271 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 14:54:11,271 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 14:54:11,271 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 14:54:11,271 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:group-CD6C39542E66 ConfigurationManager, init=-1: [69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337], old=null, confs=<EMPTY_MAP>
2019-06-13 14:54:11,271 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc] (custom)
2019-06-13 14:54:11,272 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc/c039957b-72c7-42e4-9054-cd6c39542e66 does not exist. Creating ...
2019-06-13 14:54:11,274 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc/c039957b-72c7-42e4-9054-cd6c39542e66/in_use.lock acquired by nodename 28113@ozone-fvklf-62293414
2019-06-13 14:54:11,276 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc/c039957b-72c7-42e4-9054-cd6c39542e66 has been successfully formatted.
2019-06-13 14:54:11,276 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 14:54:11,277 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 14:54:11,277 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 14:54:11,277 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 14:54:11,277 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 14:54:11,277 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 14:54:11,277 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc/c039957b-72c7-42e4-9054-cd6c39542e66
2019-06-13 14:54:11,277 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 14:54:11,278 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 14:54:11,278 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 14:54:11,278 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 14:54:11,278 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 14:54:11,278 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 14:54:11,278 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 14:54:11,278 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 14:54:11,279 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 14:54:11,279 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 14:54:11,279 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 14:54:11,279 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 14:54:11,279 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 14:54:11,279 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: start group-CD6C39542E66
2019-06-13 14:54:11,280 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:group-CD6C39542E66 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 14:54:11,280 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: start FollowerState
2019-06-13 14:54:11,280 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-CD6C39542E66,id=aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc
2019-06-13 14:54:11,284 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-13 14:54:11,284 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 33337 (custom)
2019-06-13 14:54:11,285 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-13 14:54:11,285 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 14:54:11,285 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-13 14:54:11,285 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 14:54:11,286 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/ce10000b-8cc5-4275-b90b-b9fdaf7499ac] (custom)
2019-06-13 14:54:11,286 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis ce10000b-8cc5-4275-b90b-b9fdaf7499ac at port 33337
2019-06-13 14:54:11,292 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: start RPC server
2019-06-13 14:54:11,294 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: GrpcService started, listening on 0.0.0.0/0.0.0.0:33337
2019-06-13 14:54:11,316 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: addNew group-CD6C39542E66:[69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337] returns group-CD6C39542E66:java.util.concurrent.CompletableFuture@39640abd[Not completed]
2019-06-13 14:54:11,317 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: new RaftServerImpl for group-CD6C39542E66:[69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337] with ContainerStateMachine:uninitialized
2019-06-13 14:54:11,317 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-13 14:54:11,318 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-13 14:54:11,318 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-13 14:54:11,318 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 14:54:11,318 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac:group-CD6C39542E66 ConfigurationManager, init=-1: [69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337], old=null, confs=<EMPTY_MAP>
2019-06-13 14:54:11,318 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/ce10000b-8cc5-4275-b90b-b9fdaf7499ac] (custom)
2019-06-13 14:54:11,319 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/ce10000b-8cc5-4275-b90b-b9fdaf7499ac/c039957b-72c7-42e4-9054-cd6c39542e66 does not exist. Creating ...
2019-06-13 14:54:11,321 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/ce10000b-8cc5-4275-b90b-b9fdaf7499ac/c039957b-72c7-42e4-9054-cd6c39542e66/in_use.lock acquired by nodename 28113@ozone-fvklf-62293414
2019-06-13 14:54:11,324 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/ce10000b-8cc5-4275-b90b-b9fdaf7499ac/c039957b-72c7-42e4-9054-cd6c39542e66 has been successfully formatted.
2019-06-13 14:54:11,324 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-13 14:54:11,324 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-13 14:54:11,324 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-13 14:54:11,324 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 14:54:11,324 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 14:54:11,324 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-13 14:54:11,325 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new ce10000b-8cc5-4275-b90b-b9fdaf7499ac-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/ce10000b-8cc5-4275-b90b-b9fdaf7499ac/c039957b-72c7-42e4-9054-cd6c39542e66
2019-06-13 14:54:11,325 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-13 14:54:11,325 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-13 14:54:11,325 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-13 14:54:11,325 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-13 14:54:11,325 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-13 14:54:11,325 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-13 14:54:11,326 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-13 14:54:11,326 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-13 14:54:11,326 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-13 14:54:11,326 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-13 14:54:11,327 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-13 14:54:11,327 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-13 14:54:11,328 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-13 14:54:11,328 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: start group-CD6C39542E66
2019-06-13 14:54:11,328 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac:group-CD6C39542E66 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-13 14:54:11,328 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: start FollowerState
2019-06-13 14:54:11,328 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-CD6C39542E66,id=ce10000b-8cc5-4275-b90b-b9fdaf7499ac
2019-06-13 14:54:11,341 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-798CA138D707->69a0e87f-3b7b-4982-ae62-c688c60f71e9: receive RaftClientReply:client-798CA138D707->69a0e87f-3b7b-4982-ae62-c688c60f71e9@group-CD6C39542E66, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server 69a0e87f-3b7b-4982-ae62-c688c60f71e9 is not the leader (ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337). Request must be sent to leader., logIndex=0, commits[69a0e87f-3b7b-4982-ae62-c688c60f71e9:c-1]
2019-06-13 14:54:11,344 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-13 14:54:12,327 INFO  impl.FollowerState (FollowerState.java:run(101)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9:group-CD6C39542E66 changes to CANDIDATE, lastRpcTime:1100, electionTimeout:1100ms
2019-06-13 14:54:12,328 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: shutdown FollowerState
2019-06-13 14:54:12,328 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9:group-CD6C39542E66 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-13 14:54:12,328 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: start LeaderElection
2019-06-13 14:54:12,332 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9:group-CD6C39542E66:LeaderElection2: begin an election at term 1 for -1: [69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337], old=null
2019-06-13 14:54:12,353 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac:group-CD6C39542E66 changes role from FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:69a0e87f-3b7b-4982-ae62-c688c60f71e9
2019-06-13 14:54:12,353 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: shutdown FollowerState
2019-06-13 14:54:12,354 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:group-CD6C39542E66 changes role from FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:69a0e87f-3b7b-4982-ae62-c688c60f71e9
2019-06-13 14:54:12,354 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: start FollowerState
2019-06-13 14:54:12,354 INFO  impl.FollowerState (FollowerState.java:run(109)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-13 14:54:12,354 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: shutdown FollowerState
2019-06-13 14:54:12,355 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: start FollowerState
2019-06-13 14:54:12,355 INFO  impl.FollowerState (FollowerState.java:run(109)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-13 14:54:12,361 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-798CA138D707->aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: receive RaftClientReply:client-798CA138D707->aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc@group-CD6C39542E66, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc is not the leader (69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237). Request must be sent to leader., logIndex=0, commits[aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:c-1]
2019-06-13 14:54:12,364 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-13 14:54:12,369 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9:group-CD6C39542E66:LeaderElection2: Election PASSED; received 1 response(s) [69a0e87f-3b7b-4982-ae62-c688c60f71e9->ce10000b-8cc5-4275-b90b-b9fdaf7499ac,true-t1] and 0 exception(s); 69a0e87f-3b7b-4982-ae62-c688c60f71e9:t1, leader=null, voted=69a0e87f-3b7b-4982-ae62-c688c60f71e9, raftlog=69a0e87f-3b7b-4982-ae62-c688c60f71e9-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337], old=null
2019-06-13 14:54:12,369 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: shutdown LeaderElection
2019-06-13 14:54:12,370 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9:group-CD6C39542E66 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-13 14:54:12,370 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9:group-CD6C39542E66 change Leader from null to 69a0e87f-3b7b-4982-ae62-c688c60f71e9 at term 1 for becomeLeader, leader elected after 1145ms
2019-06-13 14:54:12,370 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-13 14:54:12,370 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-13 14:54:12,370 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-13 14:54:12,370 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-13 14:54:12,372 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-06-13 14:54:12,372 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 14:54:12,372 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-06-13 14:54:12,373 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-06-13 14:54:12,373 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 14:54:12,373 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 14:54:12,374 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-06-13 14:54:12,374 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-13 14:54:12,374 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-06-13 14:54:12,374 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-06-13 14:54:12,374 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-13 14:54:12,374 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-13 14:54:12,374 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: start LeaderState
2019-06-13 14:54:12,375 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9-RaftLogWorker: Starting segment from index:0
2019-06-13 14:54:12,392 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9:group-CD6C39542E66 set configuration 0: [69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337], old=null at 0
2019-06-13 14:54:12,411 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/69a0e87f-3b7b-4982-ae62-c688c60f71e9/c039957b-72c7-42e4-9054-cd6c39542e66/current/log_inprogress_0
2019-06-13 14:54:12,420 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:group-CD6C39542E66 change Leader from null to 69a0e87f-3b7b-4982-ae62-c688c60f71e9 at term 1 for appendEntries, leader elected after 1143ms
2019-06-13 14:54:12,420 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac:group-CD6C39542E66 change Leader from null to 69a0e87f-3b7b-4982-ae62-c688c60f71e9 at term 1 for appendEntries, leader elected after 1095ms
2019-06-13 14:54:12,439 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:group-CD6C39542E66 set configuration 0: [69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337], old=null at 0
2019-06-13 14:54:12,439 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac:group-CD6C39542E66 set configuration 0: [69a0e87f-3b7b-4982-ae62-c688c60f71e9:0.0.0.0:33237, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:0.0.0.0:46711, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:0.0.0.0:33337], old=null at 0
2019-06-13 14:54:12,439 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc-RaftLogWorker: Starting segment from index:0
2019-06-13 14:54:12,440 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac-RaftLogWorker: Starting segment from index:0
2019-06-13 14:54:12,482 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/ce10000b-8cc5-4275-b90b-b9fdaf7499ac/c039957b-72c7-42e4-9054-cd6c39542e66/current/log_inprogress_0
2019-06-13 14:54:12,491 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc/c039957b-72c7-42e4-9054-cd6c39542e66/current/log_inprogress_0
2019-06-13 14:54:13,379 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-13 14:54:13,382 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-798CA138D707->69a0e87f-3b7b-4982-ae62-c688c60f71e9: receive RaftClientReply:client-798CA138D707->69a0e87f-3b7b-4982-ae62-c688c60f71e9@group-CD6C39542E66, cid=6, SUCCESS, logIndex=1, commits[69a0e87f-3b7b-4982-ae62-c688c60f71e9:c1, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:c0, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:c0]
2019-06-13 14:54:13,383 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-13 14:54:13,383 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-13 14:54:13,391 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-13 14:54:13,408 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-20E55928335D->69a0e87f-3b7b-4982-ae62-c688c60f71e9: receive RaftClientReply:client-20E55928335D->69a0e87f-3b7b-4982-ae62-c688c60f71e9@group-CD6C39542E66, cid=7, SUCCESS, logIndex=3, commits[69a0e87f-3b7b-4982-ae62-c688c60f71e9:c3, aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:c2, ce10000b-8cc5-4275-b90b-b9fdaf7499ac:c2]
2019-06-13 14:54:13,411 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: close
2019-06-13 14:54:13,411 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: shutdown group-CD6C39542E66
2019-06-13 14:54:13,412 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-CD6C39542E66,id=69a0e87f-3b7b-4982-ae62-c688c60f71e9
2019-06-13 14:54:13,412 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: shutdown LeaderState
2019-06-13 14:54:13,412 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9-PendingRequests: sendNotLeaderResponses
2019-06-13 14:54:13,412 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(142)) - GrpcLogAppender(69a0e87f-3b7b-4982-ae62-c688c60f71e9 -> ce10000b-8cc5-4275-b90b-b9fdaf7499ac): Wait interrupted by java.lang.InterruptedException
2019-06-13 14:54:13,412 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(142)) - GrpcLogAppender(69a0e87f-3b7b-4982-ae62-c688c60f71e9 -> aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc): Wait interrupted by java.lang.InterruptedException
2019-06-13 14:54:13,415 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(104)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: appendEntries completed
2019-06-13 14:54:13,415 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(104)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: appendEntries completed
2019-06-13 14:54:13,416 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(277)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: follower 69a0e87f-3b7b-4982-ae62-c688c60f71e9->ce10000b-8cc5-4275-b90b-b9fdaf7499ac(c3,m4,n5, attendVote=true, lastRpcSendTime=18, lastRpcResponseTime=11) response Completed
2019-06-13 14:54:13,417 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-69a0e87f-3b7b-4982-ae62-c688c60f71e9-group-CD6C39542E66: set stopIndex = 4
2019-06-13 14:54:13,417 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-13 14:54:13,417 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/69a0e87f-3b7b-4982-ae62-c688c60f71e9/c039957b-72c7-42e4-9054-cd6c39542e66/sm/snapshot.1_3
2019-06-13 14:54:13,422 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(277)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: follower 69a0e87f-3b7b-4982-ae62-c688c60f71e9->aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc(c3,m4,n5, attendVote=true, lastRpcSendTime=23, lastRpcResponseTime=13) response Completed
2019-06-13 14:54:13,422 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9:group-CD6C39542E66 closes. The last applied log index is 4
2019-06-13 14:54:13,423 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 14:54:13,425 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9-RaftLogWorker close()
2019-06-13 14:54:13,426 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9->aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: nextIndex: updateUnconditionally 5 -> -1
2019-06-13 14:54:13,428 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: shutdown server with port 33237 now
2019-06-13 14:54:13,426 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9->ce10000b-8cc5-4275-b90b-b9fdaf7499ac: nextIndex: updateUnconditionally 5 -> -1
2019-06-13 14:54:13,430 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 69a0e87f-3b7b-4982-ae62-c688c60f71e9: shutdown server with port 33237 successfully
2019-06-13 14:54:13,433 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: close
2019-06-13 14:54:13,434 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: shutdown group-CD6C39542E66
2019-06-13 14:54:13,434 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-CD6C39542E66,id=aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc
2019-06-13 14:54:13,434 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: shutdown FollowerState
2019-06-13 14:54:13,434 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc-group-CD6C39542E66: set stopIndex = 3
2019-06-13 14:54:13,434 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-13 14:54:13,436 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc/c039957b-72c7-42e4-9054-cd6c39542e66/sm/snapshot.1_3
2019-06-13 14:54:13,436 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc:group-CD6C39542E66 closes. The last applied log index is 3
2019-06-13 14:54:13,436 INFO  impl.FollowerState (FollowerState.java:run(109)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-13 14:54:13,436 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 14:54:13,437 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc-RaftLogWorker close()
2019-06-13 14:54:13,438 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: shutdown server with port 46711 now
2019-06-13 14:54:13,439 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - aaf3eb03-2a65-4ad0-8f16-e83f6e493ffc: shutdown server with port 46711 successfully
2019-06-13 14:54:13,441 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: close
2019-06-13 14:54:13,441 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: shutdown group-CD6C39542E66
2019-06-13 14:54:13,442 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-CD6C39542E66,id=ce10000b-8cc5-4275-b90b-b9fdaf7499ac
2019-06-13 14:54:13,442 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: shutdown FollowerState
2019-06-13 14:54:13,442 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-ce10000b-8cc5-4275-b90b-b9fdaf7499ac-group-CD6C39542E66: set stopIndex = 3
2019-06-13 14:54:13,442 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-13 14:54:13,444 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/ce10000b-8cc5-4275-b90b-b9fdaf7499ac/c039957b-72c7-42e4-9054-cd6c39542e66/sm/snapshot.1_3
2019-06-13 14:54:13,457 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac:group-CD6C39542E66 closes. The last applied log index is 3
2019-06-13 14:54:13,461 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-13 14:54:13,444 INFO  impl.FollowerState (FollowerState.java:run(109)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-13 14:54:13,468 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac-RaftLogWorker close()
2019-06-13 14:54:13,472 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: shutdown server with port 33337 now
2019-06-13 14:54:13,475 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - ce10000b-8cc5-4275-b90b-b9fdaf7499ac: shutdown server with port 33337 successfully
