2019-06-12 13:14:23,440 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1cd09264-6245-40af-a047-474f2f30fd71/hdds of  storage type : DISK and capacity : 104021790720
2019-06-12 13:14:23,444 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1cd09264-6245-40af-a047-474f2f30fd71/hdds to VolumeSet
2019-06-12 13:14:23,455 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
2019-06-12 13:14:23,483 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-06-12 13:14:23,824 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 45161
2019-06-12 13:14:24,213 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-12 13:14:24,240 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-12 13:14:24,251 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 45161 (custom)
2019-06-12 13:14:24,252 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-12 13:14:24,254 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 13:14:24,255 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-12 13:14:24,256 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-12 13:14:24,400 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1cd09264-6245-40af-a047-474f2f30fd71/ratis] (custom)
2019-06-12 13:14:24,410 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 44291
2019-06-12 13:14:24,429 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-12 13:14:24,430 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-12 13:14:24,431 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis a4cb5cbd-ec95-48ff-9cf8-eef17c106f98 at port 45161
2019-06-12 13:14:24,447 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: start RPC server
2019-06-12 13:14:24,564 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: GrpcService started, listening on 0.0.0.0/0.0.0.0:45161
2019-06-12 13:14:24,840 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: addNew group-9F0FD72533CD:[a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:127.0.0.1:45161] returns group-9F0FD72533CD:java.util.concurrent.CompletableFuture@3fc33b87[Not completed]
2019-06-12 13:14:24,864 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: new RaftServerImpl for group-9F0FD72533CD:[a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:127.0.0.1:45161] with ContainerStateMachine:uninitialized
2019-06-12 13:14:24,865 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-12 13:14:24,865 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-12 13:14:24,866 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-12 13:14:24,866 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-12 13:14:24,871 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:group-9F0FD72533CD ConfigurationManager, init=-1: [a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:127.0.0.1:45161], old=null, confs=<EMPTY_MAP>
2019-06-12 13:14:24,871 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1cd09264-6245-40af-a047-474f2f30fd71/ratis] (custom)
2019-06-12 13:14:24,876 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1cd09264-6245-40af-a047-474f2f30fd71/ratis/5a2b42bc-9eb5-4497-894d-9f0fd72533cd does not exist. Creating ...
2019-06-12 13:14:24,883 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1cd09264-6245-40af-a047-474f2f30fd71/ratis/5a2b42bc-9eb5-4497-894d-9f0fd72533cd/in_use.lock acquired by nodename 4184@ozone-x7bbm-294198099
2019-06-12 13:14:24,890 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1cd09264-6245-40af-a047-474f2f30fd71/ratis/5a2b42bc-9eb5-4497-894d-9f0fd72533cd has been successfully formatted.
2019-06-12 13:14:24,892 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-12 13:14:24,892 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-12 13:14:24,893 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-12 13:14:24,895 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 13:14:24,898 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 13:14:24,901 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-12 13:14:24,903 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new a4cb5cbd-ec95-48ff-9cf8-eef17c106f98-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1cd09264-6245-40af-a047-474f2f30fd71/ratis/5a2b42bc-9eb5-4497-894d-9f0fd72533cd
2019-06-12 13:14:24,904 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-12 13:14:24,904 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-12 13:14:24,906 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 13:14:24,907 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-12 13:14:24,907 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-12 13:14:24,908 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-12 13:14:24,908 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-12 13:14:24,909 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-12 13:14:24,909 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-12 13:14:24,911 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-12 13:14:24,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-12 13:14:24,917 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-12 13:14:24,917 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-12 13:14:25,018 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: start group-9F0FD72533CD
2019-06-12 13:14:25,019 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:group-9F0FD72533CD changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-12 13:14:25,020 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: start FollowerState
2019-06-12 13:14:25,022 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-9F0FD72533CD,id=a4cb5cbd-ec95-48ff-9cf8-eef17c106f98
2019-06-12 13:14:26,072 INFO  impl.FollowerState (FollowerState.java:run(101)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:group-9F0FD72533CD changes to CANDIDATE, lastRpcTime:1053, electionTimeout:1052ms
2019-06-12 13:14:26,073 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: shutdown FollowerState
2019-06-12 13:14:26,073 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:group-9F0FD72533CD changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-12 13:14:26,074 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: start LeaderElection
2019-06-12 13:14:26,078 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:group-9F0FD72533CD:LeaderElection1: begin an election at term 1 for -1: [a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:127.0.0.1:45161], old=null
2019-06-12 13:14:26,079 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: shutdown LeaderElection
2019-06-12 13:14:26,079 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:group-9F0FD72533CD changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-12 13:14:26,079 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:group-9F0FD72533CD change Leader from null to a4cb5cbd-ec95-48ff-9cf8-eef17c106f98 at term 1 for becomeLeader, leader elected after 1187ms
2019-06-12 13:14:26,083 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-12 13:14:26,083 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-12 13:14:26,084 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-12 13:14:26,085 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-12 13:14:26,091 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: start LeaderState
2019-06-12 13:14:26,102 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98-RaftLogWorker: Starting segment from index:0
2019-06-12 13:14:26,108 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:group-9F0FD72533CD set configuration 0: [a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:127.0.0.1:45161], old=null at 0
2019-06-12 13:14:26,227 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1cd09264-6245-40af-a047-474f2f30fd71/ratis/5a2b42bc-9eb5-4497-894d-9f0fd72533cd/current/log_inprogress_0
2019-06-12 13:14:27,226 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-06-12 13:14:27,276 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 8037995463213848301 is closed with bcsId 0.
2019-06-12 13:14:27,277 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-12 13:14:27,278 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: close
2019-06-12 13:14:27,279 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: shutdown group-9F0FD72533CD
2019-06-12 13:14:27,279 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-9F0FD72533CD,id=a4cb5cbd-ec95-48ff-9cf8-eef17c106f98
2019-06-12 13:14:27,279 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: shutdown LeaderState
2019-06-12 13:14:27,280 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98-PendingRequests: sendNotLeaderResponses
2019-06-12 13:14:27,282 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-a4cb5cbd-ec95-48ff-9cf8-eef17c106f98-group-9F0FD72533CD: set stopIndex = 4
2019-06-12 13:14:27,282 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-12 13:14:27,282 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1cd09264-6245-40af-a047-474f2f30fd71/ratis/5a2b42bc-9eb5-4497-894d-9f0fd72533cd/sm/snapshot.1_4
2019-06-12 13:14:27,290 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98:group-9F0FD72533CD closes. The last applied log index is 4
2019-06-12 13:14:27,291 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-12 13:14:27,291 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98-RaftLogWorker close()
2019-06-12 13:14:27,292 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: shutdown server with port 45161 now
2019-06-12 13:14:27,295 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - a4cb5cbd-ec95-48ff-9cf8-eef17c106f98: shutdown server with port 45161 successfully
2019-06-12 13:14:27,302 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-12 13:14:27,332 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler5941d4f0-39cb-4ad8-868b-33f5cc81a75d/hdds of  storage type : DISK and capacity : 104021790720
2019-06-12 13:14:27,333 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler5941d4f0-39cb-4ad8-868b-33f5cc81a75d/hdds to VolumeSet
2019-06-12 13:14:27,333 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@655523dd
2019-06-12 13:14:27,334 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@655523dd
2019-06-12 13:14:27,346 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 43805
2019-06-12 13:14:27,347 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-12 13:14:27,347 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-12 13:14:27,348 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 43805 (custom)
2019-06-12 13:14:27,348 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-12 13:14:27,348 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 13:14:27,348 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-12 13:14:27,348 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-12 13:14:27,349 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler5941d4f0-39cb-4ad8-868b-33f5cc81a75d/ratis] (custom)
2019-06-12 13:14:27,350 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 44121
2019-06-12 13:14:27,350 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-12 13:14:27,350 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-12 13:14:27,351 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 04e825dd-6877-475c-940b-5b52414e0288 at port 43805
2019-06-12 13:14:27,372 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 04e825dd-6877-475c-940b-5b52414e0288: start RPC server
2019-06-12 13:14:27,373 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 04e825dd-6877-475c-940b-5b52414e0288: GrpcService started, listening on 0.0.0.0/0.0.0.0:43805
2019-06-12 13:14:27,382 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 04e825dd-6877-475c-940b-5b52414e0288: addNew group-D2D49413E615:[04e825dd-6877-475c-940b-5b52414e0288:127.0.0.1:43805] returns group-D2D49413E615:java.util.concurrent.CompletableFuture@6cc9a80d[Not completed]
2019-06-12 13:14:27,383 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 04e825dd-6877-475c-940b-5b52414e0288: new RaftServerImpl for group-D2D49413E615:[04e825dd-6877-475c-940b-5b52414e0288:127.0.0.1:43805] with ContainerStateMachine:uninitialized
2019-06-12 13:14:27,383 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-12 13:14:27,383 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-12 13:14:27,383 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-12 13:14:27,383 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-12 13:14:27,383 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 04e825dd-6877-475c-940b-5b52414e0288:group-D2D49413E615 ConfigurationManager, init=-1: [04e825dd-6877-475c-940b-5b52414e0288:127.0.0.1:43805], old=null, confs=<EMPTY_MAP>
2019-06-12 13:14:27,383 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler5941d4f0-39cb-4ad8-868b-33f5cc81a75d/ratis] (custom)
2019-06-12 13:14:27,384 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler5941d4f0-39cb-4ad8-868b-33f5cc81a75d/ratis/f1aa7f4f-08a5-444d-a1c6-d2d49413e615 does not exist. Creating ...
2019-06-12 13:14:27,386 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler5941d4f0-39cb-4ad8-868b-33f5cc81a75d/ratis/f1aa7f4f-08a5-444d-a1c6-d2d49413e615/in_use.lock acquired by nodename 4184@ozone-x7bbm-294198099
2019-06-12 13:14:27,388 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler5941d4f0-39cb-4ad8-868b-33f5cc81a75d/ratis/f1aa7f4f-08a5-444d-a1c6-d2d49413e615 has been successfully formatted.
2019-06-12 13:14:27,389 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-12 13:14:27,389 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-12 13:14:27,389 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-12 13:14:27,389 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 13:14:27,389 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 13:14:27,389 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-12 13:14:27,389 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 04e825dd-6877-475c-940b-5b52414e0288-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler5941d4f0-39cb-4ad8-868b-33f5cc81a75d/ratis/f1aa7f4f-08a5-444d-a1c6-d2d49413e615
2019-06-12 13:14:27,389 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-12 13:14:27,390 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-12 13:14:27,390 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 13:14:27,390 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-12 13:14:27,390 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-12 13:14:27,390 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-12 13:14:27,390 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-12 13:14:27,391 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-12 13:14:27,391 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-12 13:14:27,391 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-12 13:14:27,394 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-12 13:14:27,394 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-12 13:14:27,394 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-12 13:14:27,395 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 04e825dd-6877-475c-940b-5b52414e0288: start group-D2D49413E615
2019-06-12 13:14:27,395 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 04e825dd-6877-475c-940b-5b52414e0288:group-D2D49413E615 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-12 13:14:27,395 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 04e825dd-6877-475c-940b-5b52414e0288: start FollowerState
2019-06-12 13:14:27,398 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-D2D49413E615,id=04e825dd-6877-475c-940b-5b52414e0288
2019-06-12 13:14:28,579 INFO  impl.FollowerState (FollowerState.java:run(101)) - 04e825dd-6877-475c-940b-5b52414e0288:group-D2D49413E615 changes to CANDIDATE, lastRpcTime:1184, electionTimeout:1181ms
2019-06-12 13:14:28,579 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 04e825dd-6877-475c-940b-5b52414e0288: shutdown FollowerState
2019-06-12 13:14:28,580 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 04e825dd-6877-475c-940b-5b52414e0288:group-D2D49413E615 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-12 13:14:28,580 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 04e825dd-6877-475c-940b-5b52414e0288: start LeaderElection
2019-06-12 13:14:28,582 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 04e825dd-6877-475c-940b-5b52414e0288:group-D2D49413E615:LeaderElection2: begin an election at term 1 for -1: [04e825dd-6877-475c-940b-5b52414e0288:127.0.0.1:43805], old=null
2019-06-12 13:14:28,583 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 04e825dd-6877-475c-940b-5b52414e0288: shutdown LeaderElection
2019-06-12 13:14:28,583 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 04e825dd-6877-475c-940b-5b52414e0288:group-D2D49413E615 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-12 13:14:28,583 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 04e825dd-6877-475c-940b-5b52414e0288:group-D2D49413E615 change Leader from null to 04e825dd-6877-475c-940b-5b52414e0288 at term 1 for becomeLeader, leader elected after 1194ms
2019-06-12 13:14:28,583 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-12 13:14:28,583 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-12 13:14:28,583 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-12 13:14:28,583 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-12 13:14:28,584 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 04e825dd-6877-475c-940b-5b52414e0288: start LeaderState
2019-06-12 13:14:28,584 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 04e825dd-6877-475c-940b-5b52414e0288-RaftLogWorker: Starting segment from index:0
2019-06-12 13:14:28,589 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 04e825dd-6877-475c-940b-5b52414e0288:group-D2D49413E615 set configuration 0: [04e825dd-6877-475c-940b-5b52414e0288:127.0.0.1:43805], old=null at 0
2019-06-12 13:14:28,619 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 04e825dd-6877-475c-940b-5b52414e0288-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler5941d4f0-39cb-4ad8-868b-33f5cc81a75d/ratis/f1aa7f4f-08a5-444d-a1c6-d2d49413e615/current/log_inprogress_0
2019-06-12 13:14:29,429 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-12 13:14:29,430 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 04e825dd-6877-475c-940b-5b52414e0288: close
2019-06-12 13:14:29,430 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 04e825dd-6877-475c-940b-5b52414e0288: shutdown group-D2D49413E615
2019-06-12 13:14:29,430 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-D2D49413E615,id=04e825dd-6877-475c-940b-5b52414e0288
2019-06-12 13:14:29,431 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 04e825dd-6877-475c-940b-5b52414e0288: shutdown LeaderState
2019-06-12 13:14:29,431 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 04e825dd-6877-475c-940b-5b52414e0288-PendingRequests: sendNotLeaderResponses
2019-06-12 13:14:29,432 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-04e825dd-6877-475c-940b-5b52414e0288-group-D2D49413E615: set stopIndex = 2
2019-06-12 13:14:29,432 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-12 13:14:29,432 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler5941d4f0-39cb-4ad8-868b-33f5cc81a75d/ratis/f1aa7f4f-08a5-444d-a1c6-d2d49413e615/sm/snapshot.1_2
2019-06-12 13:14:29,432 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 04e825dd-6877-475c-940b-5b52414e0288:group-D2D49413E615 closes. The last applied log index is 2
2019-06-12 13:14:29,433 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 04e825dd-6877-475c-940b-5b52414e0288-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-12 13:14:29,433 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 04e825dd-6877-475c-940b-5b52414e0288-RaftLogWorker close()
2019-06-12 13:14:29,434 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 04e825dd-6877-475c-940b-5b52414e0288: shutdown server with port 43805 now
2019-06-12 13:14:29,435 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 04e825dd-6877-475c-940b-5b52414e0288: shutdown server with port 43805 successfully
2019-06-12 13:14:29,442 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-12 13:14:29,459 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd4b66923-6510-45ad-a089-310af845836b/hdds of  storage type : DISK and capacity : 104021790720
2019-06-12 13:14:29,460 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd4b66923-6510-45ad-a089-310af845836b/hdds to VolumeSet
2019-06-12 13:14:29,460 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1bd0b0e5
2019-06-12 13:14:29,460 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1bd0b0e5
2019-06-12 13:14:29,468 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 46673
2019-06-12 13:14:29,469 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-12 13:14:29,470 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-12 13:14:29,470 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 46673 (custom)
2019-06-12 13:14:29,470 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-12 13:14:29,470 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 13:14:29,470 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-12 13:14:29,470 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-12 13:14:29,471 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd4b66923-6510-45ad-a089-310af845836b/ratis] (custom)
2019-06-12 13:14:29,471 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 45125
2019-06-12 13:14:29,471 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-12 13:14:29,471 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-12 13:14:29,472 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 41d01d51-8d4c-4552-bb57-74bffe2996d2 at port 46673
2019-06-12 13:14:29,487 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: start RPC server
2019-06-12 13:14:29,489 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: GrpcService started, listening on 0.0.0.0/0.0.0.0:46673
2019-06-12 13:14:29,497 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: addNew group-459771C46BA5:[41d01d51-8d4c-4552-bb57-74bffe2996d2:127.0.0.1:46673] returns group-459771C46BA5:java.util.concurrent.CompletableFuture@20e72520[Not completed]
2019-06-12 13:14:29,497 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: new RaftServerImpl for group-459771C46BA5:[41d01d51-8d4c-4552-bb57-74bffe2996d2:127.0.0.1:46673] with ContainerStateMachine:uninitialized
2019-06-12 13:14:29,498 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-12 13:14:29,498 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-12 13:14:29,498 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-12 13:14:29,498 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-12 13:14:29,498 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2:group-459771C46BA5 ConfigurationManager, init=-1: [41d01d51-8d4c-4552-bb57-74bffe2996d2:127.0.0.1:46673], old=null, confs=<EMPTY_MAP>
2019-06-12 13:14:29,498 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd4b66923-6510-45ad-a089-310af845836b/ratis] (custom)
2019-06-12 13:14:29,498 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd4b66923-6510-45ad-a089-310af845836b/ratis/fd76fa60-7a1f-4370-b0e3-459771c46ba5 does not exist. Creating ...
2019-06-12 13:14:29,501 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd4b66923-6510-45ad-a089-310af845836b/ratis/fd76fa60-7a1f-4370-b0e3-459771c46ba5/in_use.lock acquired by nodename 4184@ozone-x7bbm-294198099
2019-06-12 13:14:29,503 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd4b66923-6510-45ad-a089-310af845836b/ratis/fd76fa60-7a1f-4370-b0e3-459771c46ba5 has been successfully formatted.
2019-06-12 13:14:29,503 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-12 13:14:29,503 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-12 13:14:29,503 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-12 13:14:29,503 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 13:14:29,503 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 13:14:29,504 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-12 13:14:29,504 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 41d01d51-8d4c-4552-bb57-74bffe2996d2-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd4b66923-6510-45ad-a089-310af845836b/ratis/fd76fa60-7a1f-4370-b0e3-459771c46ba5
2019-06-12 13:14:29,504 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-12 13:14:29,504 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-12 13:14:29,504 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 13:14:29,504 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-12 13:14:29,504 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-12 13:14:29,504 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-12 13:14:29,504 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-12 13:14:29,505 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-12 13:14:29,505 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-12 13:14:29,505 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-12 13:14:29,506 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-12 13:14:29,506 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-12 13:14:29,506 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-12 13:14:29,506 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: start group-459771C46BA5
2019-06-12 13:14:29,506 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2:group-459771C46BA5 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-12 13:14:29,506 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: start FollowerState
2019-06-12 13:14:29,507 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-459771C46BA5,id=41d01d51-8d4c-4552-bb57-74bffe2996d2
2019-06-12 13:14:30,669 INFO  impl.FollowerState (FollowerState.java:run(101)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2:group-459771C46BA5 changes to CANDIDATE, lastRpcTime:1162, electionTimeout:1162ms
2019-06-12 13:14:30,669 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: shutdown FollowerState
2019-06-12 13:14:30,669 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2:group-459771C46BA5 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-12 13:14:30,669 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: start LeaderElection
2019-06-12 13:14:30,672 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2:group-459771C46BA5:LeaderElection3: begin an election at term 1 for -1: [41d01d51-8d4c-4552-bb57-74bffe2996d2:127.0.0.1:46673], old=null
2019-06-12 13:14:30,672 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: shutdown LeaderElection
2019-06-12 13:14:30,672 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2:group-459771C46BA5 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-12 13:14:30,673 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2:group-459771C46BA5 change Leader from null to 41d01d51-8d4c-4552-bb57-74bffe2996d2 at term 1 for becomeLeader, leader elected after 1169ms
2019-06-12 13:14:30,673 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-12 13:14:30,673 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-12 13:14:30,673 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-12 13:14:30,673 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-12 13:14:30,673 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: start LeaderState
2019-06-12 13:14:30,673 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2-RaftLogWorker: Starting segment from index:0
2019-06-12 13:14:30,674 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2:group-459771C46BA5 set configuration 0: [41d01d51-8d4c-4552-bb57-74bffe2996d2:127.0.0.1:46673], old=null at 0
2019-06-12 13:14:30,709 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd4b66923-6510-45ad-a089-310af845836b/ratis/fd76fa60-7a1f-4370-b0e3-459771c46ba5/current/log_inprogress_0
2019-06-12 13:14:31,543 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 2742143904356733776 is closed with bcsId 0.
2019-06-12 13:14:31,544 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-12 13:14:31,544 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: close
2019-06-12 13:14:31,544 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: shutdown group-459771C46BA5
2019-06-12 13:14:31,544 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-459771C46BA5,id=41d01d51-8d4c-4552-bb57-74bffe2996d2
2019-06-12 13:14:31,545 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: shutdown LeaderState
2019-06-12 13:14:31,545 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2-PendingRequests: sendNotLeaderResponses
2019-06-12 13:14:31,546 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-41d01d51-8d4c-4552-bb57-74bffe2996d2-group-459771C46BA5: set stopIndex = 2
2019-06-12 13:14:31,546 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-12 13:14:31,546 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd4b66923-6510-45ad-a089-310af845836b/ratis/fd76fa60-7a1f-4370-b0e3-459771c46ba5/sm/snapshot.1_2
2019-06-12 13:14:31,546 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2:group-459771C46BA5 closes. The last applied log index is 2
2019-06-12 13:14:31,547 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-12 13:14:31,547 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2-RaftLogWorker close()
2019-06-12 13:14:31,549 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: shutdown server with port 46673 now
2019-06-12 13:14:31,551 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 41d01d51-8d4c-4552-bb57-74bffe2996d2: shutdown server with port 46673 successfully
2019-06-12 13:14:31,554 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-12 13:14:31,589 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3cb8272b-5fd3-4ddc-aa9a-47a35867879e/hdds of  storage type : DISK and capacity : 104021790720
2019-06-12 13:14:31,589 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3cb8272b-5fd3-4ddc-aa9a-47a35867879e/hdds to VolumeSet
2019-06-12 13:14:31,589 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@552ed807
2019-06-12 13:14:31,589 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@552ed807
2019-06-12 13:14:31,597 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 34169
2019-06-12 13:14:31,597 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-12 13:14:31,598 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-12 13:14:31,598 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 34169 (custom)
2019-06-12 13:14:31,598 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-12 13:14:31,599 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 13:14:31,599 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-12 13:14:31,599 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-12 13:14:31,600 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3cb8272b-5fd3-4ddc-aa9a-47a35867879e/ratis] (custom)
2019-06-12 13:14:31,600 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 42009
2019-06-12 13:14:31,600 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-12 13:14:31,601 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-12 13:14:31,601 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis ae09b0a0-d63c-499a-b0ec-769aafb79784 at port 34169
2019-06-12 13:14:31,608 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: start RPC server
2019-06-12 13:14:31,609 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: GrpcService started, listening on 0.0.0.0/0.0.0.0:34169
Jun 12, 2019 1:14:31 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:46673} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 12, 2019 1:14:31 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:43805} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-12 13:14:31,622 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: addNew group-6A881473706C:[ae09b0a0-d63c-499a-b0ec-769aafb79784:127.0.0.1:34169] returns group-6A881473706C:java.util.concurrent.CompletableFuture@a76b152[Not completed]
2019-06-12 13:14:31,623 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: new RaftServerImpl for group-6A881473706C:[ae09b0a0-d63c-499a-b0ec-769aafb79784:127.0.0.1:34169] with ContainerStateMachine:uninitialized
2019-06-12 13:14:31,623 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-12 13:14:31,623 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-12 13:14:31,623 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-12 13:14:31,624 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-12 13:14:31,624 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - ae09b0a0-d63c-499a-b0ec-769aafb79784:group-6A881473706C ConfigurationManager, init=-1: [ae09b0a0-d63c-499a-b0ec-769aafb79784:127.0.0.1:34169], old=null, confs=<EMPTY_MAP>
2019-06-12 13:14:31,624 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3cb8272b-5fd3-4ddc-aa9a-47a35867879e/ratis] (custom)
2019-06-12 13:14:31,624 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3cb8272b-5fd3-4ddc-aa9a-47a35867879e/ratis/054d967d-cc37-4cf3-8544-6a881473706c does not exist. Creating ...
2019-06-12 13:14:31,627 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3cb8272b-5fd3-4ddc-aa9a-47a35867879e/ratis/054d967d-cc37-4cf3-8544-6a881473706c/in_use.lock acquired by nodename 4184@ozone-x7bbm-294198099
2019-06-12 13:14:31,629 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3cb8272b-5fd3-4ddc-aa9a-47a35867879e/ratis/054d967d-cc37-4cf3-8544-6a881473706c has been successfully formatted.
2019-06-12 13:14:31,629 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-12 13:14:31,629 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-12 13:14:31,629 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-12 13:14:31,629 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 13:14:31,629 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 13:14:31,630 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-12 13:14:31,630 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new ae09b0a0-d63c-499a-b0ec-769aafb79784-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3cb8272b-5fd3-4ddc-aa9a-47a35867879e/ratis/054d967d-cc37-4cf3-8544-6a881473706c
2019-06-12 13:14:31,630 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-12 13:14:31,630 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-12 13:14:31,630 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 13:14:31,630 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-12 13:14:31,630 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-12 13:14:31,630 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-12 13:14:31,630 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-12 13:14:31,630 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-12 13:14:31,630 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-12 13:14:31,631 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-12 13:14:31,631 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-12 13:14:31,631 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-12 13:14:31,631 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-12 13:14:31,631 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: start group-6A881473706C
2019-06-12 13:14:31,632 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ae09b0a0-d63c-499a-b0ec-769aafb79784:group-6A881473706C changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-12 13:14:31,632 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: start FollowerState
2019-06-12 13:14:31,632 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-6A881473706C,id=ae09b0a0-d63c-499a-b0ec-769aafb79784
2019-06-12 13:14:32,817 INFO  impl.FollowerState (FollowerState.java:run(101)) - ae09b0a0-d63c-499a-b0ec-769aafb79784:group-6A881473706C changes to CANDIDATE, lastRpcTime:1185, electionTimeout:1185ms
2019-06-12 13:14:32,817 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: shutdown FollowerState
2019-06-12 13:14:32,817 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ae09b0a0-d63c-499a-b0ec-769aafb79784:group-6A881473706C changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-12 13:14:32,817 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: start LeaderElection
2019-06-12 13:14:32,820 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - ae09b0a0-d63c-499a-b0ec-769aafb79784:group-6A881473706C:LeaderElection4: begin an election at term 1 for -1: [ae09b0a0-d63c-499a-b0ec-769aafb79784:127.0.0.1:34169], old=null
2019-06-12 13:14:32,820 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: shutdown LeaderElection
2019-06-12 13:14:32,821 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ae09b0a0-d63c-499a-b0ec-769aafb79784:group-6A881473706C changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-12 13:14:32,821 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - ae09b0a0-d63c-499a-b0ec-769aafb79784:group-6A881473706C change Leader from null to ae09b0a0-d63c-499a-b0ec-769aafb79784 at term 1 for becomeLeader, leader elected after 1191ms
2019-06-12 13:14:32,821 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-12 13:14:32,821 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-12 13:14:32,821 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-12 13:14:32,821 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-12 13:14:32,821 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: start LeaderState
2019-06-12 13:14:32,821 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - ae09b0a0-d63c-499a-b0ec-769aafb79784-RaftLogWorker: Starting segment from index:0
2019-06-12 13:14:32,822 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - ae09b0a0-d63c-499a-b0ec-769aafb79784:group-6A881473706C set configuration 0: [ae09b0a0-d63c-499a-b0ec-769aafb79784:127.0.0.1:34169], old=null at 0
2019-06-12 13:14:32,856 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - ae09b0a0-d63c-499a-b0ec-769aafb79784-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3cb8272b-5fd3-4ddc-aa9a-47a35867879e/ratis/054d967d-cc37-4cf3-8544-6a881473706c/current/log_inprogress_0
2019-06-12 13:14:33,668 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 3338003280331677411 is closed with bcsId 0.
2019-06-12 13:14:33,668 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-12 13:14:33,669 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: close
2019-06-12 13:14:33,669 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: shutdown group-6A881473706C
2019-06-12 13:14:33,669 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-6A881473706C,id=ae09b0a0-d63c-499a-b0ec-769aafb79784
2019-06-12 13:14:33,669 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: shutdown LeaderState
2019-06-12 13:14:33,670 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - ae09b0a0-d63c-499a-b0ec-769aafb79784-PendingRequests: sendNotLeaderResponses
2019-06-12 13:14:33,671 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-ae09b0a0-d63c-499a-b0ec-769aafb79784-group-6A881473706C: set stopIndex = 2
2019-06-12 13:14:33,671 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-12 13:14:33,671 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3cb8272b-5fd3-4ddc-aa9a-47a35867879e/ratis/054d967d-cc37-4cf3-8544-6a881473706c/sm/snapshot.1_2
2019-06-12 13:14:33,671 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - ae09b0a0-d63c-499a-b0ec-769aafb79784:group-6A881473706C closes. The last applied log index is 2
2019-06-12 13:14:33,671 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - ae09b0a0-d63c-499a-b0ec-769aafb79784-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-12 13:14:33,672 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - ae09b0a0-d63c-499a-b0ec-769aafb79784-RaftLogWorker close()
2019-06-12 13:14:33,673 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: shutdown server with port 34169 now
2019-06-12 13:14:33,674 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - ae09b0a0-d63c-499a-b0ec-769aafb79784: shutdown server with port 34169 successfully
2019-06-12 13:14:33,676 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-12 13:14:33,693 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerdca5c006-330c-4fc2-b457-b6c9cbe3acec/hdds of  storage type : DISK and capacity : 104021790720
2019-06-12 13:14:33,694 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerdca5c006-330c-4fc2-b457-b6c9cbe3acec/hdds to VolumeSet
2019-06-12 13:14:33,694 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@713064e8
2019-06-12 13:14:33,694 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@713064e8
2019-06-12 13:14:33,703 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 39697
2019-06-12 13:14:33,703 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-12 13:14:33,704 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-12 13:14:33,704 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 39697 (custom)
2019-06-12 13:14:33,704 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-12 13:14:33,705 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 13:14:33,705 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-12 13:14:33,705 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-12 13:14:33,706 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerdca5c006-330c-4fc2-b457-b6c9cbe3acec/ratis] (custom)
2019-06-12 13:14:33,706 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 42965
2019-06-12 13:14:33,706 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-12 13:14:33,707 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-12 13:14:33,707 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15 at port 39697
2019-06-12 13:14:33,712 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: start RPC server
2019-06-12 13:14:33,714 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: GrpcService started, listening on 0.0.0.0/0.0.0.0:39697
2019-06-12 13:14:33,722 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: addNew group-A780B89BDD62:[0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:127.0.0.1:39697] returns group-A780B89BDD62:java.util.concurrent.CompletableFuture@2d584ce8[Not completed]
2019-06-12 13:14:33,722 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: new RaftServerImpl for group-A780B89BDD62:[0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:127.0.0.1:39697] with ContainerStateMachine:uninitialized
2019-06-12 13:14:33,722 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-12 13:14:33,722 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-12 13:14:33,723 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-12 13:14:33,723 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-12 13:14:33,723 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:group-A780B89BDD62 ConfigurationManager, init=-1: [0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:127.0.0.1:39697], old=null, confs=<EMPTY_MAP>
2019-06-12 13:14:33,723 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerdca5c006-330c-4fc2-b457-b6c9cbe3acec/ratis] (custom)
2019-06-12 13:14:33,723 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerdca5c006-330c-4fc2-b457-b6c9cbe3acec/ratis/3234753a-b2a2-4c2f-a735-a780b89bdd62 does not exist. Creating ...
2019-06-12 13:14:33,725 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerdca5c006-330c-4fc2-b457-b6c9cbe3acec/ratis/3234753a-b2a2-4c2f-a735-a780b89bdd62/in_use.lock acquired by nodename 4184@ozone-x7bbm-294198099
2019-06-12 13:14:33,727 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerdca5c006-330c-4fc2-b457-b6c9cbe3acec/ratis/3234753a-b2a2-4c2f-a735-a780b89bdd62 has been successfully formatted.
2019-06-12 13:14:33,727 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-12 13:14:33,728 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerdca5c006-330c-4fc2-b457-b6c9cbe3acec/ratis/3234753a-b2a2-4c2f-a735-a780b89bdd62
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-12 13:14:33,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-12 13:14:33,729 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-12 13:14:33,729 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-12 13:14:33,729 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-12 13:14:33,729 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-12 13:14:33,729 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-12 13:14:33,729 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-12 13:14:33,730 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: start group-A780B89BDD62
2019-06-12 13:14:33,730 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:group-A780B89BDD62 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-12 13:14:33,730 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: start FollowerState
2019-06-12 13:14:33,730 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-A780B89BDD62,id=0718fc7e-1bd2-4b93-bec4-b4a668dc2e15
2019-06-12 13:14:34,846 INFO  impl.FollowerState (FollowerState.java:run(101)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:group-A780B89BDD62 changes to CANDIDATE, lastRpcTime:1116, electionTimeout:1116ms
2019-06-12 13:14:34,847 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: shutdown FollowerState
2019-06-12 13:14:34,847 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:group-A780B89BDD62 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-12 13:14:34,847 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: start LeaderElection
2019-06-12 13:14:34,850 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:group-A780B89BDD62:LeaderElection5: begin an election at term 1 for -1: [0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:127.0.0.1:39697], old=null
2019-06-12 13:14:34,850 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: shutdown LeaderElection
2019-06-12 13:14:34,850 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:group-A780B89BDD62 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-12 13:14:34,850 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:group-A780B89BDD62 change Leader from null to 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15 at term 1 for becomeLeader, leader elected after 1122ms
2019-06-12 13:14:34,850 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-12 13:14:34,850 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-12 13:14:34,850 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-12 13:14:34,850 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-12 13:14:34,851 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: start LeaderState
2019-06-12 13:14:34,851 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15-RaftLogWorker: Starting segment from index:0
2019-06-12 13:14:34,851 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:group-A780B89BDD62 set configuration 0: [0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:127.0.0.1:39697], old=null at 0
2019-06-12 13:14:34,885 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerdca5c006-330c-4fc2-b457-b6c9cbe3acec/ratis/3234753a-b2a2-4c2f-a735-a780b89bdd62/current/log_inprogress_0
2019-06-12 13:14:35,770 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 2049777403630744819 is closed with bcsId 0.
2019-06-12 13:14:35,771 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-12 13:14:35,771 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: close
2019-06-12 13:14:35,772 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: shutdown group-A780B89BDD62
2019-06-12 13:14:35,772 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-A780B89BDD62,id=0718fc7e-1bd2-4b93-bec4-b4a668dc2e15
2019-06-12 13:14:35,772 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: shutdown LeaderState
2019-06-12 13:14:35,772 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15-PendingRequests: sendNotLeaderResponses
2019-06-12 13:14:35,773 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-0718fc7e-1bd2-4b93-bec4-b4a668dc2e15-group-A780B89BDD62: set stopIndex = 4
2019-06-12 13:14:35,773 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-12 13:14:35,774 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerdca5c006-330c-4fc2-b457-b6c9cbe3acec/ratis/3234753a-b2a2-4c2f-a735-a780b89bdd62/sm/snapshot.1_4
2019-06-12 13:14:35,774 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15:group-A780B89BDD62 closes. The last applied log index is 4
2019-06-12 13:14:35,774 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-12 13:14:35,775 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15-RaftLogWorker close()
2019-06-12 13:14:35,776 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: shutdown server with port 39697 now
2019-06-12 13:14:35,777 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 0718fc7e-1bd2-4b93-bec4-b4a668dc2e15: shutdown server with port 39697 successfully
2019-06-12 13:14:35,782 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
