2019-06-15 09:27:28,929 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-15 09:27:29,019 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-06-15 09:27:29,076 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 09:27:29,087 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 42767 (custom)
2019-06-15 09:27:29,088 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 09:27:29,090 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 09:27:29,091 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 09:27:29,092 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 09:27:29,139 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/fd2adb61-859d-4e1c-a05f-183e0caa6a53] (custom)
2019-06-15 09:27:29,144 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis fd2adb61-859d-4e1c-a05f-183e0caa6a53 at port 42767
2019-06-15 09:27:29,181 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: start RPC server
2019-06-15 09:27:29,183 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: GrpcService started, listening on 0.0.0.0/0.0.0.0:42767
2019-06-15 09:27:29,267 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: addNew group-E7C8CC9B0C00:[fd2adb61-859d-4e1c-a05f-183e0caa6a53:0.0.0.0:42767] returns group-E7C8CC9B0C00:java.util.concurrent.CompletableFuture@710a025f[Not completed]
2019-06-15 09:27:29,275 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: new RaftServerImpl for group-E7C8CC9B0C00:[fd2adb61-859d-4e1c-a05f-183e0caa6a53:0.0.0.0:42767] with ContainerStateMachine:uninitialized
2019-06-15 09:27:29,276 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 09:27:29,276 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 09:27:29,277 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 09:27:29,278 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 09:27:29,282 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53:group-E7C8CC9B0C00 ConfigurationManager, init=-1: [fd2adb61-859d-4e1c-a05f-183e0caa6a53:0.0.0.0:42767], old=null, confs=<EMPTY_MAP>
2019-06-15 09:27:29,282 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/fd2adb61-859d-4e1c-a05f-183e0caa6a53] (custom)
2019-06-15 09:27:29,288 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/fd2adb61-859d-4e1c-a05f-183e0caa6a53/7f1090d0-444a-4bd9-a8ba-e7c8cc9b0c00 does not exist. Creating ...
2019-06-15 09:27:29,297 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/fd2adb61-859d-4e1c-a05f-183e0caa6a53/7f1090d0-444a-4bd9-a8ba-e7c8cc9b0c00/in_use.lock acquired by nodename 6301@ozone-unit-076618677d3-f4jks-397892598
2019-06-15 09:27:29,304 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/fd2adb61-859d-4e1c-a05f-183e0caa6a53/7f1090d0-444a-4bd9-a8ba-e7c8cc9b0c00 has been successfully formatted.
2019-06-15 09:27:29,306 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 09:27:29,306 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 09:27:29,308 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 09:27:29,310 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 09:27:29,312 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 09:27:29,316 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 09:27:29,318 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new fd2adb61-859d-4e1c-a05f-183e0caa6a53-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/fd2adb61-859d-4e1c-a05f-183e0caa6a53/7f1090d0-444a-4bd9-a8ba-e7c8cc9b0c00
2019-06-15 09:27:29,319 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 09:27:29,319 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 09:27:29,321 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 09:27:29,321 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 09:27:29,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 09:27:29,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 09:27:29,323 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 09:27:29,323 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 09:27:29,323 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 09:27:29,326 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 09:27:29,331 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 09:27:29,332 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 09:27:29,332 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 09:27:29,347 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: start group-E7C8CC9B0C00
2019-06-15 09:27:29,348 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53:group-E7C8CC9B0C00 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 09:27:29,349 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: start FollowerState
2019-06-15 09:27:29,395 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-E7C8CC9B0C00,id=fd2adb61-859d-4e1c-a05f-183e0caa6a53
2019-06-15 09:27:29,446 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-802863A4A5AC->fd2adb61-859d-4e1c-a05f-183e0caa6a53: receive RaftClientReply:client-802863A4A5AC->fd2adb61-859d-4e1c-a05f-183e0caa6a53@group-E7C8CC9B0C00, cid=1, FAILED org.apache.ratis.protocol.NotLeaderException: Server fd2adb61-859d-4e1c-a05f-183e0caa6a53 is not the leader (null). Request must be sent to leader., logIndex=0, commits[fd2adb61-859d-4e1c-a05f-183e0caa6a53:c-1]
2019-06-15 09:27:30,455 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-802863A4A5AC->fd2adb61-859d-4e1c-a05f-183e0caa6a53: receive RaftClientReply:client-802863A4A5AC->fd2adb61-859d-4e1c-a05f-183e0caa6a53@group-E7C8CC9B0C00, cid=1, FAILED org.apache.ratis.protocol.NotLeaderException: Server fd2adb61-859d-4e1c-a05f-183e0caa6a53 is not the leader (null). Request must be sent to leader., logIndex=0, commits[fd2adb61-859d-4e1c-a05f-183e0caa6a53:c-1]
2019-06-15 09:27:30,496 INFO  impl.FollowerState (FollowerState.java:run(101)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53:group-E7C8CC9B0C00 changes to CANDIDATE, lastRpcTime:1147, electionTimeout:1147ms
2019-06-15 09:27:30,496 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: shutdown FollowerState
2019-06-15 09:27:30,496 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53:group-E7C8CC9B0C00 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-15 09:27:30,498 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: start LeaderElection
2019-06-15 09:27:30,501 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53:group-E7C8CC9B0C00:LeaderElection1: begin an election at term 1 for -1: [fd2adb61-859d-4e1c-a05f-183e0caa6a53:0.0.0.0:42767], old=null
2019-06-15 09:27:30,502 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: shutdown LeaderElection
2019-06-15 09:27:30,502 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53:group-E7C8CC9B0C00 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-15 09:27:30,503 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53:group-E7C8CC9B0C00 change Leader from null to fd2adb61-859d-4e1c-a05f-183e0caa6a53 at term 1 for becomeLeader, leader elected after 1196ms
2019-06-15 09:27:30,506 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-15 09:27:30,506 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-15 09:27:30,508 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-15 09:27:30,508 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-15 09:27:30,516 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: start LeaderState
2019-06-15 09:27:30,528 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53-RaftLogWorker: Starting segment from index:0
2019-06-15 09:27:30,535 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53:group-E7C8CC9B0C00 set configuration 0: [fd2adb61-859d-4e1c-a05f-183e0caa6a53:0.0.0.0:42767], old=null at 0
2019-06-15 09:27:30,671 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/fd2adb61-859d-4e1c-a05f-183e0caa6a53/7f1090d0-444a-4bd9-a8ba-e7c8cc9b0c00/current/log_inprogress_0
2019-06-15 09:27:31,473 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-15 09:27:31,480 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-802863A4A5AC->fd2adb61-859d-4e1c-a05f-183e0caa6a53: receive RaftClientReply:client-802863A4A5AC->fd2adb61-859d-4e1c-a05f-183e0caa6a53@group-E7C8CC9B0C00, cid=1, SUCCESS, logIndex=1, commits[fd2adb61-859d-4e1c-a05f-183e0caa6a53:c1]
2019-06-15 09:27:31,481 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-15 09:27:31,500 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-6E58F0878052->fd2adb61-859d-4e1c-a05f-183e0caa6a53: receive RaftClientReply:client-6E58F0878052->fd2adb61-859d-4e1c-a05f-183e0caa6a53@group-E7C8CC9B0C00, cid=2, SUCCESS, logIndex=3, commits[fd2adb61-859d-4e1c-a05f-183e0caa6a53:c3]
2019-06-15 09:27:31,504 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: close
2019-06-15 09:27:31,505 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: shutdown group-E7C8CC9B0C00
2019-06-15 09:27:31,506 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-E7C8CC9B0C00,id=fd2adb61-859d-4e1c-a05f-183e0caa6a53
2019-06-15 09:27:31,506 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: shutdown LeaderState
2019-06-15 09:27:31,507 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53-PendingRequests: sendNotLeaderResponses
2019-06-15 09:27:31,507 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-15 09:27:31,510 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 1-OrderedRequestStreamObserver1: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-15 09:27:31,510 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-15 09:27:31,510 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/fd2adb61-859d-4e1c-a05f-183e0caa6a53/7f1090d0-444a-4bd9-a8ba-e7c8cc9b0c00/sm/snapshot.1_3
2019-06-15 09:27:31,511 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-fd2adb61-859d-4e1c-a05f-183e0caa6a53-group-E7C8CC9B0C00: set stopIndex = 4
2019-06-15 09:27:31,519 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53:group-E7C8CC9B0C00 closes. The last applied log index is 4
2019-06-15 09:27:31,519 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 09:27:31,521 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53-RaftLogWorker close()
2019-06-15 09:27:31,522 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: shutdown server with port 42767 now
2019-06-15 09:27:31,524 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - fd2adb61-859d-4e1c-a05f-183e0caa6a53: shutdown server with port 42767 successfully
2019-06-15 09:27:31,560 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-06-15 09:27:31,562 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 09:27:31,562 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 46875 (custom)
2019-06-15 09:27:31,562 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 09:27:31,563 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 09:27:31,563 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 09:27:31,563 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 09:27:31,564 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/b95f9808-c713-4cd0-aab2-07c8f7114a3a] (custom)
2019-06-15 09:27:31,564 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis b95f9808-c713-4cd0-aab2-07c8f7114a3a at port 46875
2019-06-15 09:27:31,576 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: start RPC server
2019-06-15 09:27:31,578 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: GrpcService started, listening on 0.0.0.0/0.0.0.0:46875
Jun 15, 2019 9:27:31 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=17, target=0.0.0.0:42767} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 15, 2019 9:27:31 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=9, target=0.0.0.0:39737} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connectToDatanode(XceiverClientGrpc.java:163)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connect(XceiverClientGrpc.java:120)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:227)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServer(TestSecureContainerServer.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-15 09:27:31,606 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: addNew group-AC4D56413772:[6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195] returns group-AC4D56413772:java.util.concurrent.CompletableFuture@4ef0441b[Not completed]
2019-06-15 09:27:31,607 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: new RaftServerImpl for group-AC4D56413772:[6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195] with ContainerStateMachine:uninitialized
2019-06-15 09:27:31,609 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 09:27:31,609 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 09:27:31,609 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 09:27:31,609 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 09:27:31,610 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a:group-AC4D56413772 ConfigurationManager, init=-1: [6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195], old=null, confs=<EMPTY_MAP>
2019-06-15 09:27:31,610 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/b95f9808-c713-4cd0-aab2-07c8f7114a3a] (custom)
2019-06-15 09:27:31,610 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/b95f9808-c713-4cd0-aab2-07c8f7114a3a/7d951292-9bdb-4004-8e8b-ac4d56413772 does not exist. Creating ...
2019-06-15 09:27:31,613 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/b95f9808-c713-4cd0-aab2-07c8f7114a3a/7d951292-9bdb-4004-8e8b-ac4d56413772/in_use.lock acquired by nodename 6301@ozone-unit-076618677d3-f4jks-397892598
2019-06-15 09:27:31,615 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/b95f9808-c713-4cd0-aab2-07c8f7114a3a/7d951292-9bdb-4004-8e8b-ac4d56413772 has been successfully formatted.
2019-06-15 09:27:31,615 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 09:27:31,615 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 09:27:31,616 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 09:27:31,616 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 09:27:31,616 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 09:27:31,616 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 09:27:31,616 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new b95f9808-c713-4cd0-aab2-07c8f7114a3a-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/b95f9808-c713-4cd0-aab2-07c8f7114a3a/7d951292-9bdb-4004-8e8b-ac4d56413772
2019-06-15 09:27:31,616 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 09:27:31,616 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 09:27:31,616 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 09:27:31,617 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 09:27:31,617 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 09:27:31,617 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 09:27:31,617 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 09:27:31,617 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 09:27:31,617 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 09:27:31,617 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 09:27:31,618 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 09:27:31,618 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 09:27:31,618 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 09:27:31,618 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: start group-AC4D56413772
2019-06-15 09:27:31,618 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a:group-AC4D56413772 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 09:27:31,619 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: start FollowerState
2019-06-15 09:27:31,620 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-AC4D56413772,id=b95f9808-c713-4cd0-aab2-07c8f7114a3a
2019-06-15 09:27:31,624 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 09:27:31,624 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 45589 (custom)
2019-06-15 09:27:31,625 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 09:27:31,625 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 09:27:31,625 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 09:27:31,625 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 09:27:31,626 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6d4974c8-53fd-4090-ba0d-e8b1085778d4] (custom)
2019-06-15 09:27:31,626 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 6d4974c8-53fd-4090-ba0d-e8b1085778d4 at port 45589
2019-06-15 09:27:31,634 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: start RPC server
2019-06-15 09:27:31,635 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: GrpcService started, listening on 0.0.0.0/0.0.0.0:45589
2019-06-15 09:27:31,660 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: addNew group-AC4D56413772:[6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195] returns group-AC4D56413772:java.util.concurrent.CompletableFuture@3a33dd80[Not completed]
2019-06-15 09:27:31,660 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: new RaftServerImpl for group-AC4D56413772:[6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195] with ContainerStateMachine:uninitialized
2019-06-15 09:27:31,661 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 09:27:31,661 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 09:27:31,661 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 09:27:31,662 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 09:27:31,662 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4:group-AC4D56413772 ConfigurationManager, init=-1: [6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195], old=null, confs=<EMPTY_MAP>
2019-06-15 09:27:31,662 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6d4974c8-53fd-4090-ba0d-e8b1085778d4] (custom)
2019-06-15 09:27:31,662 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6d4974c8-53fd-4090-ba0d-e8b1085778d4/7d951292-9bdb-4004-8e8b-ac4d56413772 does not exist. Creating ...
2019-06-15 09:27:31,665 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6d4974c8-53fd-4090-ba0d-e8b1085778d4/7d951292-9bdb-4004-8e8b-ac4d56413772/in_use.lock acquired by nodename 6301@ozone-unit-076618677d3-f4jks-397892598
2019-06-15 09:27:31,667 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6d4974c8-53fd-4090-ba0d-e8b1085778d4/7d951292-9bdb-4004-8e8b-ac4d56413772 has been successfully formatted.
2019-06-15 09:27:31,667 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 09:27:31,667 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 09:27:31,667 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 09:27:31,667 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 09:27:31,668 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 09:27:31,668 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 09:27:31,668 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 6d4974c8-53fd-4090-ba0d-e8b1085778d4-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6d4974c8-53fd-4090-ba0d-e8b1085778d4/7d951292-9bdb-4004-8e8b-ac4d56413772
2019-06-15 09:27:31,668 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 09:27:31,668 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 09:27:31,668 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 09:27:31,669 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 09:27:31,669 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 09:27:31,669 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 09:27:31,669 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 09:27:31,669 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 09:27:31,670 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 09:27:31,670 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 09:27:31,671 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 09:27:31,671 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 09:27:31,671 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 09:27:31,671 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: start group-AC4D56413772
2019-06-15 09:27:31,671 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4:group-AC4D56413772 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 09:27:31,672 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: start FollowerState
2019-06-15 09:27:31,672 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-AC4D56413772,id=6d4974c8-53fd-4090-ba0d-e8b1085778d4
2019-06-15 09:27:31,677 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 09:27:31,677 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 37195 (custom)
2019-06-15 09:27:31,678 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 09:27:31,678 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 09:27:31,678 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 09:27:31,678 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 09:27:31,679 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/c34de7e0-1d04-4d99-b3e6-d8770b57ecca] (custom)
2019-06-15 09:27:31,679 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis c34de7e0-1d04-4d99-b3e6-d8770b57ecca at port 37195
2019-06-15 09:27:31,687 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: start RPC server
2019-06-15 09:27:31,689 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: GrpcService started, listening on 0.0.0.0/0.0.0.0:37195
2019-06-15 09:27:31,710 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: addNew group-AC4D56413772:[6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195] returns group-AC4D56413772:java.util.concurrent.CompletableFuture@43c74d88[Not completed]
2019-06-15 09:27:31,710 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: new RaftServerImpl for group-AC4D56413772:[6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195] with ContainerStateMachine:uninitialized
2019-06-15 09:27:31,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 09:27:31,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 09:27:31,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 09:27:31,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 09:27:31,711 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca:group-AC4D56413772 ConfigurationManager, init=-1: [6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195], old=null, confs=<EMPTY_MAP>
2019-06-15 09:27:31,712 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/c34de7e0-1d04-4d99-b3e6-d8770b57ecca] (custom)
2019-06-15 09:27:31,712 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/c34de7e0-1d04-4d99-b3e6-d8770b57ecca/7d951292-9bdb-4004-8e8b-ac4d56413772 does not exist. Creating ...
2019-06-15 09:27:31,714 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/c34de7e0-1d04-4d99-b3e6-d8770b57ecca/7d951292-9bdb-4004-8e8b-ac4d56413772/in_use.lock acquired by nodename 6301@ozone-unit-076618677d3-f4jks-397892598
2019-06-15 09:27:31,716 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/c34de7e0-1d04-4d99-b3e6-d8770b57ecca/7d951292-9bdb-4004-8e8b-ac4d56413772 has been successfully formatted.
2019-06-15 09:27:31,717 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 09:27:31,717 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 09:27:31,717 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 09:27:31,717 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 09:27:31,717 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 09:27:31,717 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 09:27:31,717 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new c34de7e0-1d04-4d99-b3e6-d8770b57ecca-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/c34de7e0-1d04-4d99-b3e6-d8770b57ecca/7d951292-9bdb-4004-8e8b-ac4d56413772
2019-06-15 09:27:31,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 09:27:31,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 09:27:31,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 09:27:31,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 09:27:31,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 09:27:31,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 09:27:31,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 09:27:31,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 09:27:31,719 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 09:27:31,719 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 09:27:31,720 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 09:27:31,721 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 09:27:31,721 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 09:27:31,721 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: start group-AC4D56413772
2019-06-15 09:27:31,721 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca:group-AC4D56413772 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 09:27:31,721 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: start FollowerState
2019-06-15 09:27:31,722 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-AC4D56413772,id=c34de7e0-1d04-4d99-b3e6-d8770b57ecca
2019-06-15 09:27:31,742 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-A25C00BC2282->b95f9808-c713-4cd0-aab2-07c8f7114a3a: receive RaftClientReply:client-A25C00BC2282->b95f9808-c713-4cd0-aab2-07c8f7114a3a@group-AC4D56413772, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server b95f9808-c713-4cd0-aab2-07c8f7114a3a is not the leader (6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589). Request must be sent to leader., logIndex=0, commits[b95f9808-c713-4cd0-aab2-07c8f7114a3a:c-1]
2019-06-15 09:27:31,746 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-15 09:27:32,713 INFO  impl.FollowerState (FollowerState.java:run(101)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a:group-AC4D56413772 changes to CANDIDATE, lastRpcTime:1094, electionTimeout:1094ms
2019-06-15 09:27:32,714 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: shutdown FollowerState
2019-06-15 09:27:32,714 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a:group-AC4D56413772 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-15 09:27:32,714 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: start LeaderElection
2019-06-15 09:27:32,717 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a:group-AC4D56413772:LeaderElection2: begin an election at term 1 for -1: [6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195], old=null
2019-06-15 09:27:32,749 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4:group-AC4D56413772 changes role from FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:b95f9808-c713-4cd0-aab2-07c8f7114a3a
2019-06-15 09:27:32,749 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: shutdown FollowerState
2019-06-15 09:27:32,749 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: start FollowerState
2019-06-15 09:27:32,749 INFO  impl.FollowerState (FollowerState.java:run(109)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-15 09:27:32,753 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca:group-AC4D56413772 changes role from FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:b95f9808-c713-4cd0-aab2-07c8f7114a3a
2019-06-15 09:27:32,754 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: shutdown FollowerState
2019-06-15 09:27:32,754 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: start FollowerState
2019-06-15 09:27:32,754 INFO  impl.FollowerState (FollowerState.java:run(109)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-15 09:27:32,760 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-A25C00BC2282->c34de7e0-1d04-4d99-b3e6-d8770b57ecca: receive RaftClientReply:client-A25C00BC2282->c34de7e0-1d04-4d99-b3e6-d8770b57ecca@group-AC4D56413772, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server c34de7e0-1d04-4d99-b3e6-d8770b57ecca is not the leader (b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875). Request must be sent to leader., logIndex=0, commits[c34de7e0-1d04-4d99-b3e6-d8770b57ecca:c-1]
2019-06-15 09:27:32,773 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-15 09:27:32,773 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a:group-AC4D56413772:LeaderElection2: Election PASSED; received 1 response(s) [b95f9808-c713-4cd0-aab2-07c8f7114a3a->c34de7e0-1d04-4d99-b3e6-d8770b57ecca,true-t1] and 0 exception(s); b95f9808-c713-4cd0-aab2-07c8f7114a3a:t1, leader=null, voted=b95f9808-c713-4cd0-aab2-07c8f7114a3a, raftlog=b95f9808-c713-4cd0-aab2-07c8f7114a3a-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195], old=null
2019-06-15 09:27:32,774 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: shutdown LeaderElection
2019-06-15 09:27:32,774 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a:group-AC4D56413772 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-15 09:27:32,774 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a:group-AC4D56413772 change Leader from null to b95f9808-c713-4cd0-aab2-07c8f7114a3a at term 1 for becomeLeader, leader elected after 1159ms
2019-06-15 09:27:32,775 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-15 09:27:32,775 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-15 09:27:32,775 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-15 09:27:32,775 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-15 09:27:32,777 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-06-15 09:27:32,777 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 09:27:32,777 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-06-15 09:27:32,778 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-06-15 09:27:32,779 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 09:27:32,779 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 09:27:32,779 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-06-15 09:27:32,779 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 09:27:32,779 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-06-15 09:27:32,779 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-06-15 09:27:32,780 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 09:27:32,780 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 09:27:32,780 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: start LeaderState
2019-06-15 09:27:32,780 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a-RaftLogWorker: Starting segment from index:0
2019-06-15 09:27:32,817 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a:group-AC4D56413772 set configuration 0: [6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195], old=null at 0
2019-06-15 09:27:32,882 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/b95f9808-c713-4cd0-aab2-07c8f7114a3a/7d951292-9bdb-4004-8e8b-ac4d56413772/current/log_inprogress_0
2019-06-15 09:27:32,894 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca:group-AC4D56413772 change Leader from null to b95f9808-c713-4cd0-aab2-07c8f7114a3a at term 1 for appendEntries, leader elected after 1176ms
2019-06-15 09:27:32,894 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4:group-AC4D56413772 change Leader from null to b95f9808-c713-4cd0-aab2-07c8f7114a3a at term 1 for appendEntries, leader elected after 1226ms
2019-06-15 09:27:32,911 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca:group-AC4D56413772 set configuration 0: [6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195], old=null at 0
2019-06-15 09:27:32,911 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca-RaftLogWorker: Starting segment from index:0
2019-06-15 09:27:32,911 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4:group-AC4D56413772 set configuration 0: [6d4974c8-53fd-4090-ba0d-e8b1085778d4:0.0.0.0:45589, b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:0.0.0.0:37195], old=null at 0
2019-06-15 09:27:32,913 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4-RaftLogWorker: Starting segment from index:0
2019-06-15 09:27:32,969 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6d4974c8-53fd-4090-ba0d-e8b1085778d4/7d951292-9bdb-4004-8e8b-ac4d56413772/current/log_inprogress_0
2019-06-15 09:27:32,969 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/c34de7e0-1d04-4d99-b3e6-d8770b57ecca/7d951292-9bdb-4004-8e8b-ac4d56413772/current/log_inprogress_0
Jun 15, 2019 9:27:33 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=51, target=0.0.0.0:37195} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 15, 2019 9:27:33 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=43, target=0.0.0.0:45589} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 15, 2019 9:27:33 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=35, target=0.0.0.0:46875} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-15 09:27:33,780 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-A25C00BC2282->6d4974c8-53fd-4090-ba0d-e8b1085778d4: receive RaftClientReply:client-A25C00BC2282->6d4974c8-53fd-4090-ba0d-e8b1085778d4@group-AC4D56413772, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server 6d4974c8-53fd-4090-ba0d-e8b1085778d4 is not the leader (b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875). Request must be sent to leader., logIndex=0, commits[6d4974c8-53fd-4090-ba0d-e8b1085778d4:c0, b95f9808-c713-4cd0-aab2-07c8f7114a3a:c0, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:c0]
2019-06-15 09:27:33,786 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-15 09:27:34,790 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-A25C00BC2282->c34de7e0-1d04-4d99-b3e6-d8770b57ecca: receive RaftClientReply:client-A25C00BC2282->c34de7e0-1d04-4d99-b3e6-d8770b57ecca@group-AC4D56413772, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server c34de7e0-1d04-4d99-b3e6-d8770b57ecca is not the leader (b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875). Request must be sent to leader., logIndex=0, commits[c34de7e0-1d04-4d99-b3e6-d8770b57ecca:c0, 6d4974c8-53fd-4090-ba0d-e8b1085778d4:c0, b95f9808-c713-4cd0-aab2-07c8f7114a3a:c0]
2019-06-15 09:27:34,793 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 1-OrderedRequestStreamObserver1: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-15 09:27:35,801 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-A25C00BC2282->6d4974c8-53fd-4090-ba0d-e8b1085778d4: receive RaftClientReply:client-A25C00BC2282->6d4974c8-53fd-4090-ba0d-e8b1085778d4@group-AC4D56413772, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server 6d4974c8-53fd-4090-ba0d-e8b1085778d4 is not the leader (b95f9808-c713-4cd0-aab2-07c8f7114a3a:0.0.0.0:46875). Request must be sent to leader., logIndex=0, commits[6d4974c8-53fd-4090-ba0d-e8b1085778d4:c0, b95f9808-c713-4cd0-aab2-07c8f7114a3a:c0, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:c0]
2019-06-15 09:27:35,803 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 1-OrderedRequestStreamObserver1: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-15 09:27:36,828 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-15 09:27:36,855 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-15 09:27:36,847 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-15 09:27:36,870 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-A25C00BC2282->b95f9808-c713-4cd0-aab2-07c8f7114a3a: receive RaftClientReply:client-A25C00BC2282->b95f9808-c713-4cd0-aab2-07c8f7114a3a@group-AC4D56413772, cid=6, SUCCESS, logIndex=1, commits[b95f9808-c713-4cd0-aab2-07c8f7114a3a:c2, 6d4974c8-53fd-4090-ba0d-e8b1085778d4:c1, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:c1]
2019-06-15 09:27:36,870 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-15 09:27:36,919 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-BB4352441FDE->b95f9808-c713-4cd0-aab2-07c8f7114a3a: receive RaftClientReply:client-BB4352441FDE->b95f9808-c713-4cd0-aab2-07c8f7114a3a@group-AC4D56413772, cid=7, SUCCESS, logIndex=3, commits[b95f9808-c713-4cd0-aab2-07c8f7114a3a:c4, 6d4974c8-53fd-4090-ba0d-e8b1085778d4:c3, c34de7e0-1d04-4d99-b3e6-d8770b57ecca:c2]
2019-06-15 09:27:36,921 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: close
2019-06-15 09:27:36,922 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: shutdown group-AC4D56413772
2019-06-15 09:27:36,923 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-AC4D56413772,id=b95f9808-c713-4cd0-aab2-07c8f7114a3a
2019-06-15 09:27:36,923 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: shutdown LeaderState
2019-06-15 09:27:36,923 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a-PendingRequests: sendNotLeaderResponses
2019-06-15 09:27:36,923 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(142)) - GrpcLogAppender(b95f9808-c713-4cd0-aab2-07c8f7114a3a -> 6d4974c8-53fd-4090-ba0d-e8b1085778d4): Wait interrupted by java.lang.InterruptedException
2019-06-15 09:27:36,926 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(104)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: appendEntries completed
2019-06-15 09:27:36,924 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(142)) - GrpcLogAppender(b95f9808-c713-4cd0-aab2-07c8f7114a3a -> c34de7e0-1d04-4d99-b3e6-d8770b57ecca): Wait interrupted by java.lang.InterruptedException
2019-06-15 09:27:36,928 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(277)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: follower b95f9808-c713-4cd0-aab2-07c8f7114a3a->6d4974c8-53fd-4090-ba0d-e8b1085778d4(c3,m4,n5, attendVote=true, lastRpcSendTime=36, lastRpcResponseTime=31) response Completed
2019-06-15 09:27:36,928 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(104)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: appendEntries completed
2019-06-15 09:27:36,929 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-15 09:27:36,929 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/b95f9808-c713-4cd0-aab2-07c8f7114a3a/7d951292-9bdb-4004-8e8b-ac4d56413772/sm/snapshot.1_4
2019-06-15 09:27:36,929 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a->6d4974c8-53fd-4090-ba0d-e8b1085778d4: nextIndex: updateUnconditionally 5 -> 0
2019-06-15 09:27:36,929 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-b95f9808-c713-4cd0-aab2-07c8f7114a3a-group-AC4D56413772: set stopIndex = 4
2019-06-15 09:27:36,930 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a:group-AC4D56413772 closes. The last applied log index is 4
2019-06-15 09:27:36,930 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(277)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: follower b95f9808-c713-4cd0-aab2-07c8f7114a3a->c34de7e0-1d04-4d99-b3e6-d8770b57ecca(c3,m4,n5, attendVote=true, lastRpcSendTime=39, lastRpcResponseTime=14) response Completed
2019-06-15 09:27:36,931 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 09:27:36,931 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a->c34de7e0-1d04-4d99-b3e6-d8770b57ecca: nextIndex: updateUnconditionally 5 -> -1
2019-06-15 09:27:36,932 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a-RaftLogWorker close()
2019-06-15 09:27:36,933 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: shutdown server with port 46875 now
2019-06-15 09:27:36,934 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - b95f9808-c713-4cd0-aab2-07c8f7114a3a: shutdown server with port 46875 successfully
2019-06-15 09:27:36,935 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: close
2019-06-15 09:27:36,935 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: shutdown group-AC4D56413772
2019-06-15 09:27:36,935 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-AC4D56413772,id=6d4974c8-53fd-4090-ba0d-e8b1085778d4
2019-06-15 09:27:36,936 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: shutdown FollowerState
2019-06-15 09:27:36,936 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-15 09:27:36,936 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/6d4974c8-53fd-4090-ba0d-e8b1085778d4/7d951292-9bdb-4004-8e8b-ac4d56413772/sm/snapshot.1_3
2019-06-15 09:27:36,936 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-6d4974c8-53fd-4090-ba0d-e8b1085778d4-group-AC4D56413772: set stopIndex = 3
2019-06-15 09:27:36,937 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4:group-AC4D56413772 closes. The last applied log index is 3
2019-06-15 09:27:36,937 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 09:27:36,939 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4-RaftLogWorker close()
2019-06-15 09:27:36,939 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: shutdown server with port 45589 now
2019-06-15 09:27:36,939 INFO  impl.FollowerState (FollowerState.java:run(109)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-15 09:27:36,941 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 6d4974c8-53fd-4090-ba0d-e8b1085778d4: shutdown server with port 45589 successfully
2019-06-15 09:27:36,943 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: close
2019-06-15 09:27:36,943 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: shutdown group-AC4D56413772
2019-06-15 09:27:36,944 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-AC4D56413772,id=c34de7e0-1d04-4d99-b3e6-d8770b57ecca
2019-06-15 09:27:36,944 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: shutdown FollowerState
2019-06-15 09:27:36,944 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-15 09:27:36,944 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/c34de7e0-1d04-4d99-b3e6-d8770b57ecca/7d951292-9bdb-4004-8e8b-ac4d56413772/sm/snapshot.1_3
2019-06-15 09:27:36,945 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-c34de7e0-1d04-4d99-b3e6-d8770b57ecca-group-AC4D56413772: set stopIndex = 3
2019-06-15 09:27:36,945 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca:group-AC4D56413772 closes. The last applied log index is 3
2019-06-15 09:27:36,945 INFO  impl.FollowerState (FollowerState.java:run(109)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-15 09:27:36,946 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 09:27:36,947 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca-RaftLogWorker close()
2019-06-15 09:27:36,947 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: shutdown server with port 37195 now
2019-06-15 09:27:36,948 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - c34de7e0-1d04-4d99-b3e6-d8770b57ecca: shutdown server with port 37195 successfully
