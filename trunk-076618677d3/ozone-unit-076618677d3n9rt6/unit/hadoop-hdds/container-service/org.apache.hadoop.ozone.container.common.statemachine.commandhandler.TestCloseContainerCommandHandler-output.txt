2019-06-18 00:07:51,408 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7f443dea-30eb-466d-b98c-d81f5afe71ff/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 00:07:51,414 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7f443dea-30eb-466d-b98c-d81f5afe71ff/hdds to VolumeSet
2019-06-18 00:07:51,428 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
2019-06-18 00:07:51,502 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-06-18 00:07:51,884 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 45313
2019-06-18 00:07:52,373 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 00:07:52,401 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 00:07:52,412 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 45313 (custom)
2019-06-18 00:07:52,414 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 00:07:52,416 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 00:07:52,417 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 00:07:52,418 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 00:07:52,567 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7f443dea-30eb-466d-b98c-d81f5afe71ff/ratis] (custom)
2019-06-18 00:07:52,579 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 42581
2019-06-18 00:07:52,600 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 00:07:52,600 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 00:07:52,601 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis d826c808-cf9f-482d-9884-f71939e47e52 at port 45313
2019-06-18 00:07:52,611 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - d826c808-cf9f-482d-9884-f71939e47e52: start RPC server
2019-06-18 00:07:52,730 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - d826c808-cf9f-482d-9884-f71939e47e52: GrpcService started, listening on 0.0.0.0/0.0.0.0:45313
2019-06-18 00:07:53,067 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - d826c808-cf9f-482d-9884-f71939e47e52: addNew group-32366108B6BE:[d826c808-cf9f-482d-9884-f71939e47e52:127.0.0.1:45313] returns group-32366108B6BE:java.util.concurrent.CompletableFuture@2c69a941[Not completed]
2019-06-18 00:07:53,109 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - d826c808-cf9f-482d-9884-f71939e47e52: new RaftServerImpl for group-32366108B6BE:[d826c808-cf9f-482d-9884-f71939e47e52:127.0.0.1:45313] with ContainerStateMachine:uninitialized
2019-06-18 00:07:53,111 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 00:07:53,111 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 00:07:53,111 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 00:07:53,112 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 00:07:53,120 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - d826c808-cf9f-482d-9884-f71939e47e52:group-32366108B6BE ConfigurationManager, init=-1: [d826c808-cf9f-482d-9884-f71939e47e52:127.0.0.1:45313], old=null, confs=<EMPTY_MAP>
2019-06-18 00:07:53,120 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7f443dea-30eb-466d-b98c-d81f5afe71ff/ratis] (custom)
2019-06-18 00:07:53,129 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7f443dea-30eb-466d-b98c-d81f5afe71ff/ratis/cb7c01c4-d536-403c-88fd-32366108b6be does not exist. Creating ...
2019-06-18 00:07:53,137 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7f443dea-30eb-466d-b98c-d81f5afe71ff/ratis/cb7c01c4-d536-403c-88fd-32366108b6be/in_use.lock acquired by nodename 4308@ozone-unit-076618677d3n9rt6-2628742320
2019-06-18 00:07:53,146 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7f443dea-30eb-466d-b98c-d81f5afe71ff/ratis/cb7c01c4-d536-403c-88fd-32366108b6be has been successfully formatted.
2019-06-18 00:07:53,147 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 00:07:53,148 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 00:07:53,149 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 00:07:53,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 00:07:53,155 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 00:07:53,160 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 00:07:53,163 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new d826c808-cf9f-482d-9884-f71939e47e52-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7f443dea-30eb-466d-b98c-d81f5afe71ff/ratis/cb7c01c4-d536-403c-88fd-32366108b6be
2019-06-18 00:07:53,164 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 00:07:53,165 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 00:07:53,167 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 00:07:53,167 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 00:07:53,168 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 00:07:53,168 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 00:07:53,170 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 00:07:53,170 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 00:07:53,170 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 00:07:53,173 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 00:07:53,179 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 00:07:53,180 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 00:07:53,181 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 00:07:53,288 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - d826c808-cf9f-482d-9884-f71939e47e52: start group-32366108B6BE
2019-06-18 00:07:53,290 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - d826c808-cf9f-482d-9884-f71939e47e52:group-32366108B6BE changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 00:07:53,291 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - d826c808-cf9f-482d-9884-f71939e47e52: start FollowerState
2019-06-18 00:07:53,294 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-32366108B6BE,id=d826c808-cf9f-482d-9884-f71939e47e52
2019-06-18 00:07:54,463 INFO  impl.FollowerState (FollowerState.java:run(101)) - d826c808-cf9f-482d-9884-f71939e47e52:group-32366108B6BE changes to CANDIDATE, lastRpcTime:1172, electionTimeout:1171ms
2019-06-18 00:07:54,463 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - d826c808-cf9f-482d-9884-f71939e47e52: shutdown FollowerState
2019-06-18 00:07:54,463 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - d826c808-cf9f-482d-9884-f71939e47e52:group-32366108B6BE changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 00:07:54,465 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - d826c808-cf9f-482d-9884-f71939e47e52: start LeaderElection
2019-06-18 00:07:54,471 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - d826c808-cf9f-482d-9884-f71939e47e52:group-32366108B6BE:LeaderElection1: begin an election at term 1 for -1: [d826c808-cf9f-482d-9884-f71939e47e52:127.0.0.1:45313], old=null
2019-06-18 00:07:54,472 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - d826c808-cf9f-482d-9884-f71939e47e52: shutdown LeaderElection
2019-06-18 00:07:54,472 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - d826c808-cf9f-482d-9884-f71939e47e52:group-32366108B6BE changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 00:07:54,472 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - d826c808-cf9f-482d-9884-f71939e47e52:group-32366108B6BE change Leader from null to d826c808-cf9f-482d-9884-f71939e47e52 at term 1 for becomeLeader, leader elected after 1324ms
2019-06-18 00:07:54,476 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 00:07:54,476 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 00:07:54,478 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 00:07:54,478 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 00:07:54,484 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - d826c808-cf9f-482d-9884-f71939e47e52: start LeaderState
2019-06-18 00:07:54,495 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - d826c808-cf9f-482d-9884-f71939e47e52-RaftLogWorker: Starting segment from index:0
2019-06-18 00:07:54,502 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - d826c808-cf9f-482d-9884-f71939e47e52:group-32366108B6BE set configuration 0: [d826c808-cf9f-482d-9884-f71939e47e52:127.0.0.1:45313], old=null at 0
2019-06-18 00:07:54,629 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - d826c808-cf9f-482d-9884-f71939e47e52-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7f443dea-30eb-466d-b98c-d81f5afe71ff/ratis/cb7c01c4-d536-403c-88fd-32366108b6be/current/log_inprogress_0
2019-06-18 00:07:55,542 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-06-18 00:07:55,608 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 9125689636610083825 is closed with bcsId 0.
2019-06-18 00:07:55,609 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 00:07:55,612 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - d826c808-cf9f-482d-9884-f71939e47e52: close
2019-06-18 00:07:55,614 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - d826c808-cf9f-482d-9884-f71939e47e52: shutdown group-32366108B6BE
2019-06-18 00:07:55,614 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-32366108B6BE,id=d826c808-cf9f-482d-9884-f71939e47e52
2019-06-18 00:07:55,614 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - d826c808-cf9f-482d-9884-f71939e47e52: shutdown LeaderState
2019-06-18 00:07:55,615 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - d826c808-cf9f-482d-9884-f71939e47e52-PendingRequests: sendNotLeaderResponses
2019-06-18 00:07:55,618 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-d826c808-cf9f-482d-9884-f71939e47e52-group-32366108B6BE: set stopIndex = 4
2019-06-18 00:07:55,618 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-18 00:07:55,618 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7f443dea-30eb-466d-b98c-d81f5afe71ff/ratis/cb7c01c4-d536-403c-88fd-32366108b6be/sm/snapshot.1_4
2019-06-18 00:07:55,629 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - d826c808-cf9f-482d-9884-f71939e47e52:group-32366108B6BE closes. The last applied log index is 4
2019-06-18 00:07:55,630 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - d826c808-cf9f-482d-9884-f71939e47e52-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 00:07:55,631 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - d826c808-cf9f-482d-9884-f71939e47e52-RaftLogWorker close()
2019-06-18 00:07:55,632 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - d826c808-cf9f-482d-9884-f71939e47e52: shutdown server with port 45313 now
2019-06-18 00:07:55,636 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - d826c808-cf9f-482d-9884-f71939e47e52: shutdown server with port 45313 successfully
2019-06-18 00:07:55,645 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 00:07:55,677 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler88318c4a-a17e-4248-83a4-e2cc05be8542/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 00:07:55,677 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler88318c4a-a17e-4248-83a4-e2cc05be8542/hdds to VolumeSet
2019-06-18 00:07:55,678 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@3a2b2322
2019-06-18 00:07:55,683 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@3a2b2322
2019-06-18 00:07:55,692 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 32979
2019-06-18 00:07:55,693 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 00:07:55,694 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 00:07:55,694 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 32979 (custom)
2019-06-18 00:07:55,694 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 00:07:55,694 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 00:07:55,694 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 00:07:55,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 00:07:55,695 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler88318c4a-a17e-4248-83a4-e2cc05be8542/ratis] (custom)
2019-06-18 00:07:55,696 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 43851
2019-06-18 00:07:55,696 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 00:07:55,696 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 00:07:55,696 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis d0698412-2401-4e6e-8dda-a701992d6473 at port 32979
2019-06-18 00:07:55,714 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - d0698412-2401-4e6e-8dda-a701992d6473: start RPC server
2019-06-18 00:07:55,715 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - d0698412-2401-4e6e-8dda-a701992d6473: GrpcService started, listening on 0.0.0.0/0.0.0.0:32979
2019-06-18 00:07:55,724 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - d0698412-2401-4e6e-8dda-a701992d6473: addNew group-7D50588F7A38:[d0698412-2401-4e6e-8dda-a701992d6473:127.0.0.1:32979] returns group-7D50588F7A38:java.util.concurrent.CompletableFuture@59488b08[Not completed]
2019-06-18 00:07:55,725 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - d0698412-2401-4e6e-8dda-a701992d6473: new RaftServerImpl for group-7D50588F7A38:[d0698412-2401-4e6e-8dda-a701992d6473:127.0.0.1:32979] with ContainerStateMachine:uninitialized
2019-06-18 00:07:55,725 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 00:07:55,725 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 00:07:55,725 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 00:07:55,725 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 00:07:55,726 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - d0698412-2401-4e6e-8dda-a701992d6473:group-7D50588F7A38 ConfigurationManager, init=-1: [d0698412-2401-4e6e-8dda-a701992d6473:127.0.0.1:32979], old=null, confs=<EMPTY_MAP>
2019-06-18 00:07:55,726 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler88318c4a-a17e-4248-83a4-e2cc05be8542/ratis] (custom)
2019-06-18 00:07:55,726 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler88318c4a-a17e-4248-83a4-e2cc05be8542/ratis/fec0b436-35e0-4f8a-bcaf-7d50588f7a38 does not exist. Creating ...
2019-06-18 00:07:55,729 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler88318c4a-a17e-4248-83a4-e2cc05be8542/ratis/fec0b436-35e0-4f8a-bcaf-7d50588f7a38/in_use.lock acquired by nodename 4308@ozone-unit-076618677d3n9rt6-2628742320
2019-06-18 00:07:55,731 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler88318c4a-a17e-4248-83a4-e2cc05be8542/ratis/fec0b436-35e0-4f8a-bcaf-7d50588f7a38 has been successfully formatted.
2019-06-18 00:07:55,731 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 00:07:55,731 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 00:07:55,731 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 00:07:55,732 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 00:07:55,732 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 00:07:55,732 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 00:07:55,732 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new d0698412-2401-4e6e-8dda-a701992d6473-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler88318c4a-a17e-4248-83a4-e2cc05be8542/ratis/fec0b436-35e0-4f8a-bcaf-7d50588f7a38
2019-06-18 00:07:55,732 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 00:07:55,732 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 00:07:55,735 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 00:07:55,735 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 00:07:55,735 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 00:07:55,736 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 00:07:55,736 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 00:07:55,736 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 00:07:55,736 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 00:07:55,736 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 00:07:55,737 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 00:07:55,737 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 00:07:55,737 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 00:07:55,737 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - d0698412-2401-4e6e-8dda-a701992d6473: start group-7D50588F7A38
2019-06-18 00:07:55,737 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - d0698412-2401-4e6e-8dda-a701992d6473:group-7D50588F7A38 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 00:07:55,737 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - d0698412-2401-4e6e-8dda-a701992d6473: start FollowerState
2019-06-18 00:07:55,738 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-7D50588F7A38,id=d0698412-2401-4e6e-8dda-a701992d6473
2019-06-18 00:07:56,788 INFO  impl.FollowerState (FollowerState.java:run(101)) - d0698412-2401-4e6e-8dda-a701992d6473:group-7D50588F7A38 changes to CANDIDATE, lastRpcTime:1050, electionTimeout:1050ms
2019-06-18 00:07:56,788 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - d0698412-2401-4e6e-8dda-a701992d6473: shutdown FollowerState
2019-06-18 00:07:56,788 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - d0698412-2401-4e6e-8dda-a701992d6473:group-7D50588F7A38 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 00:07:56,788 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - d0698412-2401-4e6e-8dda-a701992d6473: start LeaderElection
2019-06-18 00:07:56,793 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - d0698412-2401-4e6e-8dda-a701992d6473:group-7D50588F7A38:LeaderElection2: begin an election at term 1 for -1: [d0698412-2401-4e6e-8dda-a701992d6473:127.0.0.1:32979], old=null
2019-06-18 00:07:56,793 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - d0698412-2401-4e6e-8dda-a701992d6473: shutdown LeaderElection
2019-06-18 00:07:56,793 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - d0698412-2401-4e6e-8dda-a701992d6473:group-7D50588F7A38 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 00:07:56,794 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - d0698412-2401-4e6e-8dda-a701992d6473:group-7D50588F7A38 change Leader from null to d0698412-2401-4e6e-8dda-a701992d6473 at term 1 for becomeLeader, leader elected after 1062ms
2019-06-18 00:07:56,794 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 00:07:56,794 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 00:07:56,794 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 00:07:56,794 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 00:07:56,795 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - d0698412-2401-4e6e-8dda-a701992d6473: start LeaderState
2019-06-18 00:07:56,795 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - d0698412-2401-4e6e-8dda-a701992d6473-RaftLogWorker: Starting segment from index:0
2019-06-18 00:07:56,799 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - d0698412-2401-4e6e-8dda-a701992d6473:group-7D50588F7A38 set configuration 0: [d0698412-2401-4e6e-8dda-a701992d6473:127.0.0.1:32979], old=null at 0
2019-06-18 00:07:56,834 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - d0698412-2401-4e6e-8dda-a701992d6473-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler88318c4a-a17e-4248-83a4-e2cc05be8542/ratis/fec0b436-35e0-4f8a-bcaf-7d50588f7a38/current/log_inprogress_0
2019-06-18 00:07:57,773 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 00:07:57,774 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - d0698412-2401-4e6e-8dda-a701992d6473: close
2019-06-18 00:07:57,774 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - d0698412-2401-4e6e-8dda-a701992d6473: shutdown group-7D50588F7A38
2019-06-18 00:07:57,774 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-7D50588F7A38,id=d0698412-2401-4e6e-8dda-a701992d6473
2019-06-18 00:07:57,775 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - d0698412-2401-4e6e-8dda-a701992d6473: shutdown LeaderState
2019-06-18 00:07:57,775 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - d0698412-2401-4e6e-8dda-a701992d6473-PendingRequests: sendNotLeaderResponses
2019-06-18 00:07:57,776 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-d0698412-2401-4e6e-8dda-a701992d6473-group-7D50588F7A38: set stopIndex = 2
2019-06-18 00:07:57,776 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 00:07:57,777 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler88318c4a-a17e-4248-83a4-e2cc05be8542/ratis/fec0b436-35e0-4f8a-bcaf-7d50588f7a38/sm/snapshot.1_2
2019-06-18 00:07:57,777 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - d0698412-2401-4e6e-8dda-a701992d6473:group-7D50588F7A38 closes. The last applied log index is 2
2019-06-18 00:07:57,778 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - d0698412-2401-4e6e-8dda-a701992d6473-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 00:07:57,779 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - d0698412-2401-4e6e-8dda-a701992d6473-RaftLogWorker close()
2019-06-18 00:07:57,781 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - d0698412-2401-4e6e-8dda-a701992d6473: shutdown server with port 32979 now
2019-06-18 00:07:57,782 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - d0698412-2401-4e6e-8dda-a701992d6473: shutdown server with port 32979 successfully
2019-06-18 00:07:57,789 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 00:07:57,812 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler71ecffa2-f93b-4dfb-a23b-180d383baf13/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 00:07:57,812 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler71ecffa2-f93b-4dfb-a23b-180d383baf13/hdds to VolumeSet
2019-06-18 00:07:57,812 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@26a2f7f9
2019-06-18 00:07:57,813 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@26a2f7f9
2019-06-18 00:07:57,824 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 44091
2019-06-18 00:07:57,825 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 00:07:57,825 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 00:07:57,826 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 44091 (custom)
2019-06-18 00:07:57,826 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 00:07:57,826 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 00:07:57,827 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 00:07:57,827 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 00:07:57,827 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler71ecffa2-f93b-4dfb-a23b-180d383baf13/ratis] (custom)
2019-06-18 00:07:57,828 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 36469
2019-06-18 00:07:57,828 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 00:07:57,828 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 00:07:57,829 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 669a4d27-e22b-461d-8217-265b82f09aeb at port 44091
2019-06-18 00:07:57,842 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 669a4d27-e22b-461d-8217-265b82f09aeb: start RPC server
2019-06-18 00:07:57,843 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 669a4d27-e22b-461d-8217-265b82f09aeb: GrpcService started, listening on 0.0.0.0/0.0.0.0:44091
2019-06-18 00:07:57,853 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 669a4d27-e22b-461d-8217-265b82f09aeb: addNew group-B004594F8897:[669a4d27-e22b-461d-8217-265b82f09aeb:127.0.0.1:44091] returns group-B004594F8897:java.util.concurrent.CompletableFuture@141dd21b[Not completed]
2019-06-18 00:07:57,854 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 669a4d27-e22b-461d-8217-265b82f09aeb: new RaftServerImpl for group-B004594F8897:[669a4d27-e22b-461d-8217-265b82f09aeb:127.0.0.1:44091] with ContainerStateMachine:uninitialized
2019-06-18 00:07:57,854 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 00:07:57,854 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 00:07:57,854 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 00:07:57,855 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 00:07:57,855 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 669a4d27-e22b-461d-8217-265b82f09aeb:group-B004594F8897 ConfigurationManager, init=-1: [669a4d27-e22b-461d-8217-265b82f09aeb:127.0.0.1:44091], old=null, confs=<EMPTY_MAP>
2019-06-18 00:07:57,855 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler71ecffa2-f93b-4dfb-a23b-180d383baf13/ratis] (custom)
2019-06-18 00:07:57,855 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler71ecffa2-f93b-4dfb-a23b-180d383baf13/ratis/fb473c9f-9dd3-4586-98b3-b004594f8897 does not exist. Creating ...
2019-06-18 00:07:57,859 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler71ecffa2-f93b-4dfb-a23b-180d383baf13/ratis/fb473c9f-9dd3-4586-98b3-b004594f8897/in_use.lock acquired by nodename 4308@ozone-unit-076618677d3n9rt6-2628742320
2019-06-18 00:07:57,861 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler71ecffa2-f93b-4dfb-a23b-180d383baf13/ratis/fb473c9f-9dd3-4586-98b3-b004594f8897 has been successfully formatted.
2019-06-18 00:07:57,862 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 00:07:57,862 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 00:07:57,862 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 00:07:57,862 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 00:07:57,862 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 00:07:57,862 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 00:07:57,862 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 669a4d27-e22b-461d-8217-265b82f09aeb-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler71ecffa2-f93b-4dfb-a23b-180d383baf13/ratis/fb473c9f-9dd3-4586-98b3-b004594f8897
2019-06-18 00:07:57,862 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 00:07:57,862 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 00:07:57,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 00:07:57,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 00:07:57,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 00:07:57,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 00:07:57,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 00:07:57,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 00:07:57,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 00:07:57,863 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 00:07:57,864 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 00:07:57,864 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 00:07:57,864 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 00:07:57,864 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 669a4d27-e22b-461d-8217-265b82f09aeb: start group-B004594F8897
2019-06-18 00:07:57,864 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 669a4d27-e22b-461d-8217-265b82f09aeb:group-B004594F8897 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 00:07:57,864 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 669a4d27-e22b-461d-8217-265b82f09aeb: start FollowerState
2019-06-18 00:07:57,864 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B004594F8897,id=669a4d27-e22b-461d-8217-265b82f09aeb
2019-06-18 00:07:58,969 INFO  impl.FollowerState (FollowerState.java:run(101)) - 669a4d27-e22b-461d-8217-265b82f09aeb:group-B004594F8897 changes to CANDIDATE, lastRpcTime:1105, electionTimeout:1105ms
2019-06-18 00:07:58,970 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 669a4d27-e22b-461d-8217-265b82f09aeb: shutdown FollowerState
2019-06-18 00:07:58,970 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 669a4d27-e22b-461d-8217-265b82f09aeb:group-B004594F8897 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 00:07:58,970 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 669a4d27-e22b-461d-8217-265b82f09aeb: start LeaderElection
2019-06-18 00:07:58,974 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 669a4d27-e22b-461d-8217-265b82f09aeb:group-B004594F8897:LeaderElection3: begin an election at term 1 for -1: [669a4d27-e22b-461d-8217-265b82f09aeb:127.0.0.1:44091], old=null
2019-06-18 00:07:58,975 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 669a4d27-e22b-461d-8217-265b82f09aeb: shutdown LeaderElection
2019-06-18 00:07:58,975 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 669a4d27-e22b-461d-8217-265b82f09aeb:group-B004594F8897 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 00:07:58,975 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 669a4d27-e22b-461d-8217-265b82f09aeb:group-B004594F8897 change Leader from null to 669a4d27-e22b-461d-8217-265b82f09aeb at term 1 for becomeLeader, leader elected after 1112ms
2019-06-18 00:07:58,975 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 00:07:58,975 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 00:07:58,975 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 00:07:58,975 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 00:07:58,975 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 669a4d27-e22b-461d-8217-265b82f09aeb: start LeaderState
2019-06-18 00:07:58,976 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 669a4d27-e22b-461d-8217-265b82f09aeb-RaftLogWorker: Starting segment from index:0
2019-06-18 00:07:58,976 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 669a4d27-e22b-461d-8217-265b82f09aeb:group-B004594F8897 set configuration 0: [669a4d27-e22b-461d-8217-265b82f09aeb:127.0.0.1:44091], old=null at 0
2019-06-18 00:07:59,015 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 669a4d27-e22b-461d-8217-265b82f09aeb-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler71ecffa2-f93b-4dfb-a23b-180d383baf13/ratis/fb473c9f-9dd3-4586-98b3-b004594f8897/current/log_inprogress_0
2019-06-18 00:07:59,912 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 4001852873156781581 is closed with bcsId 0.
2019-06-18 00:07:59,913 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 00:07:59,913 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 669a4d27-e22b-461d-8217-265b82f09aeb: close
2019-06-18 00:07:59,913 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 669a4d27-e22b-461d-8217-265b82f09aeb: shutdown group-B004594F8897
2019-06-18 00:07:59,914 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B004594F8897,id=669a4d27-e22b-461d-8217-265b82f09aeb
2019-06-18 00:07:59,914 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 669a4d27-e22b-461d-8217-265b82f09aeb: shutdown LeaderState
2019-06-18 00:07:59,914 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 669a4d27-e22b-461d-8217-265b82f09aeb-PendingRequests: sendNotLeaderResponses
2019-06-18 00:07:59,915 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-669a4d27-e22b-461d-8217-265b82f09aeb-group-B004594F8897: set stopIndex = 2
2019-06-18 00:07:59,915 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 00:07:59,916 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler71ecffa2-f93b-4dfb-a23b-180d383baf13/ratis/fb473c9f-9dd3-4586-98b3-b004594f8897/sm/snapshot.1_2
2019-06-18 00:07:59,916 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 669a4d27-e22b-461d-8217-265b82f09aeb:group-B004594F8897 closes. The last applied log index is 2
2019-06-18 00:07:59,916 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 669a4d27-e22b-461d-8217-265b82f09aeb-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 00:07:59,917 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 669a4d27-e22b-461d-8217-265b82f09aeb-RaftLogWorker close()
2019-06-18 00:07:59,918 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 669a4d27-e22b-461d-8217-265b82f09aeb: shutdown server with port 44091 now
2019-06-18 00:07:59,921 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 669a4d27-e22b-461d-8217-265b82f09aeb: shutdown server with port 44091 successfully
2019-06-18 00:07:59,941 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 00:07:59,971 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9455b8ff-569c-4a47-94f1-b15b90a11b96/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 00:07:59,972 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9455b8ff-569c-4a47-94f1-b15b90a11b96/hdds to VolumeSet
2019-06-18 00:07:59,972 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@66153688
2019-06-18 00:07:59,975 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@66153688
2019-06-18 00:07:59,987 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 37165
2019-06-18 00:07:59,988 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 00:07:59,989 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 00:07:59,989 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 37165 (custom)
2019-06-18 00:07:59,990 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 00:07:59,990 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 00:07:59,990 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 00:07:59,990 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 00:07:59,991 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9455b8ff-569c-4a47-94f1-b15b90a11b96/ratis] (custom)
2019-06-18 00:07:59,992 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 37635
2019-06-18 00:07:59,992 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 00:07:59,992 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 00:07:59,992 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis a91e5876-8259-46d8-9cd4-82d58af4ce2c at port 37165
2019-06-18 00:08:00,002 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: start RPC server
2019-06-18 00:08:00,003 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: GrpcService started, listening on 0.0.0.0/0.0.0.0:37165
Jun 18, 2019 12:08:00 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:32979} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 18, 2019 12:08:00 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:44091} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-18 00:08:00,016 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: addNew group-EABBB9EAD7AA:[a91e5876-8259-46d8-9cd4-82d58af4ce2c:127.0.0.1:37165] returns group-EABBB9EAD7AA:java.util.concurrent.CompletableFuture@6eaf626[Not completed]
2019-06-18 00:08:00,016 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: new RaftServerImpl for group-EABBB9EAD7AA:[a91e5876-8259-46d8-9cd4-82d58af4ce2c:127.0.0.1:37165] with ContainerStateMachine:uninitialized
2019-06-18 00:08:00,017 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 00:08:00,017 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 00:08:00,017 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 00:08:00,017 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 00:08:00,017 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c:group-EABBB9EAD7AA ConfigurationManager, init=-1: [a91e5876-8259-46d8-9cd4-82d58af4ce2c:127.0.0.1:37165], old=null, confs=<EMPTY_MAP>
2019-06-18 00:08:00,017 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9455b8ff-569c-4a47-94f1-b15b90a11b96/ratis] (custom)
2019-06-18 00:08:00,018 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9455b8ff-569c-4a47-94f1-b15b90a11b96/ratis/dbe9d53b-1e9d-4016-92ce-eabbb9ead7aa does not exist. Creating ...
2019-06-18 00:08:00,021 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9455b8ff-569c-4a47-94f1-b15b90a11b96/ratis/dbe9d53b-1e9d-4016-92ce-eabbb9ead7aa/in_use.lock acquired by nodename 4308@ozone-unit-076618677d3n9rt6-2628742320
2019-06-18 00:08:00,023 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9455b8ff-569c-4a47-94f1-b15b90a11b96/ratis/dbe9d53b-1e9d-4016-92ce-eabbb9ead7aa has been successfully formatted.
2019-06-18 00:08:00,023 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 00:08:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 00:08:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 00:08:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 00:08:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 00:08:00,024 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 00:08:00,024 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new a91e5876-8259-46d8-9cd4-82d58af4ce2c-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9455b8ff-569c-4a47-94f1-b15b90a11b96/ratis/dbe9d53b-1e9d-4016-92ce-eabbb9ead7aa
2019-06-18 00:08:00,024 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 00:08:00,024 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 00:08:00,024 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 00:08:00,024 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 00:08:00,024 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 00:08:00,024 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 00:08:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 00:08:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 00:08:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 00:08:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 00:08:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 00:08:00,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 00:08:00,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 00:08:00,026 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: start group-EABBB9EAD7AA
2019-06-18 00:08:00,026 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c:group-EABBB9EAD7AA changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 00:08:00,026 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: start FollowerState
2019-06-18 00:08:00,027 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-EABBB9EAD7AA,id=a91e5876-8259-46d8-9cd4-82d58af4ce2c
2019-06-18 00:08:01,147 INFO  impl.FollowerState (FollowerState.java:run(101)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c:group-EABBB9EAD7AA changes to CANDIDATE, lastRpcTime:1120, electionTimeout:1120ms
2019-06-18 00:08:01,147 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: shutdown FollowerState
2019-06-18 00:08:01,147 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c:group-EABBB9EAD7AA changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 00:08:01,147 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: start LeaderElection
2019-06-18 00:08:01,151 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c:group-EABBB9EAD7AA:LeaderElection4: begin an election at term 1 for -1: [a91e5876-8259-46d8-9cd4-82d58af4ce2c:127.0.0.1:37165], old=null
2019-06-18 00:08:01,151 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: shutdown LeaderElection
2019-06-18 00:08:01,151 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c:group-EABBB9EAD7AA changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 00:08:01,151 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c:group-EABBB9EAD7AA change Leader from null to a91e5876-8259-46d8-9cd4-82d58af4ce2c at term 1 for becomeLeader, leader elected after 1127ms
2019-06-18 00:08:01,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 00:08:01,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 00:08:01,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 00:08:01,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 00:08:01,152 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: start LeaderState
2019-06-18 00:08:01,152 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c-RaftLogWorker: Starting segment from index:0
2019-06-18 00:08:01,152 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c:group-EABBB9EAD7AA set configuration 0: [a91e5876-8259-46d8-9cd4-82d58af4ce2c:127.0.0.1:37165], old=null at 0
2019-06-18 00:08:01,187 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9455b8ff-569c-4a47-94f1-b15b90a11b96/ratis/dbe9d53b-1e9d-4016-92ce-eabbb9ead7aa/current/log_inprogress_0
2019-06-18 00:08:02,065 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 923963303054089205 is closed with bcsId 0.
2019-06-18 00:08:02,066 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 00:08:02,066 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: close
2019-06-18 00:08:02,066 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: shutdown group-EABBB9EAD7AA
2019-06-18 00:08:02,066 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-EABBB9EAD7AA,id=a91e5876-8259-46d8-9cd4-82d58af4ce2c
2019-06-18 00:08:02,067 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: shutdown LeaderState
2019-06-18 00:08:02,067 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c-PendingRequests: sendNotLeaderResponses
2019-06-18 00:08:02,068 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 00:08:02,068 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9455b8ff-569c-4a47-94f1-b15b90a11b96/ratis/dbe9d53b-1e9d-4016-92ce-eabbb9ead7aa/sm/snapshot.1_2
2019-06-18 00:08:02,068 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-a91e5876-8259-46d8-9cd4-82d58af4ce2c-group-EABBB9EAD7AA: set stopIndex = 2
2019-06-18 00:08:02,069 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c:group-EABBB9EAD7AA closes. The last applied log index is 2
2019-06-18 00:08:02,069 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 00:08:02,069 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c-RaftLogWorker close()
2019-06-18 00:08:02,070 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: shutdown server with port 37165 now
2019-06-18 00:08:02,072 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - a91e5876-8259-46d8-9cd4-82d58af4ce2c: shutdown server with port 37165 successfully
2019-06-18 00:08:02,074 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 00:08:02,099 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera8dc0465-4ed2-4f07-a7ed-4b88303c4bc4/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 00:08:02,099 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera8dc0465-4ed2-4f07-a7ed-4b88303c4bc4/hdds to VolumeSet
2019-06-18 00:08:02,100 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1ac45389
2019-06-18 00:08:02,100 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1ac45389
2019-06-18 00:08:02,112 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 41655
2019-06-18 00:08:02,113 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 00:08:02,114 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 00:08:02,114 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 41655 (custom)
2019-06-18 00:08:02,114 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 00:08:02,114 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 00:08:02,115 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 00:08:02,115 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 00:08:02,115 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera8dc0465-4ed2-4f07-a7ed-4b88303c4bc4/ratis] (custom)
2019-06-18 00:08:02,116 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 37239
2019-06-18 00:08:02,116 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 00:08:02,116 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 00:08:02,117 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 8651dac3-2222-4ab2-a74d-ad209bca6771 at port 41655
2019-06-18 00:08:02,132 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: start RPC server
2019-06-18 00:08:02,133 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: GrpcService started, listening on 0.0.0.0/0.0.0.0:41655
2019-06-18 00:08:02,144 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: addNew group-CFC2243F609C:[8651dac3-2222-4ab2-a74d-ad209bca6771:127.0.0.1:41655] returns group-CFC2243F609C:java.util.concurrent.CompletableFuture@1dfc30d3[Not completed]
2019-06-18 00:08:02,144 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: new RaftServerImpl for group-CFC2243F609C:[8651dac3-2222-4ab2-a74d-ad209bca6771:127.0.0.1:41655] with ContainerStateMachine:uninitialized
2019-06-18 00:08:02,145 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 00:08:02,145 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 00:08:02,145 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 00:08:02,145 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 00:08:02,145 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 8651dac3-2222-4ab2-a74d-ad209bca6771:group-CFC2243F609C ConfigurationManager, init=-1: [8651dac3-2222-4ab2-a74d-ad209bca6771:127.0.0.1:41655], old=null, confs=<EMPTY_MAP>
2019-06-18 00:08:02,145 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera8dc0465-4ed2-4f07-a7ed-4b88303c4bc4/ratis] (custom)
2019-06-18 00:08:02,146 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera8dc0465-4ed2-4f07-a7ed-4b88303c4bc4/ratis/dceeda4e-4e24-4dab-aa4c-cfc2243f609c does not exist. Creating ...
2019-06-18 00:08:02,148 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera8dc0465-4ed2-4f07-a7ed-4b88303c4bc4/ratis/dceeda4e-4e24-4dab-aa4c-cfc2243f609c/in_use.lock acquired by nodename 4308@ozone-unit-076618677d3n9rt6-2628742320
2019-06-18 00:08:02,151 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera8dc0465-4ed2-4f07-a7ed-4b88303c4bc4/ratis/dceeda4e-4e24-4dab-aa4c-cfc2243f609c has been successfully formatted.
2019-06-18 00:08:02,151 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 00:08:02,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 00:08:02,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 00:08:02,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 00:08:02,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 00:08:02,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 00:08:02,151 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 8651dac3-2222-4ab2-a74d-ad209bca6771-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera8dc0465-4ed2-4f07-a7ed-4b88303c4bc4/ratis/dceeda4e-4e24-4dab-aa4c-cfc2243f609c
2019-06-18 00:08:02,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 00:08:02,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 00:08:02,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 00:08:02,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 00:08:02,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 00:08:02,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 00:08:02,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 00:08:02,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 00:08:02,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 00:08:02,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 00:08:02,153 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 00:08:02,153 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 00:08:02,153 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 00:08:02,153 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: start group-CFC2243F609C
2019-06-18 00:08:02,153 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 8651dac3-2222-4ab2-a74d-ad209bca6771:group-CFC2243F609C changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 00:08:02,153 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: start FollowerState
2019-06-18 00:08:02,153 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-CFC2243F609C,id=8651dac3-2222-4ab2-a74d-ad209bca6771
2019-06-18 00:08:03,280 INFO  impl.FollowerState (FollowerState.java:run(101)) - 8651dac3-2222-4ab2-a74d-ad209bca6771:group-CFC2243F609C changes to CANDIDATE, lastRpcTime:1127, electionTimeout:1127ms
2019-06-18 00:08:03,281 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: shutdown FollowerState
2019-06-18 00:08:03,281 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 8651dac3-2222-4ab2-a74d-ad209bca6771:group-CFC2243F609C changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 00:08:03,281 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: start LeaderElection
2019-06-18 00:08:03,285 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 8651dac3-2222-4ab2-a74d-ad209bca6771:group-CFC2243F609C:LeaderElection5: begin an election at term 1 for -1: [8651dac3-2222-4ab2-a74d-ad209bca6771:127.0.0.1:41655], old=null
2019-06-18 00:08:03,285 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: shutdown LeaderElection
2019-06-18 00:08:03,285 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 8651dac3-2222-4ab2-a74d-ad209bca6771:group-CFC2243F609C changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 00:08:03,285 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 8651dac3-2222-4ab2-a74d-ad209bca6771:group-CFC2243F609C change Leader from null to 8651dac3-2222-4ab2-a74d-ad209bca6771 at term 1 for becomeLeader, leader elected after 1134ms
2019-06-18 00:08:03,285 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 00:08:03,285 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 00:08:03,285 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 00:08:03,286 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 00:08:03,286 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: start LeaderState
2019-06-18 00:08:03,286 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 8651dac3-2222-4ab2-a74d-ad209bca6771-RaftLogWorker: Starting segment from index:0
2019-06-18 00:08:03,287 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 8651dac3-2222-4ab2-a74d-ad209bca6771:group-CFC2243F609C set configuration 0: [8651dac3-2222-4ab2-a74d-ad209bca6771:127.0.0.1:41655], old=null at 0
2019-06-18 00:08:03,322 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 8651dac3-2222-4ab2-a74d-ad209bca6771-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera8dc0465-4ed2-4f07-a7ed-4b88303c4bc4/ratis/dceeda4e-4e24-4dab-aa4c-cfc2243f609c/current/log_inprogress_0
2019-06-18 00:08:04,192 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 3880202743854742541 is closed with bcsId 0.
2019-06-18 00:08:04,192 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 00:08:04,192 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: close
2019-06-18 00:08:04,192 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: shutdown group-CFC2243F609C
2019-06-18 00:08:04,193 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-CFC2243F609C,id=8651dac3-2222-4ab2-a74d-ad209bca6771
2019-06-18 00:08:04,193 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: shutdown LeaderState
2019-06-18 00:08:04,193 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 8651dac3-2222-4ab2-a74d-ad209bca6771-PendingRequests: sendNotLeaderResponses
2019-06-18 00:08:04,194 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-8651dac3-2222-4ab2-a74d-ad209bca6771-group-CFC2243F609C: set stopIndex = 4
2019-06-18 00:08:04,194 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-18 00:08:04,195 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera8dc0465-4ed2-4f07-a7ed-4b88303c4bc4/ratis/dceeda4e-4e24-4dab-aa4c-cfc2243f609c/sm/snapshot.1_4
2019-06-18 00:08:04,195 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 8651dac3-2222-4ab2-a74d-ad209bca6771:group-CFC2243F609C closes. The last applied log index is 4
2019-06-18 00:08:04,195 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 8651dac3-2222-4ab2-a74d-ad209bca6771-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 00:08:04,196 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 8651dac3-2222-4ab2-a74d-ad209bca6771-RaftLogWorker close()
2019-06-18 00:08:04,197 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: shutdown server with port 41655 now
2019-06-18 00:08:04,198 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 8651dac3-2222-4ab2-a74d-ad209bca6771: shutdown server with port 41655 successfully
2019-06-18 00:08:04,202 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
