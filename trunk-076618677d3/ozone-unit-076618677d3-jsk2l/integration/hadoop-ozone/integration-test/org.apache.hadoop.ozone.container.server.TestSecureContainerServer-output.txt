2019-06-15 15:59:56,290 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-15 15:59:56,370 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-06-15 15:59:56,431 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 15:59:56,439 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 34051 (custom)
2019-06-15 15:59:56,440 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 15:59:56,441 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 15:59:56,442 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 15:59:56,443 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 15:59:56,481 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/d04b0569-799a-4907-86e5-d752fc3ffd03] (custom)
2019-06-15 15:59:56,486 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis d04b0569-799a-4907-86e5-d752fc3ffd03 at port 34051
2019-06-15 15:59:56,499 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - d04b0569-799a-4907-86e5-d752fc3ffd03: start RPC server
2019-06-15 15:59:56,500 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - d04b0569-799a-4907-86e5-d752fc3ffd03: GrpcService started, listening on 0.0.0.0/0.0.0.0:34051
2019-06-15 15:59:56,582 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - d04b0569-799a-4907-86e5-d752fc3ffd03: addNew group-2D950722703E:[d04b0569-799a-4907-86e5-d752fc3ffd03:0.0.0.0:34051] returns group-2D950722703E:java.util.concurrent.CompletableFuture@3cd6af92[Not completed]
2019-06-15 15:59:56,588 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - d04b0569-799a-4907-86e5-d752fc3ffd03: new RaftServerImpl for group-2D950722703E:[d04b0569-799a-4907-86e5-d752fc3ffd03:0.0.0.0:34051] with ContainerStateMachine:uninitialized
2019-06-15 15:59:56,589 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 15:59:56,589 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 15:59:56,590 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 15:59:56,591 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 15:59:56,595 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - d04b0569-799a-4907-86e5-d752fc3ffd03:group-2D950722703E ConfigurationManager, init=-1: [d04b0569-799a-4907-86e5-d752fc3ffd03:0.0.0.0:34051], old=null, confs=<EMPTY_MAP>
2019-06-15 15:59:56,595 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/d04b0569-799a-4907-86e5-d752fc3ffd03] (custom)
2019-06-15 15:59:56,599 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/d04b0569-799a-4907-86e5-d752fc3ffd03/5d82e986-14d5-4eb3-946c-2d950722703e does not exist. Creating ...
2019-06-15 15:59:56,607 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/d04b0569-799a-4907-86e5-d752fc3ffd03/5d82e986-14d5-4eb3-946c-2d950722703e/in_use.lock acquired by nodename 28214@ozone-unit-076618677d3-jsk2l-1196283018
2019-06-15 15:59:56,613 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/d04b0569-799a-4907-86e5-d752fc3ffd03/5d82e986-14d5-4eb3-946c-2d950722703e has been successfully formatted.
2019-06-15 15:59:56,615 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 15:59:56,615 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 15:59:56,616 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 15:59:56,618 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 15:59:56,620 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 15:59:56,623 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 15:59:56,625 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new d04b0569-799a-4907-86e5-d752fc3ffd03-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/d04b0569-799a-4907-86e5-d752fc3ffd03/5d82e986-14d5-4eb3-946c-2d950722703e
2019-06-15 15:59:56,625 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 15:59:56,626 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 15:59:56,627 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 15:59:56,627 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 15:59:56,628 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 15:59:56,628 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 15:59:56,629 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 15:59:56,629 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 15:59:56,630 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 15:59:56,632 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 15:59:56,635 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 15:59:56,636 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 15:59:56,636 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 15:59:56,649 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - d04b0569-799a-4907-86e5-d752fc3ffd03: start group-2D950722703E
2019-06-15 15:59:56,650 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - d04b0569-799a-4907-86e5-d752fc3ffd03:group-2D950722703E changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 15:59:56,650 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - d04b0569-799a-4907-86e5-d752fc3ffd03: start FollowerState
2019-06-15 15:59:56,690 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2D950722703E,id=d04b0569-799a-4907-86e5-d752fc3ffd03
2019-06-15 15:59:56,739 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-61EC2F66BB30->d04b0569-799a-4907-86e5-d752fc3ffd03: receive RaftClientReply:client-61EC2F66BB30->d04b0569-799a-4907-86e5-d752fc3ffd03@group-2D950722703E, cid=1, FAILED org.apache.ratis.protocol.NotLeaderException: Server d04b0569-799a-4907-86e5-d752fc3ffd03 is not the leader (null). Request must be sent to leader., logIndex=0, commits[d04b0569-799a-4907-86e5-d752fc3ffd03:c-1]
2019-06-15 15:59:57,726 INFO  impl.FollowerState (FollowerState.java:run(101)) - d04b0569-799a-4907-86e5-d752fc3ffd03:group-2D950722703E changes to CANDIDATE, lastRpcTime:1075, electionTimeout:1075ms
2019-06-15 15:59:57,726 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - d04b0569-799a-4907-86e5-d752fc3ffd03: shutdown FollowerState
2019-06-15 15:59:57,726 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - d04b0569-799a-4907-86e5-d752fc3ffd03:group-2D950722703E changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-15 15:59:57,728 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - d04b0569-799a-4907-86e5-d752fc3ffd03: start LeaderElection
2019-06-15 15:59:57,731 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - d04b0569-799a-4907-86e5-d752fc3ffd03:group-2D950722703E:LeaderElection1: begin an election at term 1 for -1: [d04b0569-799a-4907-86e5-d752fc3ffd03:0.0.0.0:34051], old=null
2019-06-15 15:59:57,731 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - d04b0569-799a-4907-86e5-d752fc3ffd03: shutdown LeaderElection
2019-06-15 15:59:57,732 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - d04b0569-799a-4907-86e5-d752fc3ffd03:group-2D950722703E changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-15 15:59:57,732 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - d04b0569-799a-4907-86e5-d752fc3ffd03:group-2D950722703E change Leader from null to d04b0569-799a-4907-86e5-d752fc3ffd03 at term 1 for becomeLeader, leader elected after 1116ms
2019-06-15 15:59:57,735 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-15 15:59:57,735 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-15 15:59:57,737 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-15 15:59:57,737 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-15 15:59:57,746 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - d04b0569-799a-4907-86e5-d752fc3ffd03: start LeaderState
2019-06-15 15:59:57,761 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - d04b0569-799a-4907-86e5-d752fc3ffd03-RaftLogWorker: Starting segment from index:0
2019-06-15 15:59:57,770 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - d04b0569-799a-4907-86e5-d752fc3ffd03:group-2D950722703E set configuration 0: [d04b0569-799a-4907-86e5-d752fc3ffd03:0.0.0.0:34051], old=null at 0
2019-06-15 15:59:57,890 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - d04b0569-799a-4907-86e5-d752fc3ffd03-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/d04b0569-799a-4907-86e5-d752fc3ffd03/5d82e986-14d5-4eb3-946c-2d950722703e/current/log_inprogress_0
2019-06-15 15:59:58,792 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-15 15:59:58,797 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-61EC2F66BB30->d04b0569-799a-4907-86e5-d752fc3ffd03: receive RaftClientReply:client-61EC2F66BB30->d04b0569-799a-4907-86e5-d752fc3ffd03@group-2D950722703E, cid=1, SUCCESS, logIndex=1, commits[d04b0569-799a-4907-86e5-d752fc3ffd03:c2]
2019-06-15 15:59:58,798 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-15 15:59:58,812 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-AFA1740C25C9->d04b0569-799a-4907-86e5-d752fc3ffd03: receive RaftClientReply:client-AFA1740C25C9->d04b0569-799a-4907-86e5-d752fc3ffd03@group-2D950722703E, cid=2, SUCCESS, logIndex=3, commits[d04b0569-799a-4907-86e5-d752fc3ffd03:c4]
2019-06-15 15:59:58,814 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - d04b0569-799a-4907-86e5-d752fc3ffd03: close
2019-06-15 15:59:58,816 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - d04b0569-799a-4907-86e5-d752fc3ffd03: shutdown group-2D950722703E
2019-06-15 15:59:58,816 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2D950722703E,id=d04b0569-799a-4907-86e5-d752fc3ffd03
2019-06-15 15:59:58,817 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - d04b0569-799a-4907-86e5-d752fc3ffd03: shutdown LeaderState
2019-06-15 15:59:58,817 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - d04b0569-799a-4907-86e5-d752fc3ffd03-PendingRequests: sendNotLeaderResponses
2019-06-15 15:59:58,820 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-15 15:59:58,820 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-d04b0569-799a-4907-86e5-d752fc3ffd03-group-2D950722703E: set stopIndex = 4
2019-06-15 15:59:58,820 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-15 15:59:58,821 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/d04b0569-799a-4907-86e5-d752fc3ffd03/5d82e986-14d5-4eb3-946c-2d950722703e/sm/snapshot.1_4
2019-06-15 15:59:58,827 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - d04b0569-799a-4907-86e5-d752fc3ffd03:group-2D950722703E closes. The last applied log index is 4
2019-06-15 15:59:58,895 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - d04b0569-799a-4907-86e5-d752fc3ffd03-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 15:59:58,897 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - d04b0569-799a-4907-86e5-d752fc3ffd03-RaftLogWorker close()
2019-06-15 15:59:58,899 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - d04b0569-799a-4907-86e5-d752fc3ffd03: shutdown server with port 34051 now
2019-06-15 15:59:58,901 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - d04b0569-799a-4907-86e5-d752fc3ffd03: shutdown server with port 34051 successfully
2019-06-15 15:59:58,903 INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(109)) - dfs.container.ratis.rpc.type = GRPC
2019-06-15 15:59:58,905 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 15:59:58,905 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 39771 (custom)
2019-06-15 15:59:58,906 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 15:59:58,906 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 15:59:58,906 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 15:59:58,907 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 15:59:58,908 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/3d396b34-1292-4043-817b-b31e80548a68] (custom)
2019-06-15 15:59:58,909 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 3d396b34-1292-4043-817b-b31e80548a68 at port 39771
2019-06-15 15:59:58,914 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 3d396b34-1292-4043-817b-b31e80548a68: start RPC server
2019-06-15 15:59:58,916 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 3d396b34-1292-4043-817b-b31e80548a68: GrpcService started, listening on 0.0.0.0/0.0.0.0:39771
Jun 15, 2019 3:59:58 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=9, target=0.0.0.0:45383} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connectToDatanode(XceiverClientGrpc.java:163)
	at org.apache.hadoop.hdds.scm.XceiverClientGrpc.connect(XceiverClientGrpc.java:120)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:227)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServer(TestSecureContainerServer.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 15, 2019 3:59:58 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=17, target=0.0.0.0:34051} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.RatisTestHelper.initXceiverServerRatis(RatisTestHelper.java:135)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.lambda$runTestClientServerRatis$4(TestSecureContainerServer.java:159)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServer(TestSecureContainerServer.java:184)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.runTestClientServerRatis(TestSecureContainerServer.java:155)
	at org.apache.hadoop.ozone.container.server.TestSecureContainerServer.testClientServerRatisGrpc(TestSecureContainerServer.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-15 15:59:58,940 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 3d396b34-1292-4043-817b-b31e80548a68: addNew group-B4924D4E4A31:[485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581] returns group-B4924D4E4A31:java.util.concurrent.CompletableFuture@3df34a6a[Not completed]
2019-06-15 15:59:58,940 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 3d396b34-1292-4043-817b-b31e80548a68: new RaftServerImpl for group-B4924D4E4A31:[485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581] with ContainerStateMachine:uninitialized
2019-06-15 15:59:58,941 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 15:59:58,941 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 15:59:58,941 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 15:59:58,941 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 15:59:58,941 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 3d396b34-1292-4043-817b-b31e80548a68:group-B4924D4E4A31 ConfigurationManager, init=-1: [485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581], old=null, confs=<EMPTY_MAP>
2019-06-15 15:59:58,941 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/3d396b34-1292-4043-817b-b31e80548a68] (custom)
2019-06-15 15:59:58,942 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/3d396b34-1292-4043-817b-b31e80548a68/906255ed-1c3e-4087-b467-b4924d4e4a31 does not exist. Creating ...
2019-06-15 15:59:58,944 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/3d396b34-1292-4043-817b-b31e80548a68/906255ed-1c3e-4087-b467-b4924d4e4a31/in_use.lock acquired by nodename 28214@ozone-unit-076618677d3-jsk2l-1196283018
2019-06-15 15:59:58,946 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/3d396b34-1292-4043-817b-b31e80548a68/906255ed-1c3e-4087-b467-b4924d4e4a31 has been successfully formatted.
2019-06-15 15:59:58,946 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 15:59:58,946 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 15:59:58,947 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 15:59:58,947 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 15:59:58,947 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 15:59:58,947 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 15:59:58,947 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 3d396b34-1292-4043-817b-b31e80548a68-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/3d396b34-1292-4043-817b-b31e80548a68/906255ed-1c3e-4087-b467-b4924d4e4a31
2019-06-15 15:59:58,947 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 15:59:58,947 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 15:59:58,947 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 15:59:58,948 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 15:59:58,948 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 15:59:58,948 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 15:59:58,948 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 15:59:58,948 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 15:59:58,948 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 15:59:58,948 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 15:59:58,949 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 15:59:58,949 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 15:59:58,949 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 15:59:58,950 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 3d396b34-1292-4043-817b-b31e80548a68: start group-B4924D4E4A31
2019-06-15 15:59:58,950 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 3d396b34-1292-4043-817b-b31e80548a68:group-B4924D4E4A31 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 15:59:58,950 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 3d396b34-1292-4043-817b-b31e80548a68: start FollowerState
2019-06-15 15:59:58,951 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B4924D4E4A31,id=3d396b34-1292-4043-817b-b31e80548a68
2019-06-15 15:59:58,956 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 15:59:58,956 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 41117 (custom)
2019-06-15 15:59:58,956 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 15:59:58,956 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 15:59:58,957 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 15:59:58,957 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 15:59:58,957 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/485232cf-9cd3-4256-81cb-e5ab85fb332e] (custom)
2019-06-15 15:59:58,957 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 485232cf-9cd3-4256-81cb-e5ab85fb332e at port 41117
2019-06-15 15:59:58,963 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: start RPC server
2019-06-15 15:59:58,965 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: GrpcService started, listening on 0.0.0.0/0.0.0.0:41117
2019-06-15 15:59:58,987 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: addNew group-B4924D4E4A31:[485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581] returns group-B4924D4E4A31:java.util.concurrent.CompletableFuture@7adb000e[Not completed]
2019-06-15 15:59:58,987 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: new RaftServerImpl for group-B4924D4E4A31:[485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581] with ContainerStateMachine:uninitialized
2019-06-15 15:59:58,988 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 15:59:58,988 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 15:59:58,988 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 15:59:58,988 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 15:59:58,988 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e:group-B4924D4E4A31 ConfigurationManager, init=-1: [485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581], old=null, confs=<EMPTY_MAP>
2019-06-15 15:59:58,988 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/485232cf-9cd3-4256-81cb-e5ab85fb332e] (custom)
2019-06-15 15:59:58,989 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/485232cf-9cd3-4256-81cb-e5ab85fb332e/906255ed-1c3e-4087-b467-b4924d4e4a31 does not exist. Creating ...
2019-06-15 15:59:58,991 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/485232cf-9cd3-4256-81cb-e5ab85fb332e/906255ed-1c3e-4087-b467-b4924d4e4a31/in_use.lock acquired by nodename 28214@ozone-unit-076618677d3-jsk2l-1196283018
2019-06-15 15:59:58,993 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/485232cf-9cd3-4256-81cb-e5ab85fb332e/906255ed-1c3e-4087-b467-b4924d4e4a31 has been successfully formatted.
2019-06-15 15:59:58,993 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 15:59:58,993 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 15:59:58,994 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 15:59:58,994 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 15:59:58,994 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 15:59:58,994 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 15:59:58,994 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 485232cf-9cd3-4256-81cb-e5ab85fb332e-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/485232cf-9cd3-4256-81cb-e5ab85fb332e/906255ed-1c3e-4087-b467-b4924d4e4a31
2019-06-15 15:59:58,994 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 15:59:58,994 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 15:59:58,995 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 15:59:58,995 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 15:59:58,995 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 15:59:58,995 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 15:59:58,995 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 15:59:58,995 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 15:59:58,995 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 15:59:58,996 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 15:59:58,996 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 15:59:58,996 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 15:59:58,996 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 15:59:58,996 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: start group-B4924D4E4A31
2019-06-15 15:59:58,996 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e:group-B4924D4E4A31 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 15:59:58,997 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: start FollowerState
2019-06-15 15:59:58,997 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B4924D4E4A31,id=485232cf-9cd3-4256-81cb-e5ab85fb332e
2019-06-15 15:59:59,000 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 15:59:59,001 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 45581 (custom)
2019-06-15 15:59:59,001 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 15:59:59,001 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 15:59:59,001 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 15:59:59,001 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 15:59:59,002 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d03787b-4b53-4a8b-ba2b-6ea838a1dca1] (custom)
2019-06-15 15:59:59,002 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1 at port 45581
2019-06-15 15:59:59,007 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: start RPC server
2019-06-15 15:59:59,009 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: GrpcService started, listening on 0.0.0.0/0.0.0.0:45581
2019-06-15 15:59:59,027 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: addNew group-B4924D4E4A31:[485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581] returns group-B4924D4E4A31:java.util.concurrent.CompletableFuture@43a65bd1[Not completed]
2019-06-15 15:59:59,027 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: new RaftServerImpl for group-B4924D4E4A31:[485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581] with ContainerStateMachine:uninitialized
2019-06-15 15:59:59,028 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 15:59:59,028 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 15:59:59,028 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 15:59:59,028 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 15:59:59,028 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:group-B4924D4E4A31 ConfigurationManager, init=-1: [485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581], old=null, confs=<EMPTY_MAP>
2019-06-15 15:59:59,028 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d03787b-4b53-4a8b-ba2b-6ea838a1dca1] (custom)
2019-06-15 15:59:59,029 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d03787b-4b53-4a8b-ba2b-6ea838a1dca1/906255ed-1c3e-4087-b467-b4924d4e4a31 does not exist. Creating ...
2019-06-15 15:59:59,031 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d03787b-4b53-4a8b-ba2b-6ea838a1dca1/906255ed-1c3e-4087-b467-b4924d4e4a31/in_use.lock acquired by nodename 28214@ozone-unit-076618677d3-jsk2l-1196283018
2019-06-15 15:59:59,033 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d03787b-4b53-4a8b-ba2b-6ea838a1dca1/906255ed-1c3e-4087-b467-b4924d4e4a31 has been successfully formatted.
2019-06-15 15:59:59,033 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 15:59:59,033 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 15:59:59,033 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 15:59:59,033 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 15:59:59,033 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 15:59:59,033 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 15:59:59,033 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1-RaftLogWorker for Storage Directory /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d03787b-4b53-4a8b-ba2b-6ea838a1dca1/906255ed-1c3e-4087-b467-b4924d4e4a31
2019-06-15 15:59:59,034 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 15:59:59,034 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 15:59:59,034 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 15:59:59,034 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 15:59:59,034 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 15:59:59,034 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 15:59:59,034 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 15:59:59,034 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 15:59:59,035 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 15:59:59,035 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 15:59:59,035 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 15:59:59,035 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 15:59:59,035 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 15:59:59,035 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: start group-B4924D4E4A31
2019-06-15 15:59:59,035 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:group-B4924D4E4A31 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 15:59:59,036 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: start FollowerState
2019-06-15 15:59:59,037 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B4924D4E4A31,id=1d03787b-4b53-4a8b-ba2b-6ea838a1dca1
2019-06-15 15:59:59,049 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-FE9BC209EBD8->3d396b34-1292-4043-817b-b31e80548a68: receive RaftClientReply:client-FE9BC209EBD8->3d396b34-1292-4043-817b-b31e80548a68@group-B4924D4E4A31, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server 3d396b34-1292-4043-817b-b31e80548a68 is not the leader (1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581). Request must be sent to leader., logIndex=0, commits[3d396b34-1292-4043-817b-b31e80548a68:c-1]
2019-06-15 15:59:59,051 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-15 16:00:00,029 INFO  impl.FollowerState (FollowerState.java:run(101)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e:group-B4924D4E4A31 changes to CANDIDATE, lastRpcTime:1032, electionTimeout:1032ms
2019-06-15 16:00:00,030 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: shutdown FollowerState
2019-06-15 16:00:00,030 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e:group-B4924D4E4A31 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-15 16:00:00,030 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: start LeaderElection
2019-06-15 16:00:00,031 INFO  impl.FollowerState (FollowerState.java:run(101)) - 3d396b34-1292-4043-817b-b31e80548a68:group-B4924D4E4A31 changes to CANDIDATE, lastRpcTime:1081, electionTimeout:1081ms
2019-06-15 16:00:00,031 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 3d396b34-1292-4043-817b-b31e80548a68: shutdown FollowerState
2019-06-15 16:00:00,031 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 3d396b34-1292-4043-817b-b31e80548a68:group-B4924D4E4A31 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-15 16:00:00,031 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 3d396b34-1292-4043-817b-b31e80548a68: start LeaderElection
2019-06-15 16:00:00,033 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e:group-B4924D4E4A31:LeaderElection2: begin an election at term 1 for -1: [485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581], old=null
2019-06-15 16:00:00,035 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 3d396b34-1292-4043-817b-b31e80548a68:group-B4924D4E4A31:LeaderElection3: begin an election at term 1 for -1: [485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581], old=null
2019-06-15 16:00:00,060 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:group-B4924D4E4A31 changes role from FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:3d396b34-1292-4043-817b-b31e80548a68
2019-06-15 16:00:00,060 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: shutdown FollowerState
2019-06-15 16:00:00,060 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: start FollowerState
2019-06-15 16:00:00,061 INFO  impl.FollowerState (FollowerState.java:run(109)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-15 16:00:00,071 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-FE9BC209EBD8->1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: receive RaftClientReply:client-FE9BC209EBD8->1d03787b-4b53-4a8b-ba2b-6ea838a1dca1@group-B4924D4E4A31, cid=6, FAILED org.apache.ratis.protocol.NotLeaderException: Server 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1 is not the leader (3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771). Request must be sent to leader., logIndex=0, commits[1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:c-1]
2019-06-15 16:00:00,072 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - 3d396b34-1292-4043-817b-b31e80548a68:group-B4924D4E4A31:LeaderElection3: Election PASSED; received 2 response(s) [3d396b34-1292-4043-817b-b31e80548a68->485232cf-9cd3-4256-81cb-e5ab85fb332e,false-t1, 3d396b34-1292-4043-817b-b31e80548a68->1d03787b-4b53-4a8b-ba2b-6ea838a1dca1,true-t1] and 0 exception(s); 3d396b34-1292-4043-817b-b31e80548a68:t1, leader=null, voted=3d396b34-1292-4043-817b-b31e80548a68, raftlog=3d396b34-1292-4043-817b-b31e80548a68-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581], old=null
2019-06-15 16:00:00,072 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e:group-B4924D4E4A31:LeaderElection2: Election REJECTED; received 2 response(s) [485232cf-9cd3-4256-81cb-e5ab85fb332e->3d396b34-1292-4043-817b-b31e80548a68,false-t1, 485232cf-9cd3-4256-81cb-e5ab85fb332e->1d03787b-4b53-4a8b-ba2b-6ea838a1dca1,false-t1] and 0 exception(s); 485232cf-9cd3-4256-81cb-e5ab85fb332e:t1, leader=null, voted=485232cf-9cd3-4256-81cb-e5ab85fb332e, raftlog=485232cf-9cd3-4256-81cb-e5ab85fb332e-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581], old=null
2019-06-15 16:00:00,073 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e:group-B4924D4E4A31 changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM
2019-06-15 16:00:00,073 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: shutdown LeaderElection
2019-06-15 16:00:00,073 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: start FollowerState
2019-06-15 16:00:00,072 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 3d396b34-1292-4043-817b-b31e80548a68: shutdown LeaderElection
2019-06-15 16:00:00,074 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 3d396b34-1292-4043-817b-b31e80548a68:group-B4924D4E4A31 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-15 16:00:00,074 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 3d396b34-1292-4043-817b-b31e80548a68:group-B4924D4E4A31 change Leader from null to 3d396b34-1292-4043-817b-b31e80548a68 at term 1 for becomeLeader, leader elected after 1128ms
2019-06-15 16:00:00,075 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-15 16:00:00,075 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-15 16:00:00,075 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-15 16:00:00,075 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-15 16:00:00,077 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-06-15 16:00:00,078 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 16:00:00,078 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-06-15 16:00:00,079 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-06-15 16:00:00,080 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 16:00:00,080 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 16:00:00,080 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-06-15 16:00:00,080 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 16:00:00,080 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 1 (custom)
2019-06-15 16:00:00,080 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-06-15 16:00:00,081 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 16:00:00,081 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 16:00:00,081 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 3d396b34-1292-4043-817b-b31e80548a68: start LeaderState
2019-06-15 16:00:00,081 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 3d396b34-1292-4043-817b-b31e80548a68-RaftLogWorker: Starting segment from index:0
2019-06-15 16:00:00,081 WARN  client.GrpcClientProtocolService (LogUtils.java:warn(134)) - 0-OrderedRequestStreamObserver0: onError: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: cancelled before receiving half close
2019-06-15 16:00:00,099 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 3d396b34-1292-4043-817b-b31e80548a68:group-B4924D4E4A31 set configuration 0: [485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581], old=null at 0
2019-06-15 16:00:00,118 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 3d396b34-1292-4043-817b-b31e80548a68-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/3d396b34-1292-4043-817b-b31e80548a68/906255ed-1c3e-4087-b467-b4924d4e4a31/current/log_inprogress_0
2019-06-15 16:00:00,132 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:group-B4924D4E4A31 change Leader from null to 3d396b34-1292-4043-817b-b31e80548a68 at term 1 for appendEntries, leader elected after 1098ms
2019-06-15 16:00:00,133 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e:group-B4924D4E4A31 change Leader from null to 3d396b34-1292-4043-817b-b31e80548a68 at term 1 for appendEntries, leader elected after 1139ms
2019-06-15 16:00:00,148 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e:group-B4924D4E4A31 set configuration 0: [485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581], old=null at 0
2019-06-15 16:00:00,148 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:group-B4924D4E4A31 set configuration 0: [485232cf-9cd3-4256-81cb-e5ab85fb332e:0.0.0.0:41117, 3d396b34-1292-4043-817b-b31e80548a68:0.0.0.0:39771, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:0.0.0.0:45581], old=null at 0
2019-06-15 16:00:00,148 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e-RaftLogWorker: Starting segment from index:0
2019-06-15 16:00:00,149 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1-RaftLogWorker: Starting segment from index:0
2019-06-15 16:00:00,186 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d03787b-4b53-4a8b-ba2b-6ea838a1dca1/906255ed-1c3e-4087-b467-b4924d4e4a31/current/log_inprogress_0
2019-06-15 16:00:00,186 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e-RaftLogWorker: created new log segment /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/485232cf-9cd3-4256-81cb-e5ab85fb332e/906255ed-1c3e-4087-b467-b4924d4e4a31/current/log_inprogress_0
2019-06-15 16:00:01,090 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-15 16:00:01,097 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-15 16:00:01,097 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-FE9BC209EBD8->3d396b34-1292-4043-817b-b31e80548a68: receive RaftClientReply:client-FE9BC209EBD8->3d396b34-1292-4043-817b-b31e80548a68@group-B4924D4E4A31, cid=6, SUCCESS, logIndex=1, commits[3d396b34-1292-4043-817b-b31e80548a68:c1, 485232cf-9cd3-4256-81cb-e5ab85fb332e:c0, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:c0]
2019-06-15 16:00:01,097 INFO  security.OzoneBlockTokenSecretManager (OzoneSecretManager.java:updateCurrentKey(167)) - Updating the current master key for generating tokens
2019-06-15 16:00:01,098 INFO  ratis.ContainerStateMachine (ContainerUtils.java:logAndReturnError(146)) - Operation: CreateContainer : Trace ID:  : Message: Block token verification failed. Fail to find any token (empty or null.) : Result: BLOCK_TOKEN_VERIFICATION_FAILED
2019-06-15 16:00:01,115 INFO  client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(254)) - client-AC64E353E687->3d396b34-1292-4043-817b-b31e80548a68: receive RaftClientReply:client-AC64E353E687->3d396b34-1292-4043-817b-b31e80548a68@group-B4924D4E4A31, cid=7, SUCCESS, logIndex=3, commits[3d396b34-1292-4043-817b-b31e80548a68:c3, 485232cf-9cd3-4256-81cb-e5ab85fb332e:c2, 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:c2]
2019-06-15 16:00:01,117 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 3d396b34-1292-4043-817b-b31e80548a68: close
2019-06-15 16:00:01,118 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 3d396b34-1292-4043-817b-b31e80548a68: shutdown group-B4924D4E4A31
2019-06-15 16:00:01,119 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B4924D4E4A31,id=3d396b34-1292-4043-817b-b31e80548a68
2019-06-15 16:00:01,119 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 3d396b34-1292-4043-817b-b31e80548a68: shutdown LeaderState
2019-06-15 16:00:01,119 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 3d396b34-1292-4043-817b-b31e80548a68-PendingRequests: sendNotLeaderResponses
2019-06-15 16:00:01,119 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(142)) - GrpcLogAppender(3d396b34-1292-4043-817b-b31e80548a68 -> 485232cf-9cd3-4256-81cb-e5ab85fb332e): Wait interrupted by java.lang.InterruptedException
2019-06-15 16:00:01,120 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(142)) - GrpcLogAppender(3d396b34-1292-4043-817b-b31e80548a68 -> 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1): Wait interrupted by java.lang.InterruptedException
2019-06-15 16:00:01,122 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(104)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: appendEntries completed
2019-06-15 16:00:01,122 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(104)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: appendEntries completed
2019-06-15 16:00:01,124 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-3d396b34-1292-4043-817b-b31e80548a68-group-B4924D4E4A31: set stopIndex = 4
2019-06-15 16:00:01,124 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-15 16:00:01,124 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/3d396b34-1292-4043-817b-b31e80548a68/906255ed-1c3e-4087-b467-b4924d4e4a31/sm/snapshot.1_3
2019-06-15 16:00:01,125 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(277)) - 3d396b34-1292-4043-817b-b31e80548a68: follower 3d396b34-1292-4043-817b-b31e80548a68->1d03787b-4b53-4a8b-ba2b-6ea838a1dca1(c3,m4,n5, attendVote=true, lastRpcSendTime=12, lastRpcResponseTime=9) response Completed
2019-06-15 16:00:01,125 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 3d396b34-1292-4043-817b-b31e80548a68:group-B4924D4E4A31 closes. The last applied log index is 4
2019-06-15 16:00:01,126 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(277)) - 3d396b34-1292-4043-817b-b31e80548a68: follower 3d396b34-1292-4043-817b-b31e80548a68->485232cf-9cd3-4256-81cb-e5ab85fb332e(c3,m4,n5, attendVote=true, lastRpcSendTime=14, lastRpcResponseTime=6) response Completed
2019-06-15 16:00:01,126 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 3d396b34-1292-4043-817b-b31e80548a68-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 16:00:01,129 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - 3d396b34-1292-4043-817b-b31e80548a68->485232cf-9cd3-4256-81cb-e5ab85fb332e: nextIndex: updateUnconditionally 5 -> -1
2019-06-15 16:00:01,129 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 3d396b34-1292-4043-817b-b31e80548a68-RaftLogWorker close()
2019-06-15 16:00:01,129 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(50)) - 3d396b34-1292-4043-817b-b31e80548a68->1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: nextIndex: updateUnconditionally 5 -> -1
2019-06-15 16:00:01,130 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 3d396b34-1292-4043-817b-b31e80548a68: shutdown server with port 39771 now
2019-06-15 16:00:01,131 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 3d396b34-1292-4043-817b-b31e80548a68: shutdown server with port 39771 successfully
2019-06-15 16:00:01,134 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: close
2019-06-15 16:00:01,134 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: shutdown group-B4924D4E4A31
2019-06-15 16:00:01,134 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B4924D4E4A31,id=485232cf-9cd3-4256-81cb-e5ab85fb332e
2019-06-15 16:00:01,135 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: shutdown FollowerState
2019-06-15 16:00:01,135 INFO  impl.FollowerState (FollowerState.java:run(109)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-15 16:00:01,135 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-15 16:00:01,136 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/485232cf-9cd3-4256-81cb-e5ab85fb332e/906255ed-1c3e-4087-b467-b4924d4e4a31/sm/snapshot.1_3
2019-06-15 16:00:01,136 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-485232cf-9cd3-4256-81cb-e5ab85fb332e-group-B4924D4E4A31: set stopIndex = 3
2019-06-15 16:00:01,136 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e:group-B4924D4E4A31 closes. The last applied log index is 3
2019-06-15 16:00:01,137 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 16:00:01,139 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e-RaftLogWorker close()
2019-06-15 16:00:01,141 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: shutdown server with port 41117 now
2019-06-15 16:00:01,143 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 485232cf-9cd3-4256-81cb-e5ab85fb332e: shutdown server with port 41117 successfully
2019-06-15 16:00:01,161 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: close
2019-06-15 16:00:01,162 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: shutdown group-B4924D4E4A31
2019-06-15 16:00:01,162 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B4924D4E4A31,id=1d03787b-4b53-4a8b-ba2b-6ea838a1dca1
2019-06-15 16:00:01,162 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: shutdown FollowerState
2019-06-15 16:00:01,163 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-1d03787b-4b53-4a8b-ba2b-6ea838a1dca1-group-B4924D4E4A31: set stopIndex = 3
2019-06-15 16:00:01,163 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:3)
2019-06-15 16:00:01,168 INFO  impl.FollowerState (FollowerState.java:run(109)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-06-15 16:00:01,168 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-ozone/integration-test/target/test-dir/dfs/1d03787b-4b53-4a8b-ba2b-6ea838a1dca1/906255ed-1c3e-4087-b467-b4924d4e4a31/sm/snapshot.1_3
2019-06-15 16:00:01,171 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1:group-B4924D4E4A31 closes. The last applied log index is 3
2019-06-15 16:00:01,171 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 16:00:01,174 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1-RaftLogWorker close()
2019-06-15 16:00:01,175 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: shutdown server with port 45581 now
2019-06-15 16:00:01,176 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 1d03787b-4b53-4a8b-ba2b-6ea838a1dca1: shutdown server with port 45581 successfully
