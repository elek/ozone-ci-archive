2019-06-17 12:42:38,018 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3ba7ca63-d06d-4be1-9c63-696c9bcef6e5/hdds of  storage type : DISK and capacity : 104021790720
2019-06-17 12:42:38,024 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3ba7ca63-d06d-4be1-9c63-696c9bcef6e5/hdds to VolumeSet
2019-06-17 12:42:38,058 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@7eecb5b8
2019-06-17 12:42:38,090 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@7eecb5b8
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-06-17 12:42:38,449 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 46667
2019-06-17 12:42:38,928 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-17 12:42:38,951 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-17 12:42:38,959 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 46667 (custom)
2019-06-17 12:42:38,960 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-17 12:42:38,962 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 12:42:38,962 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-17 12:42:38,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-17 12:42:39,080 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3ba7ca63-d06d-4be1-9c63-696c9bcef6e5/ratis] (custom)
2019-06-17 12:42:39,090 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 32799
2019-06-17 12:42:39,109 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-17 12:42:39,109 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-17 12:42:39,110 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 63bc3731-b3ce-4e7e-b40e-8a954786eeda at port 46667
2019-06-17 12:42:39,165 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: start RPC server
2019-06-17 12:42:39,326 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: GrpcService started, listening on 0.0.0.0/0.0.0.0:46667
2019-06-17 12:42:39,622 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: addNew group-5EC1EA82BF81:[63bc3731-b3ce-4e7e-b40e-8a954786eeda:127.0.0.1:46667] returns group-5EC1EA82BF81:java.util.concurrent.CompletableFuture@6a65e08e[Not completed]
2019-06-17 12:42:39,654 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: new RaftServerImpl for group-5EC1EA82BF81:[63bc3731-b3ce-4e7e-b40e-8a954786eeda:127.0.0.1:46667] with ContainerStateMachine:uninitialized
2019-06-17 12:42:39,656 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-17 12:42:39,656 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-17 12:42:39,656 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-17 12:42:39,657 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-17 12:42:39,663 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda:group-5EC1EA82BF81 ConfigurationManager, init=-1: [63bc3731-b3ce-4e7e-b40e-8a954786eeda:127.0.0.1:46667], old=null, confs=<EMPTY_MAP>
2019-06-17 12:42:39,663 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3ba7ca63-d06d-4be1-9c63-696c9bcef6e5/ratis] (custom)
2019-06-17 12:42:39,669 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3ba7ca63-d06d-4be1-9c63-696c9bcef6e5/ratis/6979691d-b410-4e4d-a986-5ec1ea82bf81 does not exist. Creating ...
2019-06-17 12:42:39,679 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3ba7ca63-d06d-4be1-9c63-696c9bcef6e5/ratis/6979691d-b410-4e4d-a986-5ec1ea82bf81/in_use.lock acquired by nodename 4310@ozone-unit-076618677d3mlhpz-3869627014
2019-06-17 12:42:39,688 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3ba7ca63-d06d-4be1-9c63-696c9bcef6e5/ratis/6979691d-b410-4e4d-a986-5ec1ea82bf81 has been successfully formatted.
2019-06-17 12:42:39,690 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-17 12:42:39,690 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-17 12:42:39,692 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-17 12:42:39,694 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 12:42:39,697 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 12:42:39,701 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-17 12:42:39,704 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 63bc3731-b3ce-4e7e-b40e-8a954786eeda-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3ba7ca63-d06d-4be1-9c63-696c9bcef6e5/ratis/6979691d-b410-4e4d-a986-5ec1ea82bf81
2019-06-17 12:42:39,705 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-17 12:42:39,705 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-17 12:42:39,707 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 12:42:39,707 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-17 12:42:39,708 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-17 12:42:39,708 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-17 12:42:39,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-17 12:42:39,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-17 12:42:39,710 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-17 12:42:39,712 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-17 12:42:39,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-17 12:42:39,719 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-17 12:42:39,719 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-17 12:42:39,830 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: start group-5EC1EA82BF81
2019-06-17 12:42:39,830 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda:group-5EC1EA82BF81 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-17 12:42:39,831 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: start FollowerState
2019-06-17 12:42:39,833 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-5EC1EA82BF81,id=63bc3731-b3ce-4e7e-b40e-8a954786eeda
2019-06-17 12:42:40,846 INFO  impl.FollowerState (FollowerState.java:run(101)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda:group-5EC1EA82BF81 changes to CANDIDATE, lastRpcTime:1014, electionTimeout:1014ms
2019-06-17 12:42:40,846 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: shutdown FollowerState
2019-06-17 12:42:40,846 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda:group-5EC1EA82BF81 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-17 12:42:40,848 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: start LeaderElection
2019-06-17 12:42:40,852 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda:group-5EC1EA82BF81:LeaderElection1: begin an election at term 1 for -1: [63bc3731-b3ce-4e7e-b40e-8a954786eeda:127.0.0.1:46667], old=null
2019-06-17 12:42:40,853 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: shutdown LeaderElection
2019-06-17 12:42:40,853 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda:group-5EC1EA82BF81 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-17 12:42:40,853 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda:group-5EC1EA82BF81 change Leader from null to 63bc3731-b3ce-4e7e-b40e-8a954786eeda at term 1 for becomeLeader, leader elected after 1163ms
2019-06-17 12:42:40,857 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-17 12:42:40,857 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-17 12:42:40,860 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-17 12:42:40,860 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-17 12:42:40,869 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: start LeaderState
2019-06-17 12:42:40,881 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda-RaftLogWorker: Starting segment from index:0
2019-06-17 12:42:40,896 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda:group-5EC1EA82BF81 set configuration 0: [63bc3731-b3ce-4e7e-b40e-8a954786eeda:127.0.0.1:46667], old=null at 0
2019-06-17 12:42:41,048 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3ba7ca63-d06d-4be1-9c63-696c9bcef6e5/ratis/6979691d-b410-4e4d-a986-5ec1ea82bf81/current/log_inprogress_0
2019-06-17 12:42:42,058 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-06-17 12:42:42,112 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 3248736682825835190 is closed with bcsId 0.
2019-06-17 12:42:42,113 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-17 12:42:42,114 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: close
2019-06-17 12:42:42,116 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: shutdown group-5EC1EA82BF81
2019-06-17 12:42:42,116 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-5EC1EA82BF81,id=63bc3731-b3ce-4e7e-b40e-8a954786eeda
2019-06-17 12:42:42,117 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: shutdown LeaderState
2019-06-17 12:42:42,117 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda-PendingRequests: sendNotLeaderResponses
2019-06-17 12:42:42,120 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-63bc3731-b3ce-4e7e-b40e-8a954786eeda-group-5EC1EA82BF81: set stopIndex = 4
2019-06-17 12:42:42,120 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-17 12:42:42,121 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler3ba7ca63-d06d-4be1-9c63-696c9bcef6e5/ratis/6979691d-b410-4e4d-a986-5ec1ea82bf81/sm/snapshot.1_4
2019-06-17 12:42:42,129 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda:group-5EC1EA82BF81 closes. The last applied log index is 4
2019-06-17 12:42:42,130 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-17 12:42:42,131 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda-RaftLogWorker close()
2019-06-17 12:42:42,132 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: shutdown server with port 46667 now
2019-06-17 12:42:42,135 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 63bc3731-b3ce-4e7e-b40e-8a954786eeda: shutdown server with port 46667 successfully
2019-06-17 12:42:42,146 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-17 12:42:42,177 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera3199973-e4a9-4bf8-933a-5487edcf1638/hdds of  storage type : DISK and capacity : 104021790720
2019-06-17 12:42:42,177 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera3199973-e4a9-4bf8-933a-5487edcf1638/hdds to VolumeSet
2019-06-17 12:42:42,178 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@5e1218b4
2019-06-17 12:42:42,178 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@5e1218b4
2019-06-17 12:42:42,197 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 39443
2019-06-17 12:42:42,198 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-17 12:42:42,199 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-17 12:42:42,199 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 39443 (custom)
2019-06-17 12:42:42,199 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-17 12:42:42,200 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 12:42:42,200 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-17 12:42:42,200 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-17 12:42:42,201 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera3199973-e4a9-4bf8-933a-5487edcf1638/ratis] (custom)
2019-06-17 12:42:42,202 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 44149
2019-06-17 12:42:42,202 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-17 12:42:42,202 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-17 12:42:42,202 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 13eaf868-2f47-42b7-81f1-b644050147a0 at port 39443
2019-06-17 12:42:42,228 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 13eaf868-2f47-42b7-81f1-b644050147a0: start RPC server
2019-06-17 12:42:42,229 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 13eaf868-2f47-42b7-81f1-b644050147a0: GrpcService started, listening on 0.0.0.0/0.0.0.0:39443
2019-06-17 12:42:42,243 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 13eaf868-2f47-42b7-81f1-b644050147a0: addNew group-C794115566A5:[13eaf868-2f47-42b7-81f1-b644050147a0:127.0.0.1:39443] returns group-C794115566A5:java.util.concurrent.CompletableFuture@3253b014[Not completed]
2019-06-17 12:42:42,243 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 13eaf868-2f47-42b7-81f1-b644050147a0: new RaftServerImpl for group-C794115566A5:[13eaf868-2f47-42b7-81f1-b644050147a0:127.0.0.1:39443] with ContainerStateMachine:uninitialized
2019-06-17 12:42:42,244 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-17 12:42:42,244 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-17 12:42:42,244 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-17 12:42:42,244 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-17 12:42:42,245 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 13eaf868-2f47-42b7-81f1-b644050147a0:group-C794115566A5 ConfigurationManager, init=-1: [13eaf868-2f47-42b7-81f1-b644050147a0:127.0.0.1:39443], old=null, confs=<EMPTY_MAP>
2019-06-17 12:42:42,245 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera3199973-e4a9-4bf8-933a-5487edcf1638/ratis] (custom)
2019-06-17 12:42:42,245 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera3199973-e4a9-4bf8-933a-5487edcf1638/ratis/13e515af-df01-4802-a410-c794115566a5 does not exist. Creating ...
2019-06-17 12:42:42,248 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera3199973-e4a9-4bf8-933a-5487edcf1638/ratis/13e515af-df01-4802-a410-c794115566a5/in_use.lock acquired by nodename 4310@ozone-unit-076618677d3mlhpz-3869627014
2019-06-17 12:42:42,250 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera3199973-e4a9-4bf8-933a-5487edcf1638/ratis/13e515af-df01-4802-a410-c794115566a5 has been successfully formatted.
2019-06-17 12:42:42,251 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-17 12:42:42,251 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-17 12:42:42,251 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-17 12:42:42,251 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 12:42:42,251 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 12:42:42,251 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-17 12:42:42,252 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 13eaf868-2f47-42b7-81f1-b644050147a0-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera3199973-e4a9-4bf8-933a-5487edcf1638/ratis/13e515af-df01-4802-a410-c794115566a5
2019-06-17 12:42:42,252 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-17 12:42:42,252 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-17 12:42:42,252 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 12:42:42,252 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-17 12:42:42,252 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-17 12:42:42,252 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-17 12:42:42,253 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-17 12:42:42,253 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-17 12:42:42,253 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-17 12:42:42,253 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-17 12:42:42,257 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-17 12:42:42,257 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-17 12:42:42,258 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-17 12:42:42,258 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 13eaf868-2f47-42b7-81f1-b644050147a0: start group-C794115566A5
2019-06-17 12:42:42,258 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 13eaf868-2f47-42b7-81f1-b644050147a0:group-C794115566A5 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-17 12:42:42,258 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 13eaf868-2f47-42b7-81f1-b644050147a0: start FollowerState
2019-06-17 12:42:42,258 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-C794115566A5,id=13eaf868-2f47-42b7-81f1-b644050147a0
2019-06-17 12:42:43,330 INFO  impl.FollowerState (FollowerState.java:run(101)) - 13eaf868-2f47-42b7-81f1-b644050147a0:group-C794115566A5 changes to CANDIDATE, lastRpcTime:1072, electionTimeout:1072ms
2019-06-17 12:42:43,331 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 13eaf868-2f47-42b7-81f1-b644050147a0: shutdown FollowerState
2019-06-17 12:42:43,331 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 13eaf868-2f47-42b7-81f1-b644050147a0:group-C794115566A5 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-17 12:42:43,331 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 13eaf868-2f47-42b7-81f1-b644050147a0: start LeaderElection
2019-06-17 12:42:43,334 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 13eaf868-2f47-42b7-81f1-b644050147a0:group-C794115566A5:LeaderElection2: begin an election at term 1 for -1: [13eaf868-2f47-42b7-81f1-b644050147a0:127.0.0.1:39443], old=null
2019-06-17 12:42:43,334 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 13eaf868-2f47-42b7-81f1-b644050147a0: shutdown LeaderElection
2019-06-17 12:42:43,335 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 13eaf868-2f47-42b7-81f1-b644050147a0:group-C794115566A5 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-17 12:42:43,335 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 13eaf868-2f47-42b7-81f1-b644050147a0:group-C794115566A5 change Leader from null to 13eaf868-2f47-42b7-81f1-b644050147a0 at term 1 for becomeLeader, leader elected after 1084ms
2019-06-17 12:42:43,335 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-17 12:42:43,335 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-17 12:42:43,335 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-17 12:42:43,335 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-17 12:42:43,336 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 13eaf868-2f47-42b7-81f1-b644050147a0: start LeaderState
2019-06-17 12:42:43,336 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 13eaf868-2f47-42b7-81f1-b644050147a0-RaftLogWorker: Starting segment from index:0
2019-06-17 12:42:43,341 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 13eaf868-2f47-42b7-81f1-b644050147a0:group-C794115566A5 set configuration 0: [13eaf868-2f47-42b7-81f1-b644050147a0:127.0.0.1:39443], old=null at 0
2019-06-17 12:42:43,373 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 13eaf868-2f47-42b7-81f1-b644050147a0-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera3199973-e4a9-4bf8-933a-5487edcf1638/ratis/13e515af-df01-4802-a410-c794115566a5/current/log_inprogress_0
2019-06-17 12:42:44,294 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-17 12:42:44,295 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 13eaf868-2f47-42b7-81f1-b644050147a0: close
2019-06-17 12:42:44,295 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 13eaf868-2f47-42b7-81f1-b644050147a0: shutdown group-C794115566A5
2019-06-17 12:42:44,296 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-C794115566A5,id=13eaf868-2f47-42b7-81f1-b644050147a0
2019-06-17 12:42:44,296 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 13eaf868-2f47-42b7-81f1-b644050147a0: shutdown LeaderState
2019-06-17 12:42:44,296 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 13eaf868-2f47-42b7-81f1-b644050147a0-PendingRequests: sendNotLeaderResponses
2019-06-17 12:42:44,297 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-17 12:42:44,298 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlera3199973-e4a9-4bf8-933a-5487edcf1638/ratis/13e515af-df01-4802-a410-c794115566a5/sm/snapshot.1_2
2019-06-17 12:42:44,298 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-13eaf868-2f47-42b7-81f1-b644050147a0-group-C794115566A5: set stopIndex = 2
2019-06-17 12:42:44,298 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 13eaf868-2f47-42b7-81f1-b644050147a0:group-C794115566A5 closes. The last applied log index is 2
2019-06-17 12:42:44,299 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 13eaf868-2f47-42b7-81f1-b644050147a0-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-17 12:42:44,300 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 13eaf868-2f47-42b7-81f1-b644050147a0-RaftLogWorker close()
2019-06-17 12:42:44,301 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 13eaf868-2f47-42b7-81f1-b644050147a0: shutdown server with port 39443 now
2019-06-17 12:42:44,302 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 13eaf868-2f47-42b7-81f1-b644050147a0: shutdown server with port 39443 successfully
2019-06-17 12:42:44,309 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-17 12:42:44,340 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler66455fd7-a34f-4038-b7c0-167a0d27bdaf/hdds of  storage type : DISK and capacity : 104021790720
2019-06-17 12:42:44,340 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler66455fd7-a34f-4038-b7c0-167a0d27bdaf/hdds to VolumeSet
2019-06-17 12:42:44,340 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@38eb2c50
2019-06-17 12:42:44,341 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@38eb2c50
2019-06-17 12:42:44,354 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 37991
2019-06-17 12:42:44,355 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-17 12:42:44,356 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-17 12:42:44,356 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 37991 (custom)
2019-06-17 12:42:44,356 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-17 12:42:44,357 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 12:42:44,357 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-17 12:42:44,357 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-17 12:42:44,358 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler66455fd7-a34f-4038-b7c0-167a0d27bdaf/ratis] (custom)
2019-06-17 12:42:44,358 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 40189
2019-06-17 12:42:44,359 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-17 12:42:44,359 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-17 12:42:44,359 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 1ba32375-8bd6-40a3-b73f-cc3db68b1818 at port 37991
2019-06-17 12:42:44,417 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: start RPC server
2019-06-17 12:42:44,419 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: GrpcService started, listening on 0.0.0.0/0.0.0.0:37991
2019-06-17 12:42:44,433 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: addNew group-F99AFE2A8D82:[1ba32375-8bd6-40a3-b73f-cc3db68b1818:127.0.0.1:37991] returns group-F99AFE2A8D82:java.util.concurrent.CompletableFuture@1c957ad8[Not completed]
2019-06-17 12:42:44,434 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: new RaftServerImpl for group-F99AFE2A8D82:[1ba32375-8bd6-40a3-b73f-cc3db68b1818:127.0.0.1:37991] with ContainerStateMachine:uninitialized
2019-06-17 12:42:44,434 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-17 12:42:44,434 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-17 12:42:44,435 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-17 12:42:44,435 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-17 12:42:44,435 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818:group-F99AFE2A8D82 ConfigurationManager, init=-1: [1ba32375-8bd6-40a3-b73f-cc3db68b1818:127.0.0.1:37991], old=null, confs=<EMPTY_MAP>
2019-06-17 12:42:44,435 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler66455fd7-a34f-4038-b7c0-167a0d27bdaf/ratis] (custom)
2019-06-17 12:42:44,435 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler66455fd7-a34f-4038-b7c0-167a0d27bdaf/ratis/508ca822-fd0d-4f64-b9fb-f99afe2a8d82 does not exist. Creating ...
2019-06-17 12:42:44,438 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler66455fd7-a34f-4038-b7c0-167a0d27bdaf/ratis/508ca822-fd0d-4f64-b9fb-f99afe2a8d82/in_use.lock acquired by nodename 4310@ozone-unit-076618677d3mlhpz-3869627014
2019-06-17 12:42:44,440 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler66455fd7-a34f-4038-b7c0-167a0d27bdaf/ratis/508ca822-fd0d-4f64-b9fb-f99afe2a8d82 has been successfully formatted.
2019-06-17 12:42:44,441 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-17 12:42:44,441 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-17 12:42:44,441 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-17 12:42:44,441 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 12:42:44,441 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 12:42:44,441 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-17 12:42:44,441 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 1ba32375-8bd6-40a3-b73f-cc3db68b1818-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler66455fd7-a34f-4038-b7c0-167a0d27bdaf/ratis/508ca822-fd0d-4f64-b9fb-f99afe2a8d82
2019-06-17 12:42:44,441 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-17 12:42:44,441 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-17 12:42:44,442 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 12:42:44,442 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-17 12:42:44,442 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-17 12:42:44,442 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-17 12:42:44,442 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-17 12:42:44,442 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-17 12:42:44,442 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-17 12:42:44,442 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-17 12:42:44,445 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-17 12:42:44,445 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-17 12:42:44,446 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-17 12:42:44,446 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: start group-F99AFE2A8D82
2019-06-17 12:42:44,446 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818:group-F99AFE2A8D82 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-17 12:42:44,446 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: start FollowerState
2019-06-17 12:42:44,446 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-F99AFE2A8D82,id=1ba32375-8bd6-40a3-b73f-cc3db68b1818
2019-06-17 12:42:45,594 INFO  impl.FollowerState (FollowerState.java:run(101)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818:group-F99AFE2A8D82 changes to CANDIDATE, lastRpcTime:1148, electionTimeout:1148ms
2019-06-17 12:42:45,594 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: shutdown FollowerState
2019-06-17 12:42:45,595 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818:group-F99AFE2A8D82 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-17 12:42:45,595 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: start LeaderElection
2019-06-17 12:42:45,598 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818:group-F99AFE2A8D82:LeaderElection3: begin an election at term 1 for -1: [1ba32375-8bd6-40a3-b73f-cc3db68b1818:127.0.0.1:37991], old=null
2019-06-17 12:42:45,598 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: shutdown LeaderElection
2019-06-17 12:42:45,598 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818:group-F99AFE2A8D82 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-17 12:42:45,598 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818:group-F99AFE2A8D82 change Leader from null to 1ba32375-8bd6-40a3-b73f-cc3db68b1818 at term 1 for becomeLeader, leader elected after 1157ms
2019-06-17 12:42:45,599 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-17 12:42:45,599 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-17 12:42:45,599 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-17 12:42:45,599 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-17 12:42:45,599 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: start LeaderState
2019-06-17 12:42:45,600 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818-RaftLogWorker: Starting segment from index:0
2019-06-17 12:42:45,607 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818:group-F99AFE2A8D82 set configuration 0: [1ba32375-8bd6-40a3-b73f-cc3db68b1818:127.0.0.1:37991], old=null at 0
2019-06-17 12:42:45,637 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler66455fd7-a34f-4038-b7c0-167a0d27bdaf/ratis/508ca822-fd0d-4f64-b9fb-f99afe2a8d82/current/log_inprogress_0
2019-06-17 12:42:46,492 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 6809528139803715017 is closed with bcsId 0.
2019-06-17 12:42:46,492 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-17 12:42:46,493 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: close
2019-06-17 12:42:46,493 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: shutdown group-F99AFE2A8D82
2019-06-17 12:42:46,493 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-F99AFE2A8D82,id=1ba32375-8bd6-40a3-b73f-cc3db68b1818
2019-06-17 12:42:46,494 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: shutdown LeaderState
2019-06-17 12:42:46,495 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818-PendingRequests: sendNotLeaderResponses
2019-06-17 12:42:46,496 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-1ba32375-8bd6-40a3-b73f-cc3db68b1818-group-F99AFE2A8D82: set stopIndex = 2
2019-06-17 12:42:46,496 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-17 12:42:46,497 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler66455fd7-a34f-4038-b7c0-167a0d27bdaf/ratis/508ca822-fd0d-4f64-b9fb-f99afe2a8d82/sm/snapshot.1_2
2019-06-17 12:42:46,497 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818:group-F99AFE2A8D82 closes. The last applied log index is 2
2019-06-17 12:42:46,497 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-17 12:42:46,498 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818-RaftLogWorker close()
2019-06-17 12:42:46,499 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: shutdown server with port 37991 now
2019-06-17 12:42:46,501 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 1ba32375-8bd6-40a3-b73f-cc3db68b1818: shutdown server with port 37991 successfully
2019-06-17 12:42:46,513 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-17 12:42:46,555 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2324c1f2-654a-424c-b941-9d41cff3cfb4/hdds of  storage type : DISK and capacity : 104021790720
2019-06-17 12:42:46,556 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2324c1f2-654a-424c-b941-9d41cff3cfb4/hdds to VolumeSet
2019-06-17 12:42:46,556 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@7318daf8
2019-06-17 12:42:46,556 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@7318daf8
2019-06-17 12:42:46,566 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 38037
2019-06-17 12:42:46,567 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-17 12:42:46,568 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-17 12:42:46,568 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 38037 (custom)
2019-06-17 12:42:46,568 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-17 12:42:46,569 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 12:42:46,569 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-17 12:42:46,569 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-17 12:42:46,570 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2324c1f2-654a-424c-b941-9d41cff3cfb4/ratis] (custom)
2019-06-17 12:42:46,570 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 34561
2019-06-17 12:42:46,570 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-17 12:42:46,571 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-17 12:42:46,571 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis c9c368e1-f0f1-4c54-bf83-d9471c6194c7 at port 38037
2019-06-17 12:42:46,589 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: start RPC server
2019-06-17 12:42:46,590 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: GrpcService started, listening on 0.0.0.0/0.0.0.0:38037
Jun 17, 2019 12:42:46 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:39443} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 17, 2019 12:42:46 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:37991} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-17 12:42:46,607 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: addNew group-A8747C457E98:[c9c368e1-f0f1-4c54-bf83-d9471c6194c7:127.0.0.1:38037] returns group-A8747C457E98:java.util.concurrent.CompletableFuture@742ae71a[Not completed]
2019-06-17 12:42:46,607 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: new RaftServerImpl for group-A8747C457E98:[c9c368e1-f0f1-4c54-bf83-d9471c6194c7:127.0.0.1:38037] with ContainerStateMachine:uninitialized
2019-06-17 12:42:46,608 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-17 12:42:46,608 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-17 12:42:46,608 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-17 12:42:46,608 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-17 12:42:46,608 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7:group-A8747C457E98 ConfigurationManager, init=-1: [c9c368e1-f0f1-4c54-bf83-d9471c6194c7:127.0.0.1:38037], old=null, confs=<EMPTY_MAP>
2019-06-17 12:42:46,608 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2324c1f2-654a-424c-b941-9d41cff3cfb4/ratis] (custom)
2019-06-17 12:42:46,608 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2324c1f2-654a-424c-b941-9d41cff3cfb4/ratis/4a49605d-ab05-4420-93d7-a8747c457e98 does not exist. Creating ...
2019-06-17 12:42:46,611 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2324c1f2-654a-424c-b941-9d41cff3cfb4/ratis/4a49605d-ab05-4420-93d7-a8747c457e98/in_use.lock acquired by nodename 4310@ozone-unit-076618677d3mlhpz-3869627014
2019-06-17 12:42:46,613 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2324c1f2-654a-424c-b941-9d41cff3cfb4/ratis/4a49605d-ab05-4420-93d7-a8747c457e98 has been successfully formatted.
2019-06-17 12:42:46,613 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-17 12:42:46,614 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new c9c368e1-f0f1-4c54-bf83-d9471c6194c7-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2324c1f2-654a-424c-b941-9d41cff3cfb4/ratis/4a49605d-ab05-4420-93d7-a8747c457e98
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-17 12:42:46,614 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-17 12:42:46,615 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-17 12:42:46,615 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-17 12:42:46,615 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-17 12:42:46,615 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-17 12:42:46,615 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-17 12:42:46,615 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-17 12:42:46,615 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: start group-A8747C457E98
2019-06-17 12:42:46,616 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7:group-A8747C457E98 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-17 12:42:46,616 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: start FollowerState
2019-06-17 12:42:46,616 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-A8747C457E98,id=c9c368e1-f0f1-4c54-bf83-d9471c6194c7
2019-06-17 12:42:47,651 INFO  impl.FollowerState (FollowerState.java:run(101)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7:group-A8747C457E98 changes to CANDIDATE, lastRpcTime:1035, electionTimeout:1035ms
2019-06-17 12:42:47,651 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: shutdown FollowerState
2019-06-17 12:42:47,651 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7:group-A8747C457E98 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-17 12:42:47,651 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: start LeaderElection
2019-06-17 12:42:47,655 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7:group-A8747C457E98:LeaderElection4: begin an election at term 1 for -1: [c9c368e1-f0f1-4c54-bf83-d9471c6194c7:127.0.0.1:38037], old=null
2019-06-17 12:42:47,655 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: shutdown LeaderElection
2019-06-17 12:42:47,655 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7:group-A8747C457E98 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-17 12:42:47,655 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7:group-A8747C457E98 change Leader from null to c9c368e1-f0f1-4c54-bf83-d9471c6194c7 at term 1 for becomeLeader, leader elected after 1041ms
2019-06-17 12:42:47,655 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-17 12:42:47,656 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-17 12:42:47,656 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-17 12:42:47,656 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-17 12:42:47,656 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: start LeaderState
2019-06-17 12:42:47,656 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7-RaftLogWorker: Starting segment from index:0
2019-06-17 12:42:47,657 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7:group-A8747C457E98 set configuration 0: [c9c368e1-f0f1-4c54-bf83-d9471c6194c7:127.0.0.1:38037], old=null at 0
2019-06-17 12:42:47,695 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2324c1f2-654a-424c-b941-9d41cff3cfb4/ratis/4a49605d-ab05-4420-93d7-a8747c457e98/current/log_inprogress_0
2019-06-17 12:42:48,662 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 3439590201611673078 is closed with bcsId 0.
2019-06-17 12:42:48,663 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-17 12:42:48,663 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: close
2019-06-17 12:42:48,663 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: shutdown group-A8747C457E98
2019-06-17 12:42:48,664 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-A8747C457E98,id=c9c368e1-f0f1-4c54-bf83-d9471c6194c7
2019-06-17 12:42:48,664 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: shutdown LeaderState
2019-06-17 12:42:48,664 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7-PendingRequests: sendNotLeaderResponses
2019-06-17 12:42:48,665 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-c9c368e1-f0f1-4c54-bf83-d9471c6194c7-group-A8747C457E98: set stopIndex = 2
2019-06-17 12:42:48,665 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-17 12:42:48,666 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2324c1f2-654a-424c-b941-9d41cff3cfb4/ratis/4a49605d-ab05-4420-93d7-a8747c457e98/sm/snapshot.1_2
2019-06-17 12:42:48,666 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7:group-A8747C457E98 closes. The last applied log index is 2
2019-06-17 12:42:48,666 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-17 12:42:48,667 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7-RaftLogWorker close()
2019-06-17 12:42:48,668 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: shutdown server with port 38037 now
2019-06-17 12:42:48,670 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - c9c368e1-f0f1-4c54-bf83-d9471c6194c7: shutdown server with port 38037 successfully
2019-06-17 12:42:48,673 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-17 12:42:48,699 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf047b61f-4454-4e0c-ac0e-4883d30b5347/hdds of  storage type : DISK and capacity : 104021790720
2019-06-17 12:42:48,699 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf047b61f-4454-4e0c-ac0e-4883d30b5347/hdds to VolumeSet
2019-06-17 12:42:48,699 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@39c1fe0b
2019-06-17 12:42:48,699 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@39c1fe0b
2019-06-17 12:42:48,711 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 44451
2019-06-17 12:42:48,711 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-17 12:42:48,712 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-17 12:42:48,712 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 44451 (custom)
2019-06-17 12:42:48,713 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-17 12:42:48,713 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 12:42:48,713 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-17 12:42:48,713 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-17 12:42:48,714 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf047b61f-4454-4e0c-ac0e-4883d30b5347/ratis] (custom)
2019-06-17 12:42:48,714 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 43543
2019-06-17 12:42:48,715 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-17 12:42:48,715 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-17 12:42:48,715 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis aa44726a-8982-4b64-9467-46a2d3f66636 at port 44451
2019-06-17 12:42:48,727 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - aa44726a-8982-4b64-9467-46a2d3f66636: start RPC server
2019-06-17 12:42:48,729 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - aa44726a-8982-4b64-9467-46a2d3f66636: GrpcService started, listening on 0.0.0.0/0.0.0.0:44451
2019-06-17 12:42:48,743 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - aa44726a-8982-4b64-9467-46a2d3f66636: addNew group-37B5E2D10AB3:[aa44726a-8982-4b64-9467-46a2d3f66636:127.0.0.1:44451] returns group-37B5E2D10AB3:java.util.concurrent.CompletableFuture@ae6a35e[Not completed]
2019-06-17 12:42:48,746 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - aa44726a-8982-4b64-9467-46a2d3f66636: new RaftServerImpl for group-37B5E2D10AB3:[aa44726a-8982-4b64-9467-46a2d3f66636:127.0.0.1:44451] with ContainerStateMachine:uninitialized
2019-06-17 12:42:48,746 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-17 12:42:48,746 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-17 12:42:48,746 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-17 12:42:48,746 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-17 12:42:48,746 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - aa44726a-8982-4b64-9467-46a2d3f66636:group-37B5E2D10AB3 ConfigurationManager, init=-1: [aa44726a-8982-4b64-9467-46a2d3f66636:127.0.0.1:44451], old=null, confs=<EMPTY_MAP>
2019-06-17 12:42:48,747 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf047b61f-4454-4e0c-ac0e-4883d30b5347/ratis] (custom)
2019-06-17 12:42:48,747 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf047b61f-4454-4e0c-ac0e-4883d30b5347/ratis/09a59376-9eb1-4317-8fba-37b5e2d10ab3 does not exist. Creating ...
2019-06-17 12:42:48,749 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf047b61f-4454-4e0c-ac0e-4883d30b5347/ratis/09a59376-9eb1-4317-8fba-37b5e2d10ab3/in_use.lock acquired by nodename 4310@ozone-unit-076618677d3mlhpz-3869627014
2019-06-17 12:42:48,752 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf047b61f-4454-4e0c-ac0e-4883d30b5347/ratis/09a59376-9eb1-4317-8fba-37b5e2d10ab3 has been successfully formatted.
2019-06-17 12:42:48,752 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-17 12:42:48,752 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-17 12:42:48,752 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-17 12:42:48,752 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 12:42:48,752 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 12:42:48,752 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-17 12:42:48,752 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new aa44726a-8982-4b64-9467-46a2d3f66636-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf047b61f-4454-4e0c-ac0e-4883d30b5347/ratis/09a59376-9eb1-4317-8fba-37b5e2d10ab3
2019-06-17 12:42:48,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-17 12:42:48,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-17 12:42:48,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 12:42:48,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-17 12:42:48,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-17 12:42:48,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-17 12:42:48,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-17 12:42:48,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-17 12:42:48,754 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-17 12:42:48,754 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-17 12:42:48,756 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-17 12:42:48,757 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-17 12:42:48,757 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-17 12:42:48,757 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - aa44726a-8982-4b64-9467-46a2d3f66636: start group-37B5E2D10AB3
2019-06-17 12:42:48,757 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - aa44726a-8982-4b64-9467-46a2d3f66636:group-37B5E2D10AB3 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-17 12:42:48,757 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - aa44726a-8982-4b64-9467-46a2d3f66636: start FollowerState
2019-06-17 12:42:48,758 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-37B5E2D10AB3,id=aa44726a-8982-4b64-9467-46a2d3f66636
2019-06-17 12:42:49,773 INFO  impl.FollowerState (FollowerState.java:run(101)) - aa44726a-8982-4b64-9467-46a2d3f66636:group-37B5E2D10AB3 changes to CANDIDATE, lastRpcTime:1015, electionTimeout:1015ms
2019-06-17 12:42:49,773 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - aa44726a-8982-4b64-9467-46a2d3f66636: shutdown FollowerState
2019-06-17 12:42:49,773 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - aa44726a-8982-4b64-9467-46a2d3f66636:group-37B5E2D10AB3 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-17 12:42:49,773 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - aa44726a-8982-4b64-9467-46a2d3f66636: start LeaderElection
2019-06-17 12:42:49,776 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - aa44726a-8982-4b64-9467-46a2d3f66636:group-37B5E2D10AB3:LeaderElection5: begin an election at term 1 for -1: [aa44726a-8982-4b64-9467-46a2d3f66636:127.0.0.1:44451], old=null
2019-06-17 12:42:49,777 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - aa44726a-8982-4b64-9467-46a2d3f66636: shutdown LeaderElection
2019-06-17 12:42:49,777 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - aa44726a-8982-4b64-9467-46a2d3f66636:group-37B5E2D10AB3 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-17 12:42:49,777 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - aa44726a-8982-4b64-9467-46a2d3f66636:group-37B5E2D10AB3 change Leader from null to aa44726a-8982-4b64-9467-46a2d3f66636 at term 1 for becomeLeader, leader elected after 1024ms
2019-06-17 12:42:49,777 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-17 12:42:49,777 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-17 12:42:49,777 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-17 12:42:49,777 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-17 12:42:49,778 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - aa44726a-8982-4b64-9467-46a2d3f66636: start LeaderState
2019-06-17 12:42:49,778 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - aa44726a-8982-4b64-9467-46a2d3f66636-RaftLogWorker: Starting segment from index:0
2019-06-17 12:42:49,778 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - aa44726a-8982-4b64-9467-46a2d3f66636:group-37B5E2D10AB3 set configuration 0: [aa44726a-8982-4b64-9467-46a2d3f66636:127.0.0.1:44451], old=null at 0
2019-06-17 12:42:49,813 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - aa44726a-8982-4b64-9467-46a2d3f66636-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf047b61f-4454-4e0c-ac0e-4883d30b5347/ratis/09a59376-9eb1-4317-8fba-37b5e2d10ab3/current/log_inprogress_0
2019-06-17 12:42:50,810 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 7841481240641575691 is closed with bcsId 0.
2019-06-17 12:42:50,811 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-17 12:42:50,811 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - aa44726a-8982-4b64-9467-46a2d3f66636: close
2019-06-17 12:42:50,812 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - aa44726a-8982-4b64-9467-46a2d3f66636: shutdown group-37B5E2D10AB3
2019-06-17 12:42:50,812 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-37B5E2D10AB3,id=aa44726a-8982-4b64-9467-46a2d3f66636
2019-06-17 12:42:50,812 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - aa44726a-8982-4b64-9467-46a2d3f66636: shutdown LeaderState
2019-06-17 12:42:50,812 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - aa44726a-8982-4b64-9467-46a2d3f66636-PendingRequests: sendNotLeaderResponses
2019-06-17 12:42:50,814 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-aa44726a-8982-4b64-9467-46a2d3f66636-group-37B5E2D10AB3: set stopIndex = 4
2019-06-17 12:42:50,814 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-17 12:42:50,814 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf047b61f-4454-4e0c-ac0e-4883d30b5347/ratis/09a59376-9eb1-4317-8fba-37b5e2d10ab3/sm/snapshot.1_4
2019-06-17 12:42:50,815 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - aa44726a-8982-4b64-9467-46a2d3f66636:group-37B5E2D10AB3 closes. The last applied log index is 4
2019-06-17 12:42:50,815 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - aa44726a-8982-4b64-9467-46a2d3f66636-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-17 12:42:50,815 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - aa44726a-8982-4b64-9467-46a2d3f66636-RaftLogWorker close()
2019-06-17 12:42:50,816 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - aa44726a-8982-4b64-9467-46a2d3f66636: shutdown server with port 44451 now
2019-06-17 12:42:50,817 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - aa44726a-8982-4b64-9467-46a2d3f66636: shutdown server with port 44451 successfully
2019-06-17 12:42:50,819 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
