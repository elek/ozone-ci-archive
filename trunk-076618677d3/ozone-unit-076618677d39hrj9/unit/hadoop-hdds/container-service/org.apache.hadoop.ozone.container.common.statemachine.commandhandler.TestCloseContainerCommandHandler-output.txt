2019-06-18 15:22:29,091 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4bf5ef09-edda-46ec-8fd9-f275336dffd9/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 15:22:29,097 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4bf5ef09-edda-46ec-8fd9-f275336dffd9/hdds to VolumeSet
2019-06-18 15:22:29,129 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
2019-06-18 15:22:29,169 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-06-18 15:22:29,644 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 46627
2019-06-18 15:22:30,203 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 15:22:30,230 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 15:22:30,240 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 46627 (custom)
2019-06-18 15:22:30,241 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 15:22:30,243 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 15:22:30,244 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 15:22:30,245 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 15:22:30,427 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4bf5ef09-edda-46ec-8fd9-f275336dffd9/ratis] (custom)
2019-06-18 15:22:30,442 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 33335
2019-06-18 15:22:30,473 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 15:22:30,473 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 15:22:30,475 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4 at port 46627
2019-06-18 15:22:30,524 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: start RPC server
2019-06-18 15:22:30,674 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: GrpcService started, listening on 0.0.0.0/0.0.0.0:46627
2019-06-18 15:22:31,031 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: addNew group-586AB1A54FB5:[8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:127.0.0.1:46627] returns group-586AB1A54FB5:java.util.concurrent.CompletableFuture@be146ac[Not completed]
2019-06-18 15:22:31,066 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: new RaftServerImpl for group-586AB1A54FB5:[8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:127.0.0.1:46627] with ContainerStateMachine:uninitialized
2019-06-18 15:22:31,068 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 15:22:31,068 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 15:22:31,068 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 15:22:31,069 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 15:22:31,074 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:group-586AB1A54FB5 ConfigurationManager, init=-1: [8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:127.0.0.1:46627], old=null, confs=<EMPTY_MAP>
2019-06-18 15:22:31,075 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4bf5ef09-edda-46ec-8fd9-f275336dffd9/ratis] (custom)
2019-06-18 15:22:31,081 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4bf5ef09-edda-46ec-8fd9-f275336dffd9/ratis/556ca746-5f77-4933-bc73-586ab1a54fb5 does not exist. Creating ...
2019-06-18 15:22:31,090 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4bf5ef09-edda-46ec-8fd9-f275336dffd9/ratis/556ca746-5f77-4933-bc73-586ab1a54fb5/in_use.lock acquired by nodename 4311@ozone-unit-076618677d39hrj9-3617017993
2019-06-18 15:22:31,098 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4bf5ef09-edda-46ec-8fd9-f275336dffd9/ratis/556ca746-5f77-4933-bc73-586ab1a54fb5 has been successfully formatted.
2019-06-18 15:22:31,101 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 15:22:31,101 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 15:22:31,103 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 15:22:31,105 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 15:22:31,108 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 15:22:31,112 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 15:22:31,115 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4bf5ef09-edda-46ec-8fd9-f275336dffd9/ratis/556ca746-5f77-4933-bc73-586ab1a54fb5
2019-06-18 15:22:31,116 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 15:22:31,116 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 15:22:31,118 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 15:22:31,118 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 15:22:31,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 15:22:31,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 15:22:31,120 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 15:22:31,120 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 15:22:31,121 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 15:22:31,123 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 15:22:31,128 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 15:22:31,129 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 15:22:31,129 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 15:22:31,253 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: start group-586AB1A54FB5
2019-06-18 15:22:31,254 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:group-586AB1A54FB5 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 15:22:31,255 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: start FollowerState
2019-06-18 15:22:31,257 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-586AB1A54FB5,id=8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4
2019-06-18 15:22:32,421 INFO  impl.FollowerState (FollowerState.java:run(101)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:group-586AB1A54FB5 changes to CANDIDATE, lastRpcTime:1165, electionTimeout:1165ms
2019-06-18 15:22:32,421 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: shutdown FollowerState
2019-06-18 15:22:32,421 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:group-586AB1A54FB5 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 15:22:32,423 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: start LeaderElection
2019-06-18 15:22:32,427 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:group-586AB1A54FB5:LeaderElection1: begin an election at term 1 for -1: [8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:127.0.0.1:46627], old=null
2019-06-18 15:22:32,428 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: shutdown LeaderElection
2019-06-18 15:22:32,429 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:group-586AB1A54FB5 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 15:22:32,429 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:group-586AB1A54FB5 change Leader from null to 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4 at term 1 for becomeLeader, leader elected after 1328ms
2019-06-18 15:22:32,433 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 15:22:32,434 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 15:22:32,436 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 15:22:32,436 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 15:22:32,445 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: start LeaderState
2019-06-18 15:22:32,459 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4-RaftLogWorker: Starting segment from index:0
2019-06-18 15:22:32,476 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:group-586AB1A54FB5 set configuration 0: [8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:127.0.0.1:46627], old=null at 0
2019-06-18 15:22:32,615 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4bf5ef09-edda-46ec-8fd9-f275336dffd9/ratis/556ca746-5f77-4933-bc73-586ab1a54fb5/current/log_inprogress_0
2019-06-18 15:22:33,520 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-06-18 15:22:33,592 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 8355480164213090643 is closed with bcsId 0.
2019-06-18 15:22:33,593 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 15:22:33,594 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: close
2019-06-18 15:22:33,595 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: shutdown group-586AB1A54FB5
2019-06-18 15:22:33,596 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-586AB1A54FB5,id=8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4
2019-06-18 15:22:33,596 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: shutdown LeaderState
2019-06-18 15:22:33,597 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4-PendingRequests: sendNotLeaderResponses
2019-06-18 15:22:33,599 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4-group-586AB1A54FB5: set stopIndex = 4
2019-06-18 15:22:33,600 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-18 15:22:33,600 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4bf5ef09-edda-46ec-8fd9-f275336dffd9/ratis/556ca746-5f77-4933-bc73-586ab1a54fb5/sm/snapshot.1_4
2019-06-18 15:22:33,608 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4:group-586AB1A54FB5 closes. The last applied log index is 4
2019-06-18 15:22:33,608 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 15:22:33,609 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4-RaftLogWorker close()
2019-06-18 15:22:33,610 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: shutdown server with port 46627 now
2019-06-18 15:22:33,614 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 8e2a5f9b-1b3c-4b6e-b849-e81cc0f4cab4: shutdown server with port 46627 successfully
2019-06-18 15:22:33,623 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 15:22:33,650 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler571da19d-3b33-4338-854b-642043135d8c/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 15:22:33,650 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler571da19d-3b33-4338-854b-642043135d8c/hdds to VolumeSet
2019-06-18 15:22:33,650 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@3a2b2322
2019-06-18 15:22:33,653 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@3a2b2322
2019-06-18 15:22:33,665 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 33711
2019-06-18 15:22:33,666 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 15:22:33,667 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 15:22:33,667 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 33711 (custom)
2019-06-18 15:22:33,667 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 15:22:33,667 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 15:22:33,667 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 15:22:33,668 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 15:22:33,669 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler571da19d-3b33-4338-854b-642043135d8c/ratis] (custom)
2019-06-18 15:22:33,669 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 46057
2019-06-18 15:22:33,669 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 15:22:33,669 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 15:22:33,670 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis e0c05765-a0a8-4310-8c33-358355f4ce67 at port 33711
2019-06-18 15:22:33,737 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - e0c05765-a0a8-4310-8c33-358355f4ce67: start RPC server
2019-06-18 15:22:33,740 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - e0c05765-a0a8-4310-8c33-358355f4ce67: GrpcService started, listening on 0.0.0.0/0.0.0.0:33711
2019-06-18 15:22:33,757 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - e0c05765-a0a8-4310-8c33-358355f4ce67: addNew group-BA0C59FA05FE:[e0c05765-a0a8-4310-8c33-358355f4ce67:127.0.0.1:33711] returns group-BA0C59FA05FE:java.util.concurrent.CompletableFuture@29d7872f[Not completed]
2019-06-18 15:22:33,766 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - e0c05765-a0a8-4310-8c33-358355f4ce67: new RaftServerImpl for group-BA0C59FA05FE:[e0c05765-a0a8-4310-8c33-358355f4ce67:127.0.0.1:33711] with ContainerStateMachine:uninitialized
2019-06-18 15:22:33,769 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 15:22:33,770 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 15:22:33,770 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 15:22:33,770 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 15:22:33,770 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - e0c05765-a0a8-4310-8c33-358355f4ce67:group-BA0C59FA05FE ConfigurationManager, init=-1: [e0c05765-a0a8-4310-8c33-358355f4ce67:127.0.0.1:33711], old=null, confs=<EMPTY_MAP>
2019-06-18 15:22:33,770 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler571da19d-3b33-4338-854b-642043135d8c/ratis] (custom)
2019-06-18 15:22:33,771 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler571da19d-3b33-4338-854b-642043135d8c/ratis/23d8192f-9fab-4fd2-b978-ba0c59fa05fe does not exist. Creating ...
2019-06-18 15:22:33,777 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler571da19d-3b33-4338-854b-642043135d8c/ratis/23d8192f-9fab-4fd2-b978-ba0c59fa05fe/in_use.lock acquired by nodename 4311@ozone-unit-076618677d39hrj9-3617017993
2019-06-18 15:22:33,780 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler571da19d-3b33-4338-854b-642043135d8c/ratis/23d8192f-9fab-4fd2-b978-ba0c59fa05fe has been successfully formatted.
2019-06-18 15:22:33,781 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 15:22:33,781 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 15:22:33,781 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 15:22:33,782 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 15:22:33,782 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 15:22:33,782 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 15:22:33,783 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new e0c05765-a0a8-4310-8c33-358355f4ce67-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler571da19d-3b33-4338-854b-642043135d8c/ratis/23d8192f-9fab-4fd2-b978-ba0c59fa05fe
2019-06-18 15:22:33,783 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 15:22:33,783 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 15:22:33,784 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 15:22:33,785 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 15:22:33,787 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 15:22:33,787 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 15:22:33,788 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 15:22:33,788 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 15:22:33,788 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 15:22:33,788 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 15:22:33,793 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 15:22:33,794 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 15:22:33,794 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 15:22:33,794 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - e0c05765-a0a8-4310-8c33-358355f4ce67: start group-BA0C59FA05FE
2019-06-18 15:22:33,794 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e0c05765-a0a8-4310-8c33-358355f4ce67:group-BA0C59FA05FE changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 15:22:33,794 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e0c05765-a0a8-4310-8c33-358355f4ce67: start FollowerState
2019-06-18 15:22:33,805 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA0C59FA05FE,id=e0c05765-a0a8-4310-8c33-358355f4ce67
2019-06-18 15:22:34,910 INFO  impl.FollowerState (FollowerState.java:run(101)) - e0c05765-a0a8-4310-8c33-358355f4ce67:group-BA0C59FA05FE changes to CANDIDATE, lastRpcTime:1116, electionTimeout:1105ms
2019-06-18 15:22:34,911 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - e0c05765-a0a8-4310-8c33-358355f4ce67: shutdown FollowerState
2019-06-18 15:22:34,911 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e0c05765-a0a8-4310-8c33-358355f4ce67:group-BA0C59FA05FE changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 15:22:34,911 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e0c05765-a0a8-4310-8c33-358355f4ce67: start LeaderElection
2019-06-18 15:22:34,916 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - e0c05765-a0a8-4310-8c33-358355f4ce67:group-BA0C59FA05FE:LeaderElection2: begin an election at term 1 for -1: [e0c05765-a0a8-4310-8c33-358355f4ce67:127.0.0.1:33711], old=null
2019-06-18 15:22:34,916 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - e0c05765-a0a8-4310-8c33-358355f4ce67: shutdown LeaderElection
2019-06-18 15:22:34,916 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e0c05765-a0a8-4310-8c33-358355f4ce67:group-BA0C59FA05FE changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 15:22:34,916 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - e0c05765-a0a8-4310-8c33-358355f4ce67:group-BA0C59FA05FE change Leader from null to e0c05765-a0a8-4310-8c33-358355f4ce67 at term 1 for becomeLeader, leader elected after 1135ms
2019-06-18 15:22:34,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 15:22:34,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 15:22:34,917 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 15:22:34,917 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 15:22:34,917 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e0c05765-a0a8-4310-8c33-358355f4ce67: start LeaderState
2019-06-18 15:22:34,917 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - e0c05765-a0a8-4310-8c33-358355f4ce67-RaftLogWorker: Starting segment from index:0
2019-06-18 15:22:34,918 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - e0c05765-a0a8-4310-8c33-358355f4ce67:group-BA0C59FA05FE set configuration 0: [e0c05765-a0a8-4310-8c33-358355f4ce67:127.0.0.1:33711], old=null at 0
2019-06-18 15:22:34,952 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - e0c05765-a0a8-4310-8c33-358355f4ce67-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler571da19d-3b33-4338-854b-642043135d8c/ratis/23d8192f-9fab-4fd2-b978-ba0c59fa05fe/current/log_inprogress_0
2019-06-18 15:22:35,872 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 15:22:35,873 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - e0c05765-a0a8-4310-8c33-358355f4ce67: close
2019-06-18 15:22:35,874 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - e0c05765-a0a8-4310-8c33-358355f4ce67: shutdown group-BA0C59FA05FE
2019-06-18 15:22:35,874 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA0C59FA05FE,id=e0c05765-a0a8-4310-8c33-358355f4ce67
2019-06-18 15:22:35,874 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - e0c05765-a0a8-4310-8c33-358355f4ce67: shutdown LeaderState
2019-06-18 15:22:35,875 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - e0c05765-a0a8-4310-8c33-358355f4ce67-PendingRequests: sendNotLeaderResponses
2019-06-18 15:22:35,877 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-e0c05765-a0a8-4310-8c33-358355f4ce67-group-BA0C59FA05FE: set stopIndex = 2
2019-06-18 15:22:35,877 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 15:22:35,877 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler571da19d-3b33-4338-854b-642043135d8c/ratis/23d8192f-9fab-4fd2-b978-ba0c59fa05fe/sm/snapshot.1_2
2019-06-18 15:22:35,878 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - e0c05765-a0a8-4310-8c33-358355f4ce67:group-BA0C59FA05FE closes. The last applied log index is 2
2019-06-18 15:22:35,878 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - e0c05765-a0a8-4310-8c33-358355f4ce67-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 15:22:35,879 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - e0c05765-a0a8-4310-8c33-358355f4ce67-RaftLogWorker close()
2019-06-18 15:22:35,880 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - e0c05765-a0a8-4310-8c33-358355f4ce67: shutdown server with port 33711 now
2019-06-18 15:22:35,882 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - e0c05765-a0a8-4310-8c33-358355f4ce67: shutdown server with port 33711 successfully
2019-06-18 15:22:35,891 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 15:22:35,923 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4efe3bd0-830f-480e-a4db-25501f048410/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 15:22:35,924 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4efe3bd0-830f-480e-a4db-25501f048410/hdds to VolumeSet
2019-06-18 15:22:35,924 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@38eb2c50
2019-06-18 15:22:35,925 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@38eb2c50
2019-06-18 15:22:35,939 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 38913
2019-06-18 15:22:35,945 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 15:22:35,948 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 15:22:35,949 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 38913 (custom)
2019-06-18 15:22:35,949 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 15:22:35,950 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 15:22:35,950 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 15:22:35,951 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 15:22:35,952 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4efe3bd0-830f-480e-a4db-25501f048410/ratis] (custom)
2019-06-18 15:22:35,953 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 36339
2019-06-18 15:22:35,953 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 15:22:35,954 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 15:22:35,954 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 308e4d56-1331-4415-ae83-d9791e253978 at port 38913
2019-06-18 15:22:35,981 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 308e4d56-1331-4415-ae83-d9791e253978: start RPC server
2019-06-18 15:22:35,983 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 308e4d56-1331-4415-ae83-d9791e253978: GrpcService started, listening on 0.0.0.0/0.0.0.0:38913
2019-06-18 15:22:35,994 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 308e4d56-1331-4415-ae83-d9791e253978: addNew group-8590EC914991:[308e4d56-1331-4415-ae83-d9791e253978:127.0.0.1:38913] returns group-8590EC914991:java.util.concurrent.CompletableFuture@d6292f1[Not completed]
2019-06-18 15:22:35,995 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 308e4d56-1331-4415-ae83-d9791e253978: new RaftServerImpl for group-8590EC914991:[308e4d56-1331-4415-ae83-d9791e253978:127.0.0.1:38913] with ContainerStateMachine:uninitialized
2019-06-18 15:22:35,996 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 15:22:35,996 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 15:22:35,996 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 15:22:35,996 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 15:22:35,996 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 308e4d56-1331-4415-ae83-d9791e253978:group-8590EC914991 ConfigurationManager, init=-1: [308e4d56-1331-4415-ae83-d9791e253978:127.0.0.1:38913], old=null, confs=<EMPTY_MAP>
2019-06-18 15:22:35,996 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4efe3bd0-830f-480e-a4db-25501f048410/ratis] (custom)
2019-06-18 15:22:35,997 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4efe3bd0-830f-480e-a4db-25501f048410/ratis/2eae9604-f7e7-421d-8dcd-8590ec914991 does not exist. Creating ...
2019-06-18 15:22:36,003 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4efe3bd0-830f-480e-a4db-25501f048410/ratis/2eae9604-f7e7-421d-8dcd-8590ec914991/in_use.lock acquired by nodename 4311@ozone-unit-076618677d39hrj9-3617017993
2019-06-18 15:22:36,005 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4efe3bd0-830f-480e-a4db-25501f048410/ratis/2eae9604-f7e7-421d-8dcd-8590ec914991 has been successfully formatted.
2019-06-18 15:22:36,006 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 15:22:36,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 15:22:36,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 15:22:36,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 15:22:36,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 15:22:36,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 15:22:36,007 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 308e4d56-1331-4415-ae83-d9791e253978-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4efe3bd0-830f-480e-a4db-25501f048410/ratis/2eae9604-f7e7-421d-8dcd-8590ec914991
2019-06-18 15:22:36,007 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 15:22:36,007 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 15:22:36,007 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 15:22:36,007 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 15:22:36,007 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 15:22:36,008 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 15:22:36,008 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 15:22:36,008 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 15:22:36,009 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 15:22:36,009 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 15:22:36,009 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 15:22:36,009 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 15:22:36,010 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 15:22:36,011 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 308e4d56-1331-4415-ae83-d9791e253978: start group-8590EC914991
2019-06-18 15:22:36,011 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 308e4d56-1331-4415-ae83-d9791e253978:group-8590EC914991 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 15:22:36,011 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 308e4d56-1331-4415-ae83-d9791e253978: start FollowerState
2019-06-18 15:22:36,011 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-8590EC914991,id=308e4d56-1331-4415-ae83-d9791e253978
2019-06-18 15:22:37,170 INFO  impl.FollowerState (FollowerState.java:run(101)) - 308e4d56-1331-4415-ae83-d9791e253978:group-8590EC914991 changes to CANDIDATE, lastRpcTime:1159, electionTimeout:1159ms
2019-06-18 15:22:37,170 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 308e4d56-1331-4415-ae83-d9791e253978: shutdown FollowerState
2019-06-18 15:22:37,171 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 308e4d56-1331-4415-ae83-d9791e253978:group-8590EC914991 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 15:22:37,171 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 308e4d56-1331-4415-ae83-d9791e253978: start LeaderElection
2019-06-18 15:22:37,175 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 308e4d56-1331-4415-ae83-d9791e253978:group-8590EC914991:LeaderElection3: begin an election at term 1 for -1: [308e4d56-1331-4415-ae83-d9791e253978:127.0.0.1:38913], old=null
2019-06-18 15:22:37,187 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 308e4d56-1331-4415-ae83-d9791e253978: shutdown LeaderElection
2019-06-18 15:22:37,187 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 308e4d56-1331-4415-ae83-d9791e253978:group-8590EC914991 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 15:22:37,187 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 308e4d56-1331-4415-ae83-d9791e253978:group-8590EC914991 change Leader from null to 308e4d56-1331-4415-ae83-d9791e253978 at term 1 for becomeLeader, leader elected after 1181ms
2019-06-18 15:22:37,188 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 15:22:37,188 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 15:22:37,188 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 15:22:37,188 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 15:22:37,189 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 308e4d56-1331-4415-ae83-d9791e253978: start LeaderState
2019-06-18 15:22:37,189 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 308e4d56-1331-4415-ae83-d9791e253978-RaftLogWorker: Starting segment from index:0
2019-06-18 15:22:37,198 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 308e4d56-1331-4415-ae83-d9791e253978:group-8590EC914991 set configuration 0: [308e4d56-1331-4415-ae83-d9791e253978:127.0.0.1:38913], old=null at 0
2019-06-18 15:22:37,231 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 308e4d56-1331-4415-ae83-d9791e253978-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4efe3bd0-830f-480e-a4db-25501f048410/ratis/2eae9604-f7e7-421d-8dcd-8590ec914991/current/log_inprogress_0
2019-06-18 15:22:38,087 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 2191517084746070535 is closed with bcsId 0.
2019-06-18 15:22:38,088 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 15:22:38,089 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 308e4d56-1331-4415-ae83-d9791e253978: close
2019-06-18 15:22:38,089 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 308e4d56-1331-4415-ae83-d9791e253978: shutdown group-8590EC914991
2019-06-18 15:22:38,090 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-8590EC914991,id=308e4d56-1331-4415-ae83-d9791e253978
2019-06-18 15:22:38,090 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 308e4d56-1331-4415-ae83-d9791e253978: shutdown LeaderState
2019-06-18 15:22:38,091 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 308e4d56-1331-4415-ae83-d9791e253978-PendingRequests: sendNotLeaderResponses
2019-06-18 15:22:38,092 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 15:22:38,092 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4efe3bd0-830f-480e-a4db-25501f048410/ratis/2eae9604-f7e7-421d-8dcd-8590ec914991/sm/snapshot.1_2
2019-06-18 15:22:38,093 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-308e4d56-1331-4415-ae83-d9791e253978-group-8590EC914991: set stopIndex = 2
2019-06-18 15:22:38,093 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 308e4d56-1331-4415-ae83-d9791e253978:group-8590EC914991 closes. The last applied log index is 2
2019-06-18 15:22:38,093 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 308e4d56-1331-4415-ae83-d9791e253978-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 15:22:38,095 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 308e4d56-1331-4415-ae83-d9791e253978-RaftLogWorker close()
2019-06-18 15:22:38,098 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 308e4d56-1331-4415-ae83-d9791e253978: shutdown server with port 38913 now
2019-06-18 15:22:38,101 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 308e4d56-1331-4415-ae83-d9791e253978: shutdown server with port 38913 successfully
2019-06-18 15:22:38,110 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 15:22:38,178 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb1e4e730-90f9-44af-80ec-c23e0e810c30/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 15:22:38,179 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb1e4e730-90f9-44af-80ec-c23e0e810c30/hdds to VolumeSet
2019-06-18 15:22:38,179 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@7318daf8
2019-06-18 15:22:38,180 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@7318daf8
2019-06-18 15:22:38,205 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 46669
2019-06-18 15:22:38,206 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 15:22:38,209 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 15:22:38,209 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 46669 (custom)
2019-06-18 15:22:38,209 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 15:22:38,210 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 15:22:38,210 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 15:22:38,210 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 15:22:38,211 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb1e4e730-90f9-44af-80ec-c23e0e810c30/ratis] (custom)
2019-06-18 15:22:38,211 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 38767
2019-06-18 15:22:38,212 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 15:22:38,212 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 15:22:38,212 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 04577237-8d44-464e-8cd2-e66a390be190 at port 46669
2019-06-18 15:22:38,220 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 04577237-8d44-464e-8cd2-e66a390be190: start RPC server
2019-06-18 15:22:38,224 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 04577237-8d44-464e-8cd2-e66a390be190: GrpcService started, listening on 0.0.0.0/0.0.0.0:46669
Jun 18, 2019 3:22:38 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:33711} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 18, 2019 3:22:38 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:38913} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-18 15:22:38,253 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 04577237-8d44-464e-8cd2-e66a390be190: addNew group-2318EE8ED81A:[04577237-8d44-464e-8cd2-e66a390be190:127.0.0.1:46669] returns group-2318EE8ED81A:java.util.concurrent.CompletableFuture@50081d97[Not completed]
2019-06-18 15:22:38,258 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 04577237-8d44-464e-8cd2-e66a390be190: new RaftServerImpl for group-2318EE8ED81A:[04577237-8d44-464e-8cd2-e66a390be190:127.0.0.1:46669] with ContainerStateMachine:uninitialized
2019-06-18 15:22:38,259 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 15:22:38,259 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 15:22:38,259 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 15:22:38,259 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 15:22:38,259 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 04577237-8d44-464e-8cd2-e66a390be190:group-2318EE8ED81A ConfigurationManager, init=-1: [04577237-8d44-464e-8cd2-e66a390be190:127.0.0.1:46669], old=null, confs=<EMPTY_MAP>
2019-06-18 15:22:38,260 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb1e4e730-90f9-44af-80ec-c23e0e810c30/ratis] (custom)
2019-06-18 15:22:38,260 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb1e4e730-90f9-44af-80ec-c23e0e810c30/ratis/8ac1bafd-fb03-4f80-8878-2318ee8ed81a does not exist. Creating ...
2019-06-18 15:22:38,264 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb1e4e730-90f9-44af-80ec-c23e0e810c30/ratis/8ac1bafd-fb03-4f80-8878-2318ee8ed81a/in_use.lock acquired by nodename 4311@ozone-unit-076618677d39hrj9-3617017993
2019-06-18 15:22:38,266 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb1e4e730-90f9-44af-80ec-c23e0e810c30/ratis/8ac1bafd-fb03-4f80-8878-2318ee8ed81a has been successfully formatted.
2019-06-18 15:22:38,267 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 15:22:38,267 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 15:22:38,267 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 15:22:38,267 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 15:22:38,268 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 15:22:38,268 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 15:22:38,268 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 04577237-8d44-464e-8cd2-e66a390be190-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb1e4e730-90f9-44af-80ec-c23e0e810c30/ratis/8ac1bafd-fb03-4f80-8878-2318ee8ed81a
2019-06-18 15:22:38,269 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 15:22:38,269 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 15:22:38,269 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 15:22:38,269 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 15:22:38,269 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 15:22:38,270 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 15:22:38,270 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 15:22:38,270 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 15:22:38,270 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 15:22:38,270 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 15:22:38,271 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 15:22:38,271 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 15:22:38,271 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 15:22:38,271 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 04577237-8d44-464e-8cd2-e66a390be190: start group-2318EE8ED81A
2019-06-18 15:22:38,271 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 04577237-8d44-464e-8cd2-e66a390be190:group-2318EE8ED81A changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 15:22:38,272 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 04577237-8d44-464e-8cd2-e66a390be190: start FollowerState
2019-06-18 15:22:38,272 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2318EE8ED81A,id=04577237-8d44-464e-8cd2-e66a390be190
2019-06-18 15:22:39,427 INFO  impl.FollowerState (FollowerState.java:run(101)) - 04577237-8d44-464e-8cd2-e66a390be190:group-2318EE8ED81A changes to CANDIDATE, lastRpcTime:1155, electionTimeout:1155ms
2019-06-18 15:22:39,427 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 04577237-8d44-464e-8cd2-e66a390be190: shutdown FollowerState
2019-06-18 15:22:39,427 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 04577237-8d44-464e-8cd2-e66a390be190:group-2318EE8ED81A changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 15:22:39,427 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 04577237-8d44-464e-8cd2-e66a390be190: start LeaderElection
2019-06-18 15:22:39,432 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 04577237-8d44-464e-8cd2-e66a390be190:group-2318EE8ED81A:LeaderElection4: begin an election at term 1 for -1: [04577237-8d44-464e-8cd2-e66a390be190:127.0.0.1:46669], old=null
2019-06-18 15:22:39,432 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 04577237-8d44-464e-8cd2-e66a390be190: shutdown LeaderElection
2019-06-18 15:22:39,432 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 04577237-8d44-464e-8cd2-e66a390be190:group-2318EE8ED81A changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 15:22:39,432 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 04577237-8d44-464e-8cd2-e66a390be190:group-2318EE8ED81A change Leader from null to 04577237-8d44-464e-8cd2-e66a390be190 at term 1 for becomeLeader, leader elected after 1165ms
2019-06-18 15:22:39,432 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 15:22:39,433 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 15:22:39,433 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 15:22:39,433 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 15:22:39,433 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 04577237-8d44-464e-8cd2-e66a390be190: start LeaderState
2019-06-18 15:22:39,433 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 04577237-8d44-464e-8cd2-e66a390be190-RaftLogWorker: Starting segment from index:0
2019-06-18 15:22:39,454 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 04577237-8d44-464e-8cd2-e66a390be190:group-2318EE8ED81A set configuration 0: [04577237-8d44-464e-8cd2-e66a390be190:127.0.0.1:46669], old=null at 0
2019-06-18 15:22:39,477 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 04577237-8d44-464e-8cd2-e66a390be190-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb1e4e730-90f9-44af-80ec-c23e0e810c30/ratis/8ac1bafd-fb03-4f80-8878-2318ee8ed81a/current/log_inprogress_0
2019-06-18 15:22:40,365 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 3460170661614705919 is closed with bcsId 0.
2019-06-18 15:22:40,366 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 15:22:40,366 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 04577237-8d44-464e-8cd2-e66a390be190: close
2019-06-18 15:22:40,366 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 04577237-8d44-464e-8cd2-e66a390be190: shutdown group-2318EE8ED81A
2019-06-18 15:22:40,367 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2318EE8ED81A,id=04577237-8d44-464e-8cd2-e66a390be190
2019-06-18 15:22:40,367 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 04577237-8d44-464e-8cd2-e66a390be190: shutdown LeaderState
2019-06-18 15:22:40,368 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 04577237-8d44-464e-8cd2-e66a390be190-PendingRequests: sendNotLeaderResponses
2019-06-18 15:22:40,369 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-04577237-8d44-464e-8cd2-e66a390be190-group-2318EE8ED81A: set stopIndex = 2
2019-06-18 15:22:40,373 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 15:22:40,373 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb1e4e730-90f9-44af-80ec-c23e0e810c30/ratis/8ac1bafd-fb03-4f80-8878-2318ee8ed81a/sm/snapshot.1_2
2019-06-18 15:22:40,374 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 04577237-8d44-464e-8cd2-e66a390be190:group-2318EE8ED81A closes. The last applied log index is 2
2019-06-18 15:22:40,374 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 04577237-8d44-464e-8cd2-e66a390be190-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 15:22:40,375 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 04577237-8d44-464e-8cd2-e66a390be190-RaftLogWorker close()
2019-06-18 15:22:40,376 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 04577237-8d44-464e-8cd2-e66a390be190: shutdown server with port 46669 now
2019-06-18 15:22:40,380 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 04577237-8d44-464e-8cd2-e66a390be190: shutdown server with port 46669 successfully
2019-06-18 15:22:40,387 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 15:22:40,416 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc4d960f9-2a24-418c-80a9-8d5774f4b0da/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 15:22:40,417 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc4d960f9-2a24-418c-80a9-8d5774f4b0da/hdds to VolumeSet
2019-06-18 15:22:40,417 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@3e5d4f6b
2019-06-18 15:22:40,424 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@3e5d4f6b
2019-06-18 15:22:40,446 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 44905
2019-06-18 15:22:40,447 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 15:22:40,448 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 15:22:40,448 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 44905 (custom)
2019-06-18 15:22:40,449 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 15:22:40,449 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 15:22:40,449 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 15:22:40,449 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 15:22:40,450 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc4d960f9-2a24-418c-80a9-8d5774f4b0da/ratis] (custom)
2019-06-18 15:22:40,450 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 34367
2019-06-18 15:22:40,451 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 15:22:40,451 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 15:22:40,453 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 86ba573a-661b-4c48-98f3-bf5b75195535 at port 44905
2019-06-18 15:22:40,481 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 86ba573a-661b-4c48-98f3-bf5b75195535: start RPC server
2019-06-18 15:22:40,483 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 86ba573a-661b-4c48-98f3-bf5b75195535: GrpcService started, listening on 0.0.0.0/0.0.0.0:44905
2019-06-18 15:22:40,508 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 86ba573a-661b-4c48-98f3-bf5b75195535: addNew group-75924CB16CBD:[86ba573a-661b-4c48-98f3-bf5b75195535:127.0.0.1:44905] returns group-75924CB16CBD:java.util.concurrent.CompletableFuture@a5c1cc3[Not completed]
2019-06-18 15:22:40,509 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 86ba573a-661b-4c48-98f3-bf5b75195535: new RaftServerImpl for group-75924CB16CBD:[86ba573a-661b-4c48-98f3-bf5b75195535:127.0.0.1:44905] with ContainerStateMachine:uninitialized
2019-06-18 15:22:40,509 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 15:22:40,509 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 15:22:40,509 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 15:22:40,510 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 15:22:40,510 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 86ba573a-661b-4c48-98f3-bf5b75195535:group-75924CB16CBD ConfigurationManager, init=-1: [86ba573a-661b-4c48-98f3-bf5b75195535:127.0.0.1:44905], old=null, confs=<EMPTY_MAP>
2019-06-18 15:22:40,510 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc4d960f9-2a24-418c-80a9-8d5774f4b0da/ratis] (custom)
2019-06-18 15:22:40,510 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc4d960f9-2a24-418c-80a9-8d5774f4b0da/ratis/dc298202-805a-479d-aabe-75924cb16cbd does not exist. Creating ...
2019-06-18 15:22:40,514 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc4d960f9-2a24-418c-80a9-8d5774f4b0da/ratis/dc298202-805a-479d-aabe-75924cb16cbd/in_use.lock acquired by nodename 4311@ozone-unit-076618677d39hrj9-3617017993
2019-06-18 15:22:40,516 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc4d960f9-2a24-418c-80a9-8d5774f4b0da/ratis/dc298202-805a-479d-aabe-75924cb16cbd has been successfully formatted.
2019-06-18 15:22:40,517 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 15:22:40,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 15:22:40,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 15:22:40,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 15:22:40,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 15:22:40,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 15:22:40,518 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 86ba573a-661b-4c48-98f3-bf5b75195535-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc4d960f9-2a24-418c-80a9-8d5774f4b0da/ratis/dc298202-805a-479d-aabe-75924cb16cbd
2019-06-18 15:22:40,518 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 15:22:40,518 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 15:22:40,518 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 15:22:40,518 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 15:22:40,518 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 15:22:40,518 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 15:22:40,519 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 15:22:40,519 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 15:22:40,519 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 15:22:40,519 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 15:22:40,520 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 15:22:40,520 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 15:22:40,520 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 15:22:40,520 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 86ba573a-661b-4c48-98f3-bf5b75195535: start group-75924CB16CBD
2019-06-18 15:22:40,520 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 86ba573a-661b-4c48-98f3-bf5b75195535:group-75924CB16CBD changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 15:22:40,520 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 86ba573a-661b-4c48-98f3-bf5b75195535: start FollowerState
2019-06-18 15:22:40,521 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-75924CB16CBD,id=86ba573a-661b-4c48-98f3-bf5b75195535
2019-06-18 15:22:41,527 INFO  impl.FollowerState (FollowerState.java:run(101)) - 86ba573a-661b-4c48-98f3-bf5b75195535:group-75924CB16CBD changes to CANDIDATE, lastRpcTime:1006, electionTimeout:1006ms
2019-06-18 15:22:41,527 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 86ba573a-661b-4c48-98f3-bf5b75195535: shutdown FollowerState
2019-06-18 15:22:41,527 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 86ba573a-661b-4c48-98f3-bf5b75195535:group-75924CB16CBD changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 15:22:41,527 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 86ba573a-661b-4c48-98f3-bf5b75195535: start LeaderElection
2019-06-18 15:22:41,531 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 86ba573a-661b-4c48-98f3-bf5b75195535:group-75924CB16CBD:LeaderElection5: begin an election at term 1 for -1: [86ba573a-661b-4c48-98f3-bf5b75195535:127.0.0.1:44905], old=null
2019-06-18 15:22:41,532 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 86ba573a-661b-4c48-98f3-bf5b75195535: shutdown LeaderElection
2019-06-18 15:22:41,532 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 86ba573a-661b-4c48-98f3-bf5b75195535:group-75924CB16CBD changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 15:22:41,532 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 86ba573a-661b-4c48-98f3-bf5b75195535:group-75924CB16CBD change Leader from null to 86ba573a-661b-4c48-98f3-bf5b75195535 at term 1 for becomeLeader, leader elected after 1014ms
2019-06-18 15:22:41,532 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 15:22:41,532 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 15:22:41,532 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 15:22:41,532 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 15:22:41,533 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 86ba573a-661b-4c48-98f3-bf5b75195535: start LeaderState
2019-06-18 15:22:41,535 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 86ba573a-661b-4c48-98f3-bf5b75195535-RaftLogWorker: Starting segment from index:0
2019-06-18 15:22:41,553 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 86ba573a-661b-4c48-98f3-bf5b75195535:group-75924CB16CBD set configuration 0: [86ba573a-661b-4c48-98f3-bf5b75195535:127.0.0.1:44905], old=null at 0
2019-06-18 15:22:41,584 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 86ba573a-661b-4c48-98f3-bf5b75195535-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc4d960f9-2a24-418c-80a9-8d5774f4b0da/ratis/dc298202-805a-479d-aabe-75924cb16cbd/current/log_inprogress_0
2019-06-18 15:22:42,575 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 6673364381882511602 is closed with bcsId 0.
2019-06-18 15:22:42,576 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 15:22:42,576 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 86ba573a-661b-4c48-98f3-bf5b75195535: close
2019-06-18 15:22:42,577 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 86ba573a-661b-4c48-98f3-bf5b75195535: shutdown group-75924CB16CBD
2019-06-18 15:22:42,577 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-75924CB16CBD,id=86ba573a-661b-4c48-98f3-bf5b75195535
2019-06-18 15:22:42,577 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 86ba573a-661b-4c48-98f3-bf5b75195535: shutdown LeaderState
2019-06-18 15:22:42,578 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 86ba573a-661b-4c48-98f3-bf5b75195535-PendingRequests: sendNotLeaderResponses
2019-06-18 15:22:42,579 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-86ba573a-661b-4c48-98f3-bf5b75195535-group-75924CB16CBD: set stopIndex = 4
2019-06-18 15:22:42,579 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-18 15:22:42,580 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc4d960f9-2a24-418c-80a9-8d5774f4b0da/ratis/dc298202-805a-479d-aabe-75924cb16cbd/sm/snapshot.1_4
2019-06-18 15:22:42,580 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 86ba573a-661b-4c48-98f3-bf5b75195535:group-75924CB16CBD closes. The last applied log index is 4
2019-06-18 15:22:42,580 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 86ba573a-661b-4c48-98f3-bf5b75195535-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 15:22:42,581 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 86ba573a-661b-4c48-98f3-bf5b75195535-RaftLogWorker close()
2019-06-18 15:22:42,582 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 86ba573a-661b-4c48-98f3-bf5b75195535: shutdown server with port 44905 now
2019-06-18 15:22:42,584 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 86ba573a-661b-4c48-98f3-bf5b75195535: shutdown server with port 44905 successfully
2019-06-18 15:22:42,591 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
