2019-06-18 02:48:05,825 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7c5d6dcc-9f6d-4b8d-93bf-dc7209417e03/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 02:48:05,829 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7c5d6dcc-9f6d-4b8d-93bf-dc7209417e03/hdds to VolumeSet
2019-06-18 02:48:05,839 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
2019-06-18 02:48:05,879 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-06-18 02:48:06,182 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 35027
2019-06-18 02:48:06,635 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 02:48:06,662 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 02:48:06,671 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 35027 (custom)
2019-06-18 02:48:06,672 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 02:48:06,675 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 02:48:06,675 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 02:48:06,676 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 02:48:06,805 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7c5d6dcc-9f6d-4b8d-93bf-dc7209417e03/ratis] (custom)
2019-06-18 02:48:06,814 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 43487
2019-06-18 02:48:06,836 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 02:48:06,836 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 02:48:06,837 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4 at port 35027
2019-06-18 02:48:06,852 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: start RPC server
2019-06-18 02:48:06,999 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: GrpcService started, listening on 0.0.0.0/0.0.0.0:35027
2019-06-18 02:48:07,294 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: addNew group-12A810190176:[e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:127.0.0.1:35027] returns group-12A810190176:java.util.concurrent.CompletableFuture@5cec4b89[Not completed]
2019-06-18 02:48:07,321 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: new RaftServerImpl for group-12A810190176:[e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:127.0.0.1:35027] with ContainerStateMachine:uninitialized
2019-06-18 02:48:07,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 02:48:07,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 02:48:07,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 02:48:07,323 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 02:48:07,328 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:group-12A810190176 ConfigurationManager, init=-1: [e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:127.0.0.1:35027], old=null, confs=<EMPTY_MAP>
2019-06-18 02:48:07,328 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7c5d6dcc-9f6d-4b8d-93bf-dc7209417e03/ratis] (custom)
2019-06-18 02:48:07,335 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7c5d6dcc-9f6d-4b8d-93bf-dc7209417e03/ratis/7fa44c41-9186-4b8e-9c87-12a810190176 does not exist. Creating ...
2019-06-18 02:48:07,344 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7c5d6dcc-9f6d-4b8d-93bf-dc7209417e03/ratis/7fa44c41-9186-4b8e-9c87-12a810190176/in_use.lock acquired by nodename 4307@ozone-unit-076618677d3mvl88-4038351654
2019-06-18 02:48:07,357 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7c5d6dcc-9f6d-4b8d-93bf-dc7209417e03/ratis/7fa44c41-9186-4b8e-9c87-12a810190176 has been successfully formatted.
2019-06-18 02:48:07,359 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 02:48:07,359 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 02:48:07,361 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 02:48:07,363 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 02:48:07,366 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 02:48:07,369 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 02:48:07,372 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7c5d6dcc-9f6d-4b8d-93bf-dc7209417e03/ratis/7fa44c41-9186-4b8e-9c87-12a810190176
2019-06-18 02:48:07,372 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 02:48:07,373 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 02:48:07,375 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 02:48:07,375 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 02:48:07,376 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 02:48:07,376 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 02:48:07,377 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 02:48:07,378 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 02:48:07,378 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 02:48:07,380 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 02:48:07,386 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 02:48:07,387 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 02:48:07,387 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 02:48:07,497 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: start group-12A810190176
2019-06-18 02:48:07,498 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:group-12A810190176 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 02:48:07,499 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: start FollowerState
2019-06-18 02:48:07,500 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-12A810190176,id=e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4
2019-06-18 02:48:08,580 INFO  impl.FollowerState (FollowerState.java:run(101)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:group-12A810190176 changes to CANDIDATE, lastRpcTime:1081, electionTimeout:1081ms
2019-06-18 02:48:08,580 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: shutdown FollowerState
2019-06-18 02:48:08,581 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:group-12A810190176 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 02:48:08,582 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: start LeaderElection
2019-06-18 02:48:08,743 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:group-12A810190176:LeaderElection1: begin an election at term 1 for -1: [e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:127.0.0.1:35027], old=null
2019-06-18 02:48:08,745 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: shutdown LeaderElection
2019-06-18 02:48:08,745 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:group-12A810190176 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 02:48:08,746 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:group-12A810190176 change Leader from null to e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4 at term 1 for becomeLeader, leader elected after 1386ms
2019-06-18 02:48:08,750 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 02:48:08,750 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 02:48:08,752 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 02:48:08,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 02:48:08,763 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: start LeaderState
2019-06-18 02:48:08,775 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4-RaftLogWorker: Starting segment from index:0
2019-06-18 02:48:08,784 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:group-12A810190176 set configuration 0: [e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:127.0.0.1:35027], old=null at 0
2019-06-18 02:48:08,926 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7c5d6dcc-9f6d-4b8d-93bf-dc7209417e03/ratis/7fa44c41-9186-4b8e-9c87-12a810190176/current/log_inprogress_0
2019-06-18 02:48:09,740 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-06-18 02:48:09,811 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 6489938531692247810 is closed with bcsId 0.
2019-06-18 02:48:09,812 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 02:48:09,813 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: close
2019-06-18 02:48:09,814 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: shutdown group-12A810190176
2019-06-18 02:48:09,815 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-12A810190176,id=e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4
2019-06-18 02:48:09,815 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: shutdown LeaderState
2019-06-18 02:48:09,815 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4-PendingRequests: sendNotLeaderResponses
2019-06-18 02:48:09,817 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4-group-12A810190176: set stopIndex = 4
2019-06-18 02:48:09,817 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-18 02:48:09,818 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7c5d6dcc-9f6d-4b8d-93bf-dc7209417e03/ratis/7fa44c41-9186-4b8e-9c87-12a810190176/sm/snapshot.1_4
2019-06-18 02:48:09,825 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4:group-12A810190176 closes. The last applied log index is 4
2019-06-18 02:48:09,826 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 02:48:09,827 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4-RaftLogWorker close()
2019-06-18 02:48:09,828 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: shutdown server with port 35027 now
2019-06-18 02:48:09,831 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - e64ab4b6-9f37-4d1c-8e67-1ebe8754aec4: shutdown server with port 35027 successfully
2019-06-18 02:48:09,841 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 02:48:09,868 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb6f2eaac-4197-4723-a2b3-ef3558592e3b/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 02:48:09,868 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb6f2eaac-4197-4723-a2b3-ef3558592e3b/hdds to VolumeSet
2019-06-18 02:48:09,869 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@3a2b2322
2019-06-18 02:48:09,869 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@3a2b2322
2019-06-18 02:48:09,880 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 46287
2019-06-18 02:48:09,883 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 02:48:09,883 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 02:48:09,883 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 46287 (custom)
2019-06-18 02:48:09,884 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 02:48:09,884 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 02:48:09,884 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 02:48:09,884 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 02:48:09,885 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb6f2eaac-4197-4723-a2b3-ef3558592e3b/ratis] (custom)
2019-06-18 02:48:09,885 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 37175
2019-06-18 02:48:09,886 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 02:48:09,886 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 02:48:09,886 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5 at port 46287
2019-06-18 02:48:09,910 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: start RPC server
2019-06-18 02:48:09,911 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: GrpcService started, listening on 0.0.0.0/0.0.0.0:46287
2019-06-18 02:48:09,923 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: addNew group-0A24A7D8394C:[24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:127.0.0.1:46287] returns group-0A24A7D8394C:java.util.concurrent.CompletableFuture@6ecaa23[Not completed]
2019-06-18 02:48:09,925 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: new RaftServerImpl for group-0A24A7D8394C:[24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:127.0.0.1:46287] with ContainerStateMachine:uninitialized
2019-06-18 02:48:09,925 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 02:48:09,925 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 02:48:09,925 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 02:48:09,925 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 02:48:09,925 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:group-0A24A7D8394C ConfigurationManager, init=-1: [24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:127.0.0.1:46287], old=null, confs=<EMPTY_MAP>
2019-06-18 02:48:09,926 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb6f2eaac-4197-4723-a2b3-ef3558592e3b/ratis] (custom)
2019-06-18 02:48:09,926 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb6f2eaac-4197-4723-a2b3-ef3558592e3b/ratis/01f1bb66-4916-4fd4-9fcc-0a24a7d8394c does not exist. Creating ...
2019-06-18 02:48:09,929 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb6f2eaac-4197-4723-a2b3-ef3558592e3b/ratis/01f1bb66-4916-4fd4-9fcc-0a24a7d8394c/in_use.lock acquired by nodename 4307@ozone-unit-076618677d3mvl88-4038351654
2019-06-18 02:48:09,931 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb6f2eaac-4197-4723-a2b3-ef3558592e3b/ratis/01f1bb66-4916-4fd4-9fcc-0a24a7d8394c has been successfully formatted.
2019-06-18 02:48:09,931 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 02:48:09,931 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 02:48:09,932 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 02:48:09,932 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 02:48:09,932 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 02:48:09,932 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 02:48:09,932 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb6f2eaac-4197-4723-a2b3-ef3558592e3b/ratis/01f1bb66-4916-4fd4-9fcc-0a24a7d8394c
2019-06-18 02:48:09,932 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 02:48:09,932 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 02:48:09,933 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 02:48:09,933 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 02:48:09,933 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 02:48:09,933 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 02:48:09,933 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 02:48:09,933 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 02:48:09,933 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 02:48:09,934 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 02:48:09,934 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 02:48:09,934 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 02:48:09,934 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 02:48:09,935 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: start group-0A24A7D8394C
2019-06-18 02:48:09,935 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:group-0A24A7D8394C changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 02:48:09,935 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: start FollowerState
2019-06-18 02:48:09,935 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-0A24A7D8394C,id=24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5
2019-06-18 02:48:11,079 INFO  impl.FollowerState (FollowerState.java:run(101)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:group-0A24A7D8394C changes to CANDIDATE, lastRpcTime:1143, electionTimeout:1143ms
2019-06-18 02:48:11,079 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: shutdown FollowerState
2019-06-18 02:48:11,080 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:group-0A24A7D8394C changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 02:48:11,080 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: start LeaderElection
2019-06-18 02:48:11,085 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:group-0A24A7D8394C:LeaderElection2: begin an election at term 1 for -1: [24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:127.0.0.1:46287], old=null
2019-06-18 02:48:11,085 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: shutdown LeaderElection
2019-06-18 02:48:11,085 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:group-0A24A7D8394C changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 02:48:11,085 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:group-0A24A7D8394C change Leader from null to 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5 at term 1 for becomeLeader, leader elected after 1153ms
2019-06-18 02:48:11,085 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 02:48:11,086 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 02:48:11,086 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 02:48:11,086 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 02:48:11,086 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: start LeaderState
2019-06-18 02:48:11,086 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5-RaftLogWorker: Starting segment from index:0
2019-06-18 02:48:11,090 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:group-0A24A7D8394C set configuration 0: [24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:127.0.0.1:46287], old=null at 0
2019-06-18 02:48:11,125 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb6f2eaac-4197-4723-a2b3-ef3558592e3b/ratis/01f1bb66-4916-4fd4-9fcc-0a24a7d8394c/current/log_inprogress_0
2019-06-18 02:48:11,972 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 02:48:11,973 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: close
2019-06-18 02:48:11,973 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: shutdown group-0A24A7D8394C
2019-06-18 02:48:11,974 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-0A24A7D8394C,id=24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5
2019-06-18 02:48:11,974 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: shutdown LeaderState
2019-06-18 02:48:11,975 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5-PendingRequests: sendNotLeaderResponses
2019-06-18 02:48:11,976 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5-group-0A24A7D8394C: set stopIndex = 2
2019-06-18 02:48:11,976 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 02:48:11,976 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerb6f2eaac-4197-4723-a2b3-ef3558592e3b/ratis/01f1bb66-4916-4fd4-9fcc-0a24a7d8394c/sm/snapshot.1_2
2019-06-18 02:48:11,977 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5:group-0A24A7D8394C closes. The last applied log index is 2
2019-06-18 02:48:11,977 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 02:48:11,978 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5-RaftLogWorker close()
2019-06-18 02:48:11,979 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: shutdown server with port 46287 now
2019-06-18 02:48:11,980 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 24f3a1c0-18fa-4f08-9d58-33b9b9fbbaa5: shutdown server with port 46287 successfully
2019-06-18 02:48:11,982 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 02:48:12,012 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler95be2e65-a5b2-43c6-b71a-76fe21877db1/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 02:48:12,012 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler95be2e65-a5b2-43c6-b71a-76fe21877db1/hdds to VolumeSet
2019-06-18 02:48:12,013 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@26a2f7f9
2019-06-18 02:48:12,013 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@26a2f7f9
2019-06-18 02:48:12,024 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 37287
2019-06-18 02:48:12,025 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 02:48:12,026 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 02:48:12,026 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 37287 (custom)
2019-06-18 02:48:12,026 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 02:48:12,027 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 02:48:12,027 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 02:48:12,027 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 02:48:12,028 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler95be2e65-a5b2-43c6-b71a-76fe21877db1/ratis] (custom)
2019-06-18 02:48:12,028 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 45561
2019-06-18 02:48:12,029 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 02:48:12,029 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 02:48:12,029 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 887e1507-5ef4-4128-a6e5-c93c3c15e4eb at port 37287
2019-06-18 02:48:12,037 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: start RPC server
2019-06-18 02:48:12,038 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: GrpcService started, listening on 0.0.0.0/0.0.0.0:37287
2019-06-18 02:48:12,049 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: addNew group-68263A659BC7:[887e1507-5ef4-4128-a6e5-c93c3c15e4eb:127.0.0.1:37287] returns group-68263A659BC7:java.util.concurrent.CompletableFuture@dfbd2a6[Not completed]
2019-06-18 02:48:12,049 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: new RaftServerImpl for group-68263A659BC7:[887e1507-5ef4-4128-a6e5-c93c3c15e4eb:127.0.0.1:37287] with ContainerStateMachine:uninitialized
2019-06-18 02:48:12,050 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 02:48:12,050 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 02:48:12,050 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 02:48:12,050 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 02:48:12,051 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb:group-68263A659BC7 ConfigurationManager, init=-1: [887e1507-5ef4-4128-a6e5-c93c3c15e4eb:127.0.0.1:37287], old=null, confs=<EMPTY_MAP>
2019-06-18 02:48:12,051 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler95be2e65-a5b2-43c6-b71a-76fe21877db1/ratis] (custom)
2019-06-18 02:48:12,051 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler95be2e65-a5b2-43c6-b71a-76fe21877db1/ratis/d3b0a3ab-f392-4718-9f84-68263a659bc7 does not exist. Creating ...
2019-06-18 02:48:12,055 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler95be2e65-a5b2-43c6-b71a-76fe21877db1/ratis/d3b0a3ab-f392-4718-9f84-68263a659bc7/in_use.lock acquired by nodename 4307@ozone-unit-076618677d3mvl88-4038351654
2019-06-18 02:48:12,057 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler95be2e65-a5b2-43c6-b71a-76fe21877db1/ratis/d3b0a3ab-f392-4718-9f84-68263a659bc7 has been successfully formatted.
2019-06-18 02:48:12,057 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 02:48:12,057 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 02:48:12,057 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 02:48:12,057 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 02:48:12,058 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 02:48:12,058 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 02:48:12,058 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 887e1507-5ef4-4128-a6e5-c93c3c15e4eb-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler95be2e65-a5b2-43c6-b71a-76fe21877db1/ratis/d3b0a3ab-f392-4718-9f84-68263a659bc7
2019-06-18 02:48:12,058 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 02:48:12,058 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 02:48:12,058 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 02:48:12,058 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 02:48:12,058 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 02:48:12,058 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 02:48:12,059 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 02:48:12,059 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 02:48:12,059 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 02:48:12,059 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 02:48:12,059 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 02:48:12,059 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 02:48:12,059 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 02:48:12,060 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: start group-68263A659BC7
2019-06-18 02:48:12,060 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb:group-68263A659BC7 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 02:48:12,060 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: start FollowerState
2019-06-18 02:48:12,060 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-68263A659BC7,id=887e1507-5ef4-4128-a6e5-c93c3c15e4eb
2019-06-18 02:48:13,121 INFO  impl.FollowerState (FollowerState.java:run(101)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb:group-68263A659BC7 changes to CANDIDATE, lastRpcTime:1061, electionTimeout:1061ms
2019-06-18 02:48:13,121 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: shutdown FollowerState
2019-06-18 02:48:13,121 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb:group-68263A659BC7 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 02:48:13,122 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: start LeaderElection
2019-06-18 02:48:13,125 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb:group-68263A659BC7:LeaderElection3: begin an election at term 1 for -1: [887e1507-5ef4-4128-a6e5-c93c3c15e4eb:127.0.0.1:37287], old=null
2019-06-18 02:48:13,126 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: shutdown LeaderElection
2019-06-18 02:48:13,126 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb:group-68263A659BC7 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 02:48:13,126 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb:group-68263A659BC7 change Leader from null to 887e1507-5ef4-4128-a6e5-c93c3c15e4eb at term 1 for becomeLeader, leader elected after 1068ms
2019-06-18 02:48:13,126 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 02:48:13,126 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 02:48:13,126 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 02:48:13,126 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 02:48:13,127 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: start LeaderState
2019-06-18 02:48:13,127 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb-RaftLogWorker: Starting segment from index:0
2019-06-18 02:48:13,128 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb:group-68263A659BC7 set configuration 0: [887e1507-5ef4-4128-a6e5-c93c3c15e4eb:127.0.0.1:37287], old=null at 0
2019-06-18 02:48:13,168 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler95be2e65-a5b2-43c6-b71a-76fe21877db1/ratis/d3b0a3ab-f392-4718-9f84-68263a659bc7/current/log_inprogress_0
2019-06-18 02:48:14,124 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 78677879924667340 is closed with bcsId 0.
2019-06-18 02:48:14,125 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 02:48:14,125 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: close
2019-06-18 02:48:14,126 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: shutdown group-68263A659BC7
2019-06-18 02:48:14,126 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-68263A659BC7,id=887e1507-5ef4-4128-a6e5-c93c3c15e4eb
2019-06-18 02:48:14,126 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: shutdown LeaderState
2019-06-18 02:48:14,130 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb-PendingRequests: sendNotLeaderResponses
2019-06-18 02:48:14,131 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-887e1507-5ef4-4128-a6e5-c93c3c15e4eb-group-68263A659BC7: set stopIndex = 2
2019-06-18 02:48:14,131 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 02:48:14,132 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler95be2e65-a5b2-43c6-b71a-76fe21877db1/ratis/d3b0a3ab-f392-4718-9f84-68263a659bc7/sm/snapshot.1_2
2019-06-18 02:48:14,137 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb:group-68263A659BC7 closes. The last applied log index is 2
2019-06-18 02:48:14,142 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 02:48:14,144 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb-RaftLogWorker close()
2019-06-18 02:48:14,145 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: shutdown server with port 37287 now
2019-06-18 02:48:14,149 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 887e1507-5ef4-4128-a6e5-c93c3c15e4eb: shutdown server with port 37287 successfully
2019-06-18 02:48:14,161 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 02:48:14,239 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleree1cf0c3-e54c-4986-8310-50857f58a060/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 02:48:14,239 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleree1cf0c3-e54c-4986-8310-50857f58a060/hdds to VolumeSet
2019-06-18 02:48:14,239 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@66153688
2019-06-18 02:48:14,242 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@66153688
2019-06-18 02:48:14,253 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 33285
2019-06-18 02:48:14,254 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 02:48:14,255 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 02:48:14,255 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 33285 (custom)
2019-06-18 02:48:14,255 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 02:48:14,255 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 02:48:14,256 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 02:48:14,256 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 02:48:14,256 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleree1cf0c3-e54c-4986-8310-50857f58a060/ratis] (custom)
2019-06-18 02:48:14,257 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 36147
2019-06-18 02:48:14,257 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 02:48:14,257 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 02:48:14,257 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis b3d7a949-442e-4e97-8310-02de86117f25 at port 33285
2019-06-18 02:48:14,273 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - b3d7a949-442e-4e97-8310-02de86117f25: start RPC server
2019-06-18 02:48:14,275 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - b3d7a949-442e-4e97-8310-02de86117f25: GrpcService started, listening on 0.0.0.0/0.0.0.0:33285
Jun 18, 2019 2:48:14 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:46287} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 18, 2019 2:48:14 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:37287} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-18 02:48:14,297 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - b3d7a949-442e-4e97-8310-02de86117f25: addNew group-E2E9BC25D3D5:[b3d7a949-442e-4e97-8310-02de86117f25:127.0.0.1:33285] returns group-E2E9BC25D3D5:java.util.concurrent.CompletableFuture@67d30316[Not completed]
2019-06-18 02:48:14,299 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - b3d7a949-442e-4e97-8310-02de86117f25: new RaftServerImpl for group-E2E9BC25D3D5:[b3d7a949-442e-4e97-8310-02de86117f25:127.0.0.1:33285] with ContainerStateMachine:uninitialized
2019-06-18 02:48:14,299 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 02:48:14,299 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 02:48:14,299 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 02:48:14,299 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 02:48:14,300 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - b3d7a949-442e-4e97-8310-02de86117f25:group-E2E9BC25D3D5 ConfigurationManager, init=-1: [b3d7a949-442e-4e97-8310-02de86117f25:127.0.0.1:33285], old=null, confs=<EMPTY_MAP>
2019-06-18 02:48:14,300 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleree1cf0c3-e54c-4986-8310-50857f58a060/ratis] (custom)
2019-06-18 02:48:14,300 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleree1cf0c3-e54c-4986-8310-50857f58a060/ratis/28934659-1829-4772-814f-e2e9bc25d3d5 does not exist. Creating ...
2019-06-18 02:48:14,304 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleree1cf0c3-e54c-4986-8310-50857f58a060/ratis/28934659-1829-4772-814f-e2e9bc25d3d5/in_use.lock acquired by nodename 4307@ozone-unit-076618677d3mvl88-4038351654
2019-06-18 02:48:14,306 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleree1cf0c3-e54c-4986-8310-50857f58a060/ratis/28934659-1829-4772-814f-e2e9bc25d3d5 has been successfully formatted.
2019-06-18 02:48:14,306 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 02:48:14,306 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 02:48:14,307 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 02:48:14,307 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 02:48:14,307 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 02:48:14,307 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 02:48:14,307 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new b3d7a949-442e-4e97-8310-02de86117f25-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleree1cf0c3-e54c-4986-8310-50857f58a060/ratis/28934659-1829-4772-814f-e2e9bc25d3d5
2019-06-18 02:48:14,307 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 02:48:14,307 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 02:48:14,307 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 02:48:14,308 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 02:48:14,308 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 02:48:14,308 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 02:48:14,308 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 02:48:14,308 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 02:48:14,308 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 02:48:14,308 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 02:48:14,309 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 02:48:14,309 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 02:48:14,309 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 02:48:14,309 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - b3d7a949-442e-4e97-8310-02de86117f25: start group-E2E9BC25D3D5
2019-06-18 02:48:14,309 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - b3d7a949-442e-4e97-8310-02de86117f25:group-E2E9BC25D3D5 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 02:48:14,309 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - b3d7a949-442e-4e97-8310-02de86117f25: start FollowerState
2019-06-18 02:48:14,310 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-E2E9BC25D3D5,id=b3d7a949-442e-4e97-8310-02de86117f25
2019-06-18 02:48:15,450 INFO  impl.FollowerState (FollowerState.java:run(101)) - b3d7a949-442e-4e97-8310-02de86117f25:group-E2E9BC25D3D5 changes to CANDIDATE, lastRpcTime:1140, electionTimeout:1139ms
2019-06-18 02:48:15,450 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - b3d7a949-442e-4e97-8310-02de86117f25: shutdown FollowerState
2019-06-18 02:48:15,450 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - b3d7a949-442e-4e97-8310-02de86117f25:group-E2E9BC25D3D5 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 02:48:15,450 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - b3d7a949-442e-4e97-8310-02de86117f25: start LeaderElection
2019-06-18 02:48:15,454 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - b3d7a949-442e-4e97-8310-02de86117f25:group-E2E9BC25D3D5:LeaderElection4: begin an election at term 1 for -1: [b3d7a949-442e-4e97-8310-02de86117f25:127.0.0.1:33285], old=null
2019-06-18 02:48:15,454 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - b3d7a949-442e-4e97-8310-02de86117f25: shutdown LeaderElection
2019-06-18 02:48:15,455 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - b3d7a949-442e-4e97-8310-02de86117f25:group-E2E9BC25D3D5 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 02:48:15,455 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - b3d7a949-442e-4e97-8310-02de86117f25:group-E2E9BC25D3D5 change Leader from null to b3d7a949-442e-4e97-8310-02de86117f25 at term 1 for becomeLeader, leader elected after 1148ms
2019-06-18 02:48:15,455 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 02:48:15,455 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 02:48:15,455 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 02:48:15,455 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 02:48:15,455 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - b3d7a949-442e-4e97-8310-02de86117f25: start LeaderState
2019-06-18 02:48:15,456 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - b3d7a949-442e-4e97-8310-02de86117f25-RaftLogWorker: Starting segment from index:0
2019-06-18 02:48:15,456 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - b3d7a949-442e-4e97-8310-02de86117f25:group-E2E9BC25D3D5 set configuration 0: [b3d7a949-442e-4e97-8310-02de86117f25:127.0.0.1:33285], old=null at 0
2019-06-18 02:48:15,494 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - b3d7a949-442e-4e97-8310-02de86117f25-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleree1cf0c3-e54c-4986-8310-50857f58a060/ratis/28934659-1829-4772-814f-e2e9bc25d3d5/current/log_inprogress_0
2019-06-18 02:48:16,351 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 4583171511816238873 is closed with bcsId 0.
2019-06-18 02:48:16,351 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 02:48:16,351 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - b3d7a949-442e-4e97-8310-02de86117f25: close
2019-06-18 02:48:16,351 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - b3d7a949-442e-4e97-8310-02de86117f25: shutdown group-E2E9BC25D3D5
2019-06-18 02:48:16,352 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-E2E9BC25D3D5,id=b3d7a949-442e-4e97-8310-02de86117f25
2019-06-18 02:48:16,352 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - b3d7a949-442e-4e97-8310-02de86117f25: shutdown LeaderState
2019-06-18 02:48:16,352 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - b3d7a949-442e-4e97-8310-02de86117f25-PendingRequests: sendNotLeaderResponses
2019-06-18 02:48:16,353 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-b3d7a949-442e-4e97-8310-02de86117f25-group-E2E9BC25D3D5: set stopIndex = 2
2019-06-18 02:48:16,353 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 02:48:16,353 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandleree1cf0c3-e54c-4986-8310-50857f58a060/ratis/28934659-1829-4772-814f-e2e9bc25d3d5/sm/snapshot.1_2
2019-06-18 02:48:16,354 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - b3d7a949-442e-4e97-8310-02de86117f25:group-E2E9BC25D3D5 closes. The last applied log index is 2
2019-06-18 02:48:16,354 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - b3d7a949-442e-4e97-8310-02de86117f25-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 02:48:16,354 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - b3d7a949-442e-4e97-8310-02de86117f25-RaftLogWorker close()
2019-06-18 02:48:16,355 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - b3d7a949-442e-4e97-8310-02de86117f25: shutdown server with port 33285 now
2019-06-18 02:48:16,356 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - b3d7a949-442e-4e97-8310-02de86117f25: shutdown server with port 33285 successfully
2019-06-18 02:48:16,359 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 02:48:16,378 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc0839666-df9b-44e5-8778-ea4d3c936b5f/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 02:48:16,379 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc0839666-df9b-44e5-8778-ea4d3c936b5f/hdds to VolumeSet
2019-06-18 02:48:16,379 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@3e5d4f6b
2019-06-18 02:48:16,380 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@3e5d4f6b
2019-06-18 02:48:16,393 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 43679
2019-06-18 02:48:16,394 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 02:48:16,395 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 02:48:16,395 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 43679 (custom)
2019-06-18 02:48:16,395 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 02:48:16,395 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 02:48:16,396 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 02:48:16,396 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 02:48:16,396 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc0839666-df9b-44e5-8778-ea4d3c936b5f/ratis] (custom)
2019-06-18 02:48:16,396 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 38245
2019-06-18 02:48:16,397 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 02:48:16,397 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 02:48:16,397 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis a3f7d161-b696-4d39-99ba-7c39491146c4 at port 43679
2019-06-18 02:48:16,407 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - a3f7d161-b696-4d39-99ba-7c39491146c4: start RPC server
2019-06-18 02:48:16,408 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - a3f7d161-b696-4d39-99ba-7c39491146c4: GrpcService started, listening on 0.0.0.0/0.0.0.0:43679
2019-06-18 02:48:16,418 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - a3f7d161-b696-4d39-99ba-7c39491146c4: addNew group-54982CF34509:[a3f7d161-b696-4d39-99ba-7c39491146c4:127.0.0.1:43679] returns group-54982CF34509:java.util.concurrent.CompletableFuture@546b011e[Not completed]
2019-06-18 02:48:16,419 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - a3f7d161-b696-4d39-99ba-7c39491146c4: new RaftServerImpl for group-54982CF34509:[a3f7d161-b696-4d39-99ba-7c39491146c4:127.0.0.1:43679] with ContainerStateMachine:uninitialized
2019-06-18 02:48:16,419 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 02:48:16,419 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 02:48:16,419 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 02:48:16,419 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 02:48:16,419 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - a3f7d161-b696-4d39-99ba-7c39491146c4:group-54982CF34509 ConfigurationManager, init=-1: [a3f7d161-b696-4d39-99ba-7c39491146c4:127.0.0.1:43679], old=null, confs=<EMPTY_MAP>
2019-06-18 02:48:16,420 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc0839666-df9b-44e5-8778-ea4d3c936b5f/ratis] (custom)
2019-06-18 02:48:16,420 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc0839666-df9b-44e5-8778-ea4d3c936b5f/ratis/44a3e281-cb74-4c79-9feb-54982cf34509 does not exist. Creating ...
2019-06-18 02:48:16,424 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc0839666-df9b-44e5-8778-ea4d3c936b5f/ratis/44a3e281-cb74-4c79-9feb-54982cf34509/in_use.lock acquired by nodename 4307@ozone-unit-076618677d3mvl88-4038351654
2019-06-18 02:48:16,427 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc0839666-df9b-44e5-8778-ea4d3c936b5f/ratis/44a3e281-cb74-4c79-9feb-54982cf34509 has been successfully formatted.
2019-06-18 02:48:16,427 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 02:48:16,427 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 02:48:16,427 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 02:48:16,427 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 02:48:16,428 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 02:48:16,428 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 02:48:16,428 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new a3f7d161-b696-4d39-99ba-7c39491146c4-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc0839666-df9b-44e5-8778-ea4d3c936b5f/ratis/44a3e281-cb74-4c79-9feb-54982cf34509
2019-06-18 02:48:16,428 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 02:48:16,428 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 02:48:16,429 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 02:48:16,429 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 02:48:16,429 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 02:48:16,429 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 02:48:16,429 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 02:48:16,429 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 02:48:16,430 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 02:48:16,430 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 02:48:16,430 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 02:48:16,430 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 02:48:16,431 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 02:48:16,431 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - a3f7d161-b696-4d39-99ba-7c39491146c4: start group-54982CF34509
2019-06-18 02:48:16,431 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a3f7d161-b696-4d39-99ba-7c39491146c4:group-54982CF34509 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 02:48:16,432 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a3f7d161-b696-4d39-99ba-7c39491146c4: start FollowerState
2019-06-18 02:48:16,432 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-54982CF34509,id=a3f7d161-b696-4d39-99ba-7c39491146c4
2019-06-18 02:48:17,572 INFO  impl.FollowerState (FollowerState.java:run(101)) - a3f7d161-b696-4d39-99ba-7c39491146c4:group-54982CF34509 changes to CANDIDATE, lastRpcTime:1140, electionTimeout:1140ms
2019-06-18 02:48:17,573 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - a3f7d161-b696-4d39-99ba-7c39491146c4: shutdown FollowerState
2019-06-18 02:48:17,573 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a3f7d161-b696-4d39-99ba-7c39491146c4:group-54982CF34509 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 02:48:17,573 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a3f7d161-b696-4d39-99ba-7c39491146c4: start LeaderElection
2019-06-18 02:48:17,576 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - a3f7d161-b696-4d39-99ba-7c39491146c4:group-54982CF34509:LeaderElection5: begin an election at term 1 for -1: [a3f7d161-b696-4d39-99ba-7c39491146c4:127.0.0.1:43679], old=null
2019-06-18 02:48:17,577 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - a3f7d161-b696-4d39-99ba-7c39491146c4: shutdown LeaderElection
2019-06-18 02:48:17,577 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a3f7d161-b696-4d39-99ba-7c39491146c4:group-54982CF34509 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 02:48:17,577 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - a3f7d161-b696-4d39-99ba-7c39491146c4:group-54982CF34509 change Leader from null to a3f7d161-b696-4d39-99ba-7c39491146c4 at term 1 for becomeLeader, leader elected after 1149ms
2019-06-18 02:48:17,577 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 02:48:17,577 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 02:48:17,577 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 02:48:17,577 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 02:48:17,577 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a3f7d161-b696-4d39-99ba-7c39491146c4: start LeaderState
2019-06-18 02:48:17,578 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - a3f7d161-b696-4d39-99ba-7c39491146c4-RaftLogWorker: Starting segment from index:0
2019-06-18 02:48:17,578 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - a3f7d161-b696-4d39-99ba-7c39491146c4:group-54982CF34509 set configuration 0: [a3f7d161-b696-4d39-99ba-7c39491146c4:127.0.0.1:43679], old=null at 0
2019-06-18 02:48:17,613 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - a3f7d161-b696-4d39-99ba-7c39491146c4-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc0839666-df9b-44e5-8778-ea4d3c936b5f/ratis/44a3e281-cb74-4c79-9feb-54982cf34509/current/log_inprogress_0
2019-06-18 02:48:18,492 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 7342789260741599194 is closed with bcsId 0.
2019-06-18 02:48:18,492 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 02:48:18,493 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - a3f7d161-b696-4d39-99ba-7c39491146c4: close
2019-06-18 02:48:18,493 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - a3f7d161-b696-4d39-99ba-7c39491146c4: shutdown group-54982CF34509
2019-06-18 02:48:18,493 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-54982CF34509,id=a3f7d161-b696-4d39-99ba-7c39491146c4
2019-06-18 02:48:18,493 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - a3f7d161-b696-4d39-99ba-7c39491146c4: shutdown LeaderState
2019-06-18 02:48:18,494 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - a3f7d161-b696-4d39-99ba-7c39491146c4-PendingRequests: sendNotLeaderResponses
2019-06-18 02:48:18,496 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-a3f7d161-b696-4d39-99ba-7c39491146c4-group-54982CF34509: set stopIndex = 4
2019-06-18 02:48:18,496 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-18 02:48:18,496 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc0839666-df9b-44e5-8778-ea4d3c936b5f/ratis/44a3e281-cb74-4c79-9feb-54982cf34509/sm/snapshot.1_4
2019-06-18 02:48:18,497 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - a3f7d161-b696-4d39-99ba-7c39491146c4:group-54982CF34509 closes. The last applied log index is 4
2019-06-18 02:48:18,497 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - a3f7d161-b696-4d39-99ba-7c39491146c4-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 02:48:18,498 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - a3f7d161-b696-4d39-99ba-7c39491146c4-RaftLogWorker close()
2019-06-18 02:48:18,499 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - a3f7d161-b696-4d39-99ba-7c39491146c4: shutdown server with port 43679 now
2019-06-18 02:48:18,500 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - a3f7d161-b696-4d39-99ba-7c39491146c4: shutdown server with port 43679 successfully
2019-06-18 02:48:18,504 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
