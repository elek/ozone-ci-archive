2019-06-16 20:58:12,118 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4fa951e9-d1a7-40cb-af58-1ac6d4480579/hdds of  storage type : DISK and capacity : 104021790720
2019-06-16 20:58:12,123 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4fa951e9-d1a7-40cb-af58-1ac6d4480579/hdds to VolumeSet
2019-06-16 20:58:12,155 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
2019-06-16 20:58:12,189 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-06-16 20:58:12,591 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 42431
2019-06-16 20:58:13,096 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-16 20:58:13,120 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-16 20:58:13,130 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 42431 (custom)
2019-06-16 20:58:13,131 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-16 20:58:13,134 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 20:58:13,134 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-16 20:58:13,135 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-16 20:58:13,302 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4fa951e9-d1a7-40cb-af58-1ac6d4480579/ratis] (custom)
2019-06-16 20:58:13,313 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 37115
2019-06-16 20:58:13,335 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-16 20:58:13,335 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-16 20:58:13,336 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis ded8ae72-00ba-4c87-aa9d-b879744e2859 at port 42431
2019-06-16 20:58:13,367 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: start RPC server
2019-06-16 20:58:13,512 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: GrpcService started, listening on 0.0.0.0/0.0.0.0:42431
2019-06-16 20:58:13,872 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: addNew group-81576492CF47:[ded8ae72-00ba-4c87-aa9d-b879744e2859:127.0.0.1:42431] returns group-81576492CF47:java.util.concurrent.CompletableFuture@11b989c7[Not completed]
2019-06-16 20:58:13,907 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: new RaftServerImpl for group-81576492CF47:[ded8ae72-00ba-4c87-aa9d-b879744e2859:127.0.0.1:42431] with ContainerStateMachine:uninitialized
2019-06-16 20:58:13,909 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-16 20:58:13,909 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-16 20:58:13,909 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-16 20:58:13,910 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-16 20:58:13,916 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - ded8ae72-00ba-4c87-aa9d-b879744e2859:group-81576492CF47 ConfigurationManager, init=-1: [ded8ae72-00ba-4c87-aa9d-b879744e2859:127.0.0.1:42431], old=null, confs=<EMPTY_MAP>
2019-06-16 20:58:13,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4fa951e9-d1a7-40cb-af58-1ac6d4480579/ratis] (custom)
2019-06-16 20:58:13,922 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4fa951e9-d1a7-40cb-af58-1ac6d4480579/ratis/6ef54437-0dc7-47c9-ae20-81576492cf47 does not exist. Creating ...
2019-06-16 20:58:13,931 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4fa951e9-d1a7-40cb-af58-1ac6d4480579/ratis/6ef54437-0dc7-47c9-ae20-81576492cf47/in_use.lock acquired by nodename 4313@ozone-unit-076618677d3gkpjk-3054749254
2019-06-16 20:58:13,939 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4fa951e9-d1a7-40cb-af58-1ac6d4480579/ratis/6ef54437-0dc7-47c9-ae20-81576492cf47 has been successfully formatted.
2019-06-16 20:58:13,941 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-16 20:58:13,941 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-16 20:58:13,943 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-16 20:58:13,945 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 20:58:13,949 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 20:58:13,953 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-16 20:58:13,956 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new ded8ae72-00ba-4c87-aa9d-b879744e2859-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4fa951e9-d1a7-40cb-af58-1ac6d4480579/ratis/6ef54437-0dc7-47c9-ae20-81576492cf47
2019-06-16 20:58:13,956 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-16 20:58:13,957 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-16 20:58:13,959 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 20:58:13,959 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-16 20:58:13,959 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-16 20:58:13,960 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-16 20:58:13,961 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-16 20:58:13,961 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-16 20:58:13,962 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-16 20:58:13,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-16 20:58:13,969 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-16 20:58:13,970 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-16 20:58:13,970 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-16 20:58:14,079 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: start group-81576492CF47
2019-06-16 20:58:14,080 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ded8ae72-00ba-4c87-aa9d-b879744e2859:group-81576492CF47 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-16 20:58:14,081 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: start FollowerState
2019-06-16 20:58:14,082 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-81576492CF47,id=ded8ae72-00ba-4c87-aa9d-b879744e2859
2019-06-16 20:58:15,081 INFO  impl.FollowerState (FollowerState.java:run(101)) - ded8ae72-00ba-4c87-aa9d-b879744e2859:group-81576492CF47 changes to CANDIDATE, lastRpcTime:1000, electionTimeout:1000ms
2019-06-16 20:58:15,082 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: shutdown FollowerState
2019-06-16 20:58:15,082 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ded8ae72-00ba-4c87-aa9d-b879744e2859:group-81576492CF47 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-16 20:58:15,084 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: start LeaderElection
2019-06-16 20:58:15,087 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - ded8ae72-00ba-4c87-aa9d-b879744e2859:group-81576492CF47:LeaderElection1: begin an election at term 1 for -1: [ded8ae72-00ba-4c87-aa9d-b879744e2859:127.0.0.1:42431], old=null
2019-06-16 20:58:15,088 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: shutdown LeaderElection
2019-06-16 20:58:15,089 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ded8ae72-00ba-4c87-aa9d-b879744e2859:group-81576492CF47 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-16 20:58:15,089 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - ded8ae72-00ba-4c87-aa9d-b879744e2859:group-81576492CF47 change Leader from null to ded8ae72-00ba-4c87-aa9d-b879744e2859 at term 1 for becomeLeader, leader elected after 1147ms
2019-06-16 20:58:15,094 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-16 20:58:15,094 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-16 20:58:15,097 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-16 20:58:15,097 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-16 20:58:15,106 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: start LeaderState
2019-06-16 20:58:15,122 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - ded8ae72-00ba-4c87-aa9d-b879744e2859-RaftLogWorker: Starting segment from index:0
2019-06-16 20:58:15,129 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - ded8ae72-00ba-4c87-aa9d-b879744e2859:group-81576492CF47 set configuration 0: [ded8ae72-00ba-4c87-aa9d-b879744e2859:127.0.0.1:42431], old=null at 0
2019-06-16 20:58:15,277 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - ded8ae72-00ba-4c87-aa9d-b879744e2859-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4fa951e9-d1a7-40cb-af58-1ac6d4480579/ratis/6ef54437-0dc7-47c9-ae20-81576492cf47/current/log_inprogress_0
2019-06-16 20:58:16,337 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-06-16 20:58:16,397 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 1835959603030018726 is closed with bcsId 0.
2019-06-16 20:58:16,397 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-16 20:58:16,398 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: close
2019-06-16 20:58:16,400 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: shutdown group-81576492CF47
2019-06-16 20:58:16,400 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-81576492CF47,id=ded8ae72-00ba-4c87-aa9d-b879744e2859
2019-06-16 20:58:16,400 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: shutdown LeaderState
2019-06-16 20:58:16,401 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - ded8ae72-00ba-4c87-aa9d-b879744e2859-PendingRequests: sendNotLeaderResponses
2019-06-16 20:58:16,404 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-ded8ae72-00ba-4c87-aa9d-b879744e2859-group-81576492CF47: set stopIndex = 4
2019-06-16 20:58:16,404 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-16 20:58:16,404 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler4fa951e9-d1a7-40cb-af58-1ac6d4480579/ratis/6ef54437-0dc7-47c9-ae20-81576492cf47/sm/snapshot.1_4
2019-06-16 20:58:16,410 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - ded8ae72-00ba-4c87-aa9d-b879744e2859:group-81576492CF47 closes. The last applied log index is 4
2019-06-16 20:58:16,411 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - ded8ae72-00ba-4c87-aa9d-b879744e2859-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-16 20:58:16,412 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - ded8ae72-00ba-4c87-aa9d-b879744e2859-RaftLogWorker close()
2019-06-16 20:58:16,413 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: shutdown server with port 42431 now
2019-06-16 20:58:16,417 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - ded8ae72-00ba-4c87-aa9d-b879744e2859: shutdown server with port 42431 successfully
2019-06-16 20:58:16,427 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-16 20:58:16,466 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45a4283d-db37-4668-9257-729697b49e12/hdds of  storage type : DISK and capacity : 104021790720
2019-06-16 20:58:16,467 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45a4283d-db37-4668-9257-729697b49e12/hdds to VolumeSet
2019-06-16 20:58:16,467 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@6f7e336b
2019-06-16 20:58:16,467 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@6f7e336b
2019-06-16 20:58:16,485 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 38375
2019-06-16 20:58:16,486 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-16 20:58:16,487 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-16 20:58:16,487 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 38375 (custom)
2019-06-16 20:58:16,487 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-16 20:58:16,488 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 20:58:16,488 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-16 20:58:16,488 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-16 20:58:16,489 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45a4283d-db37-4668-9257-729697b49e12/ratis] (custom)
2019-06-16 20:58:16,489 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 33205
2019-06-16 20:58:16,490 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-16 20:58:16,490 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-16 20:58:16,490 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 126c012c-6ebf-4e1d-8e0a-cdf086d84221 at port 38375
2019-06-16 20:58:16,539 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: start RPC server
2019-06-16 20:58:16,546 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: GrpcService started, listening on 0.0.0.0/0.0.0.0:38375
2019-06-16 20:58:16,561 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: addNew group-8925477386C4:[126c012c-6ebf-4e1d-8e0a-cdf086d84221:127.0.0.1:38375] returns group-8925477386C4:java.util.concurrent.CompletableFuture@217d2cea[Not completed]
2019-06-16 20:58:16,562 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: new RaftServerImpl for group-8925477386C4:[126c012c-6ebf-4e1d-8e0a-cdf086d84221:127.0.0.1:38375] with ContainerStateMachine:uninitialized
2019-06-16 20:58:16,565 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-16 20:58:16,565 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-16 20:58:16,565 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-16 20:58:16,565 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-16 20:58:16,565 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221:group-8925477386C4 ConfigurationManager, init=-1: [126c012c-6ebf-4e1d-8e0a-cdf086d84221:127.0.0.1:38375], old=null, confs=<EMPTY_MAP>
2019-06-16 20:58:16,566 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45a4283d-db37-4668-9257-729697b49e12/ratis] (custom)
2019-06-16 20:58:16,566 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45a4283d-db37-4668-9257-729697b49e12/ratis/bcd45867-587a-40a0-b904-8925477386c4 does not exist. Creating ...
2019-06-16 20:58:16,569 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45a4283d-db37-4668-9257-729697b49e12/ratis/bcd45867-587a-40a0-b904-8925477386c4/in_use.lock acquired by nodename 4313@ozone-unit-076618677d3gkpjk-3054749254
2019-06-16 20:58:16,571 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45a4283d-db37-4668-9257-729697b49e12/ratis/bcd45867-587a-40a0-b904-8925477386c4 has been successfully formatted.
2019-06-16 20:58:16,571 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-16 20:58:16,571 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-16 20:58:16,572 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-16 20:58:16,572 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 20:58:16,584 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 20:58:16,584 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-16 20:58:16,585 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 126c012c-6ebf-4e1d-8e0a-cdf086d84221-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45a4283d-db37-4668-9257-729697b49e12/ratis/bcd45867-587a-40a0-b904-8925477386c4
2019-06-16 20:58:16,585 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-16 20:58:16,585 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-16 20:58:16,585 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 20:58:16,585 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-16 20:58:16,587 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-16 20:58:16,587 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-16 20:58:16,587 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-16 20:58:16,587 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-16 20:58:16,587 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-16 20:58:16,587 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-16 20:58:16,591 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-16 20:58:16,591 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-16 20:58:16,591 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-16 20:58:16,591 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: start group-8925477386C4
2019-06-16 20:58:16,591 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221:group-8925477386C4 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-16 20:58:16,591 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: start FollowerState
2019-06-16 20:58:16,592 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-8925477386C4,id=126c012c-6ebf-4e1d-8e0a-cdf086d84221
2019-06-16 20:58:17,674 INFO  impl.FollowerState (FollowerState.java:run(101)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221:group-8925477386C4 changes to CANDIDATE, lastRpcTime:1082, electionTimeout:1082ms
2019-06-16 20:58:17,674 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: shutdown FollowerState
2019-06-16 20:58:17,674 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221:group-8925477386C4 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-16 20:58:17,674 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: start LeaderElection
2019-06-16 20:58:17,677 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221:group-8925477386C4:LeaderElection2: begin an election at term 1 for -1: [126c012c-6ebf-4e1d-8e0a-cdf086d84221:127.0.0.1:38375], old=null
2019-06-16 20:58:17,678 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: shutdown LeaderElection
2019-06-16 20:58:17,678 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221:group-8925477386C4 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-16 20:58:17,678 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221:group-8925477386C4 change Leader from null to 126c012c-6ebf-4e1d-8e0a-cdf086d84221 at term 1 for becomeLeader, leader elected after 1106ms
2019-06-16 20:58:17,678 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-16 20:58:17,678 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-16 20:58:17,678 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-16 20:58:17,679 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-16 20:58:17,679 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: start LeaderState
2019-06-16 20:58:17,679 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221-RaftLogWorker: Starting segment from index:0
2019-06-16 20:58:17,682 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221:group-8925477386C4 set configuration 0: [126c012c-6ebf-4e1d-8e0a-cdf086d84221:127.0.0.1:38375], old=null at 0
2019-06-16 20:58:17,720 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45a4283d-db37-4668-9257-729697b49e12/ratis/bcd45867-587a-40a0-b904-8925477386c4/current/log_inprogress_0
2019-06-16 20:58:18,629 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-16 20:58:18,630 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: close
2019-06-16 20:58:18,630 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: shutdown group-8925477386C4
2019-06-16 20:58:18,631 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-8925477386C4,id=126c012c-6ebf-4e1d-8e0a-cdf086d84221
2019-06-16 20:58:18,631 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: shutdown LeaderState
2019-06-16 20:58:18,632 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221-PendingRequests: sendNotLeaderResponses
2019-06-16 20:58:18,633 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-126c012c-6ebf-4e1d-8e0a-cdf086d84221-group-8925477386C4: set stopIndex = 2
2019-06-16 20:58:18,633 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-16 20:58:18,633 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45a4283d-db37-4668-9257-729697b49e12/ratis/bcd45867-587a-40a0-b904-8925477386c4/sm/snapshot.1_2
2019-06-16 20:58:18,634 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221:group-8925477386C4 closes. The last applied log index is 2
2019-06-16 20:58:18,638 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-16 20:58:18,639 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221-RaftLogWorker close()
2019-06-16 20:58:18,640 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: shutdown server with port 38375 now
2019-06-16 20:58:18,641 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 126c012c-6ebf-4e1d-8e0a-cdf086d84221: shutdown server with port 38375 successfully
2019-06-16 20:58:18,645 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-16 20:58:18,674 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1aeac630-ac72-4497-bf1c-19e23515f716/hdds of  storage type : DISK and capacity : 104021790720
2019-06-16 20:58:18,675 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1aeac630-ac72-4497-bf1c-19e23515f716/hdds to VolumeSet
2019-06-16 20:58:18,675 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1f51431
2019-06-16 20:58:18,675 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1f51431
2019-06-16 20:58:18,689 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 38039
2019-06-16 20:58:18,690 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-16 20:58:18,690 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-16 20:58:18,691 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 38039 (custom)
2019-06-16 20:58:18,691 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-16 20:58:18,691 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 20:58:18,691 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-16 20:58:18,692 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-16 20:58:18,692 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1aeac630-ac72-4497-bf1c-19e23515f716/ratis] (custom)
2019-06-16 20:58:18,693 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 39143
2019-06-16 20:58:18,693 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-16 20:58:18,693 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-16 20:58:18,693 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis c6fc1d3a-320b-4d58-9798-5359e9f87380 at port 38039
2019-06-16 20:58:18,710 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: start RPC server
2019-06-16 20:58:18,711 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: GrpcService started, listening on 0.0.0.0/0.0.0.0:38039
2019-06-16 20:58:18,721 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: addNew group-2B85A5B1BD52:[c6fc1d3a-320b-4d58-9798-5359e9f87380:127.0.0.1:38039] returns group-2B85A5B1BD52:java.util.concurrent.CompletableFuture@30c06bf3[Not completed]
2019-06-16 20:58:18,723 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: new RaftServerImpl for group-2B85A5B1BD52:[c6fc1d3a-320b-4d58-9798-5359e9f87380:127.0.0.1:38039] with ContainerStateMachine:uninitialized
2019-06-16 20:58:18,723 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-16 20:58:18,724 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-16 20:58:18,724 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-16 20:58:18,724 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-16 20:58:18,724 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - c6fc1d3a-320b-4d58-9798-5359e9f87380:group-2B85A5B1BD52 ConfigurationManager, init=-1: [c6fc1d3a-320b-4d58-9798-5359e9f87380:127.0.0.1:38039], old=null, confs=<EMPTY_MAP>
2019-06-16 20:58:18,724 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1aeac630-ac72-4497-bf1c-19e23515f716/ratis] (custom)
2019-06-16 20:58:18,724 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1aeac630-ac72-4497-bf1c-19e23515f716/ratis/726859b9-6985-4525-bc8d-2b85a5b1bd52 does not exist. Creating ...
2019-06-16 20:58:18,727 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1aeac630-ac72-4497-bf1c-19e23515f716/ratis/726859b9-6985-4525-bc8d-2b85a5b1bd52/in_use.lock acquired by nodename 4313@ozone-unit-076618677d3gkpjk-3054749254
2019-06-16 20:58:18,729 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1aeac630-ac72-4497-bf1c-19e23515f716/ratis/726859b9-6985-4525-bc8d-2b85a5b1bd52 has been successfully formatted.
2019-06-16 20:58:18,729 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-16 20:58:18,730 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-16 20:58:18,730 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-16 20:58:18,730 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 20:58:18,730 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 20:58:18,730 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-16 20:58:18,730 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new c6fc1d3a-320b-4d58-9798-5359e9f87380-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1aeac630-ac72-4497-bf1c-19e23515f716/ratis/726859b9-6985-4525-bc8d-2b85a5b1bd52
2019-06-16 20:58:18,730 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-16 20:58:18,730 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-16 20:58:18,731 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 20:58:18,731 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-16 20:58:18,731 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-16 20:58:18,731 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-16 20:58:18,731 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-16 20:58:18,731 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-16 20:58:18,731 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-16 20:58:18,731 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-16 20:58:18,732 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-16 20:58:18,732 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-16 20:58:18,733 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-16 20:58:18,733 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: start group-2B85A5B1BD52
2019-06-16 20:58:18,733 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - c6fc1d3a-320b-4d58-9798-5359e9f87380:group-2B85A5B1BD52 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-16 20:58:18,733 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: start FollowerState
2019-06-16 20:58:18,734 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2B85A5B1BD52,id=c6fc1d3a-320b-4d58-9798-5359e9f87380
2019-06-16 20:58:19,734 INFO  impl.FollowerState (FollowerState.java:run(101)) - c6fc1d3a-320b-4d58-9798-5359e9f87380:group-2B85A5B1BD52 changes to CANDIDATE, lastRpcTime:1001, electionTimeout:1001ms
2019-06-16 20:58:19,735 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: shutdown FollowerState
2019-06-16 20:58:19,735 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - c6fc1d3a-320b-4d58-9798-5359e9f87380:group-2B85A5B1BD52 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-16 20:58:19,735 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: start LeaderElection
2019-06-16 20:58:19,738 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - c6fc1d3a-320b-4d58-9798-5359e9f87380:group-2B85A5B1BD52:LeaderElection3: begin an election at term 1 for -1: [c6fc1d3a-320b-4d58-9798-5359e9f87380:127.0.0.1:38039], old=null
2019-06-16 20:58:19,738 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: shutdown LeaderElection
2019-06-16 20:58:19,738 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - c6fc1d3a-320b-4d58-9798-5359e9f87380:group-2B85A5B1BD52 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-16 20:58:19,739 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - c6fc1d3a-320b-4d58-9798-5359e9f87380:group-2B85A5B1BD52 change Leader from null to c6fc1d3a-320b-4d58-9798-5359e9f87380 at term 1 for becomeLeader, leader elected after 1008ms
2019-06-16 20:58:19,739 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-16 20:58:19,739 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-16 20:58:19,739 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-16 20:58:19,739 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-16 20:58:19,739 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: start LeaderState
2019-06-16 20:58:19,740 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - c6fc1d3a-320b-4d58-9798-5359e9f87380-RaftLogWorker: Starting segment from index:0
2019-06-16 20:58:19,740 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - c6fc1d3a-320b-4d58-9798-5359e9f87380:group-2B85A5B1BD52 set configuration 0: [c6fc1d3a-320b-4d58-9798-5359e9f87380:127.0.0.1:38039], old=null at 0
2019-06-16 20:58:19,780 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - c6fc1d3a-320b-4d58-9798-5359e9f87380-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1aeac630-ac72-4497-bf1c-19e23515f716/ratis/726859b9-6985-4525-bc8d-2b85a5b1bd52/current/log_inprogress_0
2019-06-16 20:58:20,779 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 4702590678178784416 is closed with bcsId 0.
2019-06-16 20:58:20,780 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-16 20:58:20,780 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: close
2019-06-16 20:58:20,781 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: shutdown group-2B85A5B1BD52
2019-06-16 20:58:20,781 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2B85A5B1BD52,id=c6fc1d3a-320b-4d58-9798-5359e9f87380
2019-06-16 20:58:20,781 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: shutdown LeaderState
2019-06-16 20:58:20,782 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - c6fc1d3a-320b-4d58-9798-5359e9f87380-PendingRequests: sendNotLeaderResponses
2019-06-16 20:58:20,783 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-c6fc1d3a-320b-4d58-9798-5359e9f87380-group-2B85A5B1BD52: set stopIndex = 2
2019-06-16 20:58:20,783 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-16 20:58:20,783 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler1aeac630-ac72-4497-bf1c-19e23515f716/ratis/726859b9-6985-4525-bc8d-2b85a5b1bd52/sm/snapshot.1_2
2019-06-16 20:58:20,783 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - c6fc1d3a-320b-4d58-9798-5359e9f87380:group-2B85A5B1BD52 closes. The last applied log index is 2
2019-06-16 20:58:20,784 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - c6fc1d3a-320b-4d58-9798-5359e9f87380-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-16 20:58:20,784 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - c6fc1d3a-320b-4d58-9798-5359e9f87380-RaftLogWorker close()
2019-06-16 20:58:20,787 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: shutdown server with port 38039 now
2019-06-16 20:58:20,789 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - c6fc1d3a-320b-4d58-9798-5359e9f87380: shutdown server with port 38039 successfully
2019-06-16 20:58:20,797 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-16 20:58:20,834 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc3bbee2e-7cdf-4e4f-94d7-d740af83cfdd/hdds of  storage type : DISK and capacity : 104021790720
2019-06-16 20:58:20,834 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc3bbee2e-7cdf-4e4f-94d7-d740af83cfdd/hdds to VolumeSet
2019-06-16 20:58:20,834 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@23940f86
2019-06-16 20:58:20,835 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@23940f86
2019-06-16 20:58:20,846 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 36855
2019-06-16 20:58:20,846 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-16 20:58:20,847 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-16 20:58:20,847 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 36855 (custom)
2019-06-16 20:58:20,847 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-16 20:58:20,847 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 20:58:20,848 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-16 20:58:20,848 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-16 20:58:20,848 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc3bbee2e-7cdf-4e4f-94d7-d740af83cfdd/ratis] (custom)
2019-06-16 20:58:20,848 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 37723
2019-06-16 20:58:20,849 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-16 20:58:20,849 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-16 20:58:20,849 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis e2716b8b-8122-4e37-8dba-e3728d1a3f96 at port 36855
2019-06-16 20:58:20,856 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: start RPC server
2019-06-16 20:58:20,858 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: GrpcService started, listening on 0.0.0.0/0.0.0.0:36855
Jun 16, 2019 8:58:20 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:38375} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 16, 2019 8:58:20 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:38039} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-16 20:58:20,873 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: addNew group-FCBE7C21C460:[e2716b8b-8122-4e37-8dba-e3728d1a3f96:127.0.0.1:36855] returns group-FCBE7C21C460:java.util.concurrent.CompletableFuture@53c8b5c6[Not completed]
2019-06-16 20:58:20,874 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: new RaftServerImpl for group-FCBE7C21C460:[e2716b8b-8122-4e37-8dba-e3728d1a3f96:127.0.0.1:36855] with ContainerStateMachine:uninitialized
2019-06-16 20:58:20,874 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-16 20:58:20,875 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-16 20:58:20,875 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-16 20:58:20,875 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-16 20:58:20,875 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96:group-FCBE7C21C460 ConfigurationManager, init=-1: [e2716b8b-8122-4e37-8dba-e3728d1a3f96:127.0.0.1:36855], old=null, confs=<EMPTY_MAP>
2019-06-16 20:58:20,875 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc3bbee2e-7cdf-4e4f-94d7-d740af83cfdd/ratis] (custom)
2019-06-16 20:58:20,875 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc3bbee2e-7cdf-4e4f-94d7-d740af83cfdd/ratis/9081caa6-d90f-4b65-b751-fcbe7c21c460 does not exist. Creating ...
2019-06-16 20:58:20,878 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc3bbee2e-7cdf-4e4f-94d7-d740af83cfdd/ratis/9081caa6-d90f-4b65-b751-fcbe7c21c460/in_use.lock acquired by nodename 4313@ozone-unit-076618677d3gkpjk-3054749254
2019-06-16 20:58:20,880 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc3bbee2e-7cdf-4e4f-94d7-d740af83cfdd/ratis/9081caa6-d90f-4b65-b751-fcbe7c21c460 has been successfully formatted.
2019-06-16 20:58:20,880 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-16 20:58:20,881 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-16 20:58:20,881 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-16 20:58:20,881 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 20:58:20,881 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 20:58:20,881 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-16 20:58:20,881 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new e2716b8b-8122-4e37-8dba-e3728d1a3f96-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc3bbee2e-7cdf-4e4f-94d7-d740af83cfdd/ratis/9081caa6-d90f-4b65-b751-fcbe7c21c460
2019-06-16 20:58:20,881 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-16 20:58:20,881 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-16 20:58:20,881 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 20:58:20,882 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-16 20:58:20,882 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-16 20:58:20,882 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-16 20:58:20,882 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-16 20:58:20,882 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-16 20:58:20,882 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-16 20:58:20,882 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-16 20:58:20,883 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-16 20:58:20,883 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-16 20:58:20,883 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-16 20:58:20,883 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: start group-FCBE7C21C460
2019-06-16 20:58:20,883 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96:group-FCBE7C21C460 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-16 20:58:20,884 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: start FollowerState
2019-06-16 20:58:20,884 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-FCBE7C21C460,id=e2716b8b-8122-4e37-8dba-e3728d1a3f96
2019-06-16 20:58:21,956 INFO  impl.FollowerState (FollowerState.java:run(101)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96:group-FCBE7C21C460 changes to CANDIDATE, lastRpcTime:1072, electionTimeout:1072ms
2019-06-16 20:58:21,956 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: shutdown FollowerState
2019-06-16 20:58:21,956 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96:group-FCBE7C21C460 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-16 20:58:21,956 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: start LeaderElection
2019-06-16 20:58:21,959 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96:group-FCBE7C21C460:LeaderElection4: begin an election at term 1 for -1: [e2716b8b-8122-4e37-8dba-e3728d1a3f96:127.0.0.1:36855], old=null
2019-06-16 20:58:21,959 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: shutdown LeaderElection
2019-06-16 20:58:21,960 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96:group-FCBE7C21C460 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-16 20:58:21,960 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96:group-FCBE7C21C460 change Leader from null to e2716b8b-8122-4e37-8dba-e3728d1a3f96 at term 1 for becomeLeader, leader elected after 1079ms
2019-06-16 20:58:21,960 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-16 20:58:21,960 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-16 20:58:21,960 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-16 20:58:21,960 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-16 20:58:21,960 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: start LeaderState
2019-06-16 20:58:21,961 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96-RaftLogWorker: Starting segment from index:0
2019-06-16 20:58:21,961 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96:group-FCBE7C21C460 set configuration 0: [e2716b8b-8122-4e37-8dba-e3728d1a3f96:127.0.0.1:36855], old=null at 0
2019-06-16 20:58:22,001 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc3bbee2e-7cdf-4e4f-94d7-d740af83cfdd/ratis/9081caa6-d90f-4b65-b751-fcbe7c21c460/current/log_inprogress_0
2019-06-16 20:58:22,925 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 372073138558035007 is closed with bcsId 0.
2019-06-16 20:58:22,926 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-16 20:58:22,927 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: close
2019-06-16 20:58:22,927 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: shutdown group-FCBE7C21C460
2019-06-16 20:58:22,927 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-FCBE7C21C460,id=e2716b8b-8122-4e37-8dba-e3728d1a3f96
2019-06-16 20:58:22,928 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: shutdown LeaderState
2019-06-16 20:58:22,928 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96-PendingRequests: sendNotLeaderResponses
2019-06-16 20:58:22,930 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-16 20:58:22,930 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerc3bbee2e-7cdf-4e4f-94d7-d740af83cfdd/ratis/9081caa6-d90f-4b65-b751-fcbe7c21c460/sm/snapshot.1_2
2019-06-16 20:58:22,931 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-e2716b8b-8122-4e37-8dba-e3728d1a3f96-group-FCBE7C21C460: set stopIndex = 2
2019-06-16 20:58:22,931 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96:group-FCBE7C21C460 closes. The last applied log index is 2
2019-06-16 20:58:22,931 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-16 20:58:22,932 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96-RaftLogWorker close()
2019-06-16 20:58:22,933 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: shutdown server with port 36855 now
2019-06-16 20:58:22,934 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - e2716b8b-8122-4e37-8dba-e3728d1a3f96: shutdown server with port 36855 successfully
2019-06-16 20:58:22,939 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-16 20:58:22,964 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler8adb8a5d-fd4d-40db-a6b3-ef7f30bb1430/hdds of  storage type : DISK and capacity : 104021790720
2019-06-16 20:58:22,964 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler8adb8a5d-fd4d-40db-a6b3-ef7f30bb1430/hdds to VolumeSet
2019-06-16 20:58:22,964 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@68217d41
2019-06-16 20:58:22,964 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@68217d41
2019-06-16 20:58:22,974 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 43221
2019-06-16 20:58:22,975 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-16 20:58:22,976 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-16 20:58:22,976 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 43221 (custom)
2019-06-16 20:58:22,976 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-16 20:58:22,976 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 20:58:22,977 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-16 20:58:22,977 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-16 20:58:22,977 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler8adb8a5d-fd4d-40db-a6b3-ef7f30bb1430/ratis] (custom)
2019-06-16 20:58:22,978 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 33263
2019-06-16 20:58:22,978 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-16 20:58:22,978 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-16 20:58:22,978 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623 at port 43221
2019-06-16 20:58:22,990 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: start RPC server
2019-06-16 20:58:22,991 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: GrpcService started, listening on 0.0.0.0/0.0.0.0:43221
2019-06-16 20:58:23,001 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: addNew group-484D9B88B702:[007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:127.0.0.1:43221] returns group-484D9B88B702:java.util.concurrent.CompletableFuture@5d2255f8[Not completed]
2019-06-16 20:58:23,002 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: new RaftServerImpl for group-484D9B88B702:[007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:127.0.0.1:43221] with ContainerStateMachine:uninitialized
2019-06-16 20:58:23,005 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-16 20:58:23,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-16 20:58:23,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-16 20:58:23,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-16 20:58:23,006 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:group-484D9B88B702 ConfigurationManager, init=-1: [007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:127.0.0.1:43221], old=null, confs=<EMPTY_MAP>
2019-06-16 20:58:23,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler8adb8a5d-fd4d-40db-a6b3-ef7f30bb1430/ratis] (custom)
2019-06-16 20:58:23,007 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler8adb8a5d-fd4d-40db-a6b3-ef7f30bb1430/ratis/b0b0a6ef-7872-43a3-9618-484d9b88b702 does not exist. Creating ...
2019-06-16 20:58:23,009 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler8adb8a5d-fd4d-40db-a6b3-ef7f30bb1430/ratis/b0b0a6ef-7872-43a3-9618-484d9b88b702/in_use.lock acquired by nodename 4313@ozone-unit-076618677d3gkpjk-3054749254
2019-06-16 20:58:23,011 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler8adb8a5d-fd4d-40db-a6b3-ef7f30bb1430/ratis/b0b0a6ef-7872-43a3-9618-484d9b88b702 has been successfully formatted.
2019-06-16 20:58:23,012 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-16 20:58:23,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-16 20:58:23,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-16 20:58:23,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 20:58:23,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 20:58:23,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-16 20:58:23,012 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler8adb8a5d-fd4d-40db-a6b3-ef7f30bb1430/ratis/b0b0a6ef-7872-43a3-9618-484d9b88b702
2019-06-16 20:58:23,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-16 20:58:23,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-16 20:58:23,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 20:58:23,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-16 20:58:23,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-16 20:58:23,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-16 20:58:23,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-16 20:58:23,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-16 20:58:23,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-16 20:58:23,014 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-16 20:58:23,014 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-16 20:58:23,014 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-16 20:58:23,014 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-16 20:58:23,014 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: start group-484D9B88B702
2019-06-16 20:58:23,015 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:group-484D9B88B702 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-16 20:58:23,015 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: start FollowerState
2019-06-16 20:58:23,015 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-484D9B88B702,id=007e8226-6dbe-4b0a-8eb6-e67a0dc3f623
2019-06-16 20:58:24,143 INFO  impl.FollowerState (FollowerState.java:run(101)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:group-484D9B88B702 changes to CANDIDATE, lastRpcTime:1128, electionTimeout:1128ms
2019-06-16 20:58:24,143 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: shutdown FollowerState
2019-06-16 20:58:24,143 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:group-484D9B88B702 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-16 20:58:24,144 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: start LeaderElection
2019-06-16 20:58:24,147 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:group-484D9B88B702:LeaderElection5: begin an election at term 1 for -1: [007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:127.0.0.1:43221], old=null
2019-06-16 20:58:24,147 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: shutdown LeaderElection
2019-06-16 20:58:24,147 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:group-484D9B88B702 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-16 20:58:24,147 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:group-484D9B88B702 change Leader from null to 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623 at term 1 for becomeLeader, leader elected after 1135ms
2019-06-16 20:58:24,147 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-16 20:58:24,148 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-16 20:58:24,148 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-16 20:58:24,148 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-16 20:58:24,148 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: start LeaderState
2019-06-16 20:58:24,148 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623-RaftLogWorker: Starting segment from index:0
2019-06-16 20:58:24,149 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:group-484D9B88B702 set configuration 0: [007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:127.0.0.1:43221], old=null at 0
2019-06-16 20:58:24,189 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler8adb8a5d-fd4d-40db-a6b3-ef7f30bb1430/ratis/b0b0a6ef-7872-43a3-9618-484d9b88b702/current/log_inprogress_0
2019-06-16 20:58:25,058 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 8750064660058505806 is closed with bcsId 0.
2019-06-16 20:58:25,058 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-16 20:58:25,059 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: close
2019-06-16 20:58:25,059 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: shutdown group-484D9B88B702
2019-06-16 20:58:25,059 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-484D9B88B702,id=007e8226-6dbe-4b0a-8eb6-e67a0dc3f623
2019-06-16 20:58:25,059 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: shutdown LeaderState
2019-06-16 20:58:25,061 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623-PendingRequests: sendNotLeaderResponses
2019-06-16 20:58:25,062 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-007e8226-6dbe-4b0a-8eb6-e67a0dc3f623-group-484D9B88B702: set stopIndex = 4
2019-06-16 20:58:25,063 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-16 20:58:25,063 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler8adb8a5d-fd4d-40db-a6b3-ef7f30bb1430/ratis/b0b0a6ef-7872-43a3-9618-484d9b88b702/sm/snapshot.1_4
2019-06-16 20:58:25,063 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623:group-484D9B88B702 closes. The last applied log index is 4
2019-06-16 20:58:25,063 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-16 20:58:25,064 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623-RaftLogWorker close()
2019-06-16 20:58:25,065 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: shutdown server with port 43221 now
2019-06-16 20:58:25,067 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 007e8226-6dbe-4b0a-8eb6-e67a0dc3f623: shutdown server with port 43221 successfully
2019-06-16 20:58:25,068 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
