2019-06-18 04:00:26,436 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere147bfaa-d12f-48b2-8fd3-608a5a25bc5d/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 04:00:26,442 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere147bfaa-d12f-48b2-8fd3-608a5a25bc5d/hdds to VolumeSet
2019-06-18 04:00:26,457 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
2019-06-18 04:00:26,516 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-06-18 04:00:26,935 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 36651
2019-06-18 04:00:27,526 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 04:00:27,556 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 04:00:27,568 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 36651 (custom)
2019-06-18 04:00:27,569 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 04:00:27,571 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 04:00:27,572 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 04:00:27,573 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 04:00:27,760 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere147bfaa-d12f-48b2-8fd3-608a5a25bc5d/ratis] (custom)
2019-06-18 04:00:27,774 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 39695
2019-06-18 04:00:27,797 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 04:00:27,797 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 04:00:27,798 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 013b87ea-6d13-4a62-8b8c-8a47ea11d19d at port 36651
2019-06-18 04:00:27,832 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: start RPC server
2019-06-18 04:00:28,002 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: GrpcService started, listening on 0.0.0.0/0.0.0.0:36651
2019-06-18 04:00:28,379 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: addNew group-3F0848F38AEA:[013b87ea-6d13-4a62-8b8c-8a47ea11d19d:127.0.0.1:36651] returns group-3F0848F38AEA:java.util.concurrent.CompletableFuture@59c58e78[Not completed]
2019-06-18 04:00:28,423 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: new RaftServerImpl for group-3F0848F38AEA:[013b87ea-6d13-4a62-8b8c-8a47ea11d19d:127.0.0.1:36651] with ContainerStateMachine:uninitialized
2019-06-18 04:00:28,424 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 04:00:28,424 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 04:00:28,425 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 04:00:28,426 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 04:00:28,432 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d:group-3F0848F38AEA ConfigurationManager, init=-1: [013b87ea-6d13-4a62-8b8c-8a47ea11d19d:127.0.0.1:36651], old=null, confs=<EMPTY_MAP>
2019-06-18 04:00:28,433 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere147bfaa-d12f-48b2-8fd3-608a5a25bc5d/ratis] (custom)
2019-06-18 04:00:28,442 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere147bfaa-d12f-48b2-8fd3-608a5a25bc5d/ratis/405d4e1f-a528-4411-94d2-3f0848f38aea does not exist. Creating ...
2019-06-18 04:00:28,453 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere147bfaa-d12f-48b2-8fd3-608a5a25bc5d/ratis/405d4e1f-a528-4411-94d2-3f0848f38aea/in_use.lock acquired by nodename 4311@ozone-unit-076618677d3hzh9r-751027030
2019-06-18 04:00:28,463 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere147bfaa-d12f-48b2-8fd3-608a5a25bc5d/ratis/405d4e1f-a528-4411-94d2-3f0848f38aea has been successfully formatted.
2019-06-18 04:00:28,466 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 04:00:28,466 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 04:00:28,468 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 04:00:28,471 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 04:00:28,475 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 04:00:28,479 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 04:00:28,483 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 013b87ea-6d13-4a62-8b8c-8a47ea11d19d-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere147bfaa-d12f-48b2-8fd3-608a5a25bc5d/ratis/405d4e1f-a528-4411-94d2-3f0848f38aea
2019-06-18 04:00:28,483 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 04:00:28,484 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 04:00:28,486 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 04:00:28,486 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 04:00:28,487 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 04:00:28,487 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 04:00:28,488 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 04:00:28,489 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 04:00:28,489 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 04:00:28,492 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 04:00:28,498 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 04:00:28,499 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 04:00:28,499 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 04:00:28,623 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: start group-3F0848F38AEA
2019-06-18 04:00:28,625 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d:group-3F0848F38AEA changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 04:00:28,626 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: start FollowerState
2019-06-18 04:00:28,630 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F0848F38AEA,id=013b87ea-6d13-4a62-8b8c-8a47ea11d19d
2019-06-18 04:00:29,709 INFO  impl.FollowerState (FollowerState.java:run(101)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d:group-3F0848F38AEA changes to CANDIDATE, lastRpcTime:1083, electionTimeout:1082ms
2019-06-18 04:00:29,709 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: shutdown FollowerState
2019-06-18 04:00:29,709 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d:group-3F0848F38AEA changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 04:00:29,711 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: start LeaderElection
2019-06-18 04:00:29,714 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d:group-3F0848F38AEA:LeaderElection1: begin an election at term 1 for -1: [013b87ea-6d13-4a62-8b8c-8a47ea11d19d:127.0.0.1:36651], old=null
2019-06-18 04:00:29,715 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: shutdown LeaderElection
2019-06-18 04:00:29,716 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d:group-3F0848F38AEA changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 04:00:29,716 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d:group-3F0848F38AEA change Leader from null to 013b87ea-6d13-4a62-8b8c-8a47ea11d19d at term 1 for becomeLeader, leader elected after 1250ms
2019-06-18 04:00:29,720 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 04:00:29,720 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 04:00:29,722 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 04:00:29,722 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 04:00:29,729 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: start LeaderState
2019-06-18 04:00:29,741 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d-RaftLogWorker: Starting segment from index:0
2019-06-18 04:00:29,747 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d:group-3F0848F38AEA set configuration 0: [013b87ea-6d13-4a62-8b8c-8a47ea11d19d:127.0.0.1:36651], old=null at 0
2019-06-18 04:00:29,906 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere147bfaa-d12f-48b2-8fd3-608a5a25bc5d/ratis/405d4e1f-a528-4411-94d2-3f0848f38aea/current/log_inprogress_0
2019-06-18 04:00:30,892 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-06-18 04:00:30,964 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 1207606106773407156 is closed with bcsId 0.
2019-06-18 04:00:30,965 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 04:00:30,966 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: close
2019-06-18 04:00:30,967 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: shutdown group-3F0848F38AEA
2019-06-18 04:00:30,968 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F0848F38AEA,id=013b87ea-6d13-4a62-8b8c-8a47ea11d19d
2019-06-18 04:00:30,968 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: shutdown LeaderState
2019-06-18 04:00:30,968 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d-PendingRequests: sendNotLeaderResponses
2019-06-18 04:00:30,972 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-013b87ea-6d13-4a62-8b8c-8a47ea11d19d-group-3F0848F38AEA: set stopIndex = 4
2019-06-18 04:00:30,972 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-18 04:00:30,973 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere147bfaa-d12f-48b2-8fd3-608a5a25bc5d/ratis/405d4e1f-a528-4411-94d2-3f0848f38aea/sm/snapshot.1_4
2019-06-18 04:00:30,983 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d:group-3F0848F38AEA closes. The last applied log index is 4
2019-06-18 04:00:30,984 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 04:00:30,985 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d-RaftLogWorker close()
2019-06-18 04:00:30,986 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: shutdown server with port 36651 now
2019-06-18 04:00:30,990 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 013b87ea-6d13-4a62-8b8c-8a47ea11d19d: shutdown server with port 36651 successfully
2019-06-18 04:00:31,002 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 04:00:31,039 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerbf5f6215-8f69-439f-80c1-700ce247c704/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 04:00:31,039 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerbf5f6215-8f69-439f-80c1-700ce247c704/hdds to VolumeSet
2019-06-18 04:00:31,040 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@3a2b2322
2019-06-18 04:00:31,042 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@3a2b2322
2019-06-18 04:00:31,064 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 43609
2019-06-18 04:00:31,065 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 04:00:31,066 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 04:00:31,067 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 43609 (custom)
2019-06-18 04:00:31,067 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 04:00:31,067 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 04:00:31,068 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 04:00:31,068 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 04:00:31,069 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerbf5f6215-8f69-439f-80c1-700ce247c704/ratis] (custom)
2019-06-18 04:00:31,070 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 44739
2019-06-18 04:00:31,070 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 04:00:31,070 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 04:00:31,071 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis ec675d71-cce5-49ad-95f9-a8da6a04fb23 at port 43609
2019-06-18 04:00:31,100 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: start RPC server
2019-06-18 04:00:31,102 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: GrpcService started, listening on 0.0.0.0/0.0.0.0:43609
2019-06-18 04:00:31,121 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: addNew group-C80D9DA37F5A:[ec675d71-cce5-49ad-95f9-a8da6a04fb23:127.0.0.1:43609] returns group-C80D9DA37F5A:java.util.concurrent.CompletableFuture@2195a07c[Not completed]
2019-06-18 04:00:31,128 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: new RaftServerImpl for group-C80D9DA37F5A:[ec675d71-cce5-49ad-95f9-a8da6a04fb23:127.0.0.1:43609] with ContainerStateMachine:uninitialized
2019-06-18 04:00:31,128 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 04:00:31,128 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 04:00:31,128 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 04:00:31,129 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 04:00:31,129 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23:group-C80D9DA37F5A ConfigurationManager, init=-1: [ec675d71-cce5-49ad-95f9-a8da6a04fb23:127.0.0.1:43609], old=null, confs=<EMPTY_MAP>
2019-06-18 04:00:31,129 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerbf5f6215-8f69-439f-80c1-700ce247c704/ratis] (custom)
2019-06-18 04:00:31,129 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerbf5f6215-8f69-439f-80c1-700ce247c704/ratis/0d35c9b7-ea69-4eed-a74f-c80d9da37f5a does not exist. Creating ...
2019-06-18 04:00:31,133 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerbf5f6215-8f69-439f-80c1-700ce247c704/ratis/0d35c9b7-ea69-4eed-a74f-c80d9da37f5a/in_use.lock acquired by nodename 4311@ozone-unit-076618677d3hzh9r-751027030
2019-06-18 04:00:31,136 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerbf5f6215-8f69-439f-80c1-700ce247c704/ratis/0d35c9b7-ea69-4eed-a74f-c80d9da37f5a has been successfully formatted.
2019-06-18 04:00:31,136 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 04:00:31,136 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 04:00:31,136 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 04:00:31,136 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 04:00:31,137 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 04:00:31,140 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 04:00:31,140 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new ec675d71-cce5-49ad-95f9-a8da6a04fb23-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerbf5f6215-8f69-439f-80c1-700ce247c704/ratis/0d35c9b7-ea69-4eed-a74f-c80d9da37f5a
2019-06-18 04:00:31,140 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 04:00:31,141 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 04:00:31,143 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 04:00:31,143 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 04:00:31,144 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 04:00:31,144 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 04:00:31,144 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 04:00:31,144 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 04:00:31,144 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 04:00:31,144 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 04:00:31,145 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 04:00:31,146 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 04:00:31,146 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 04:00:31,147 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: start group-C80D9DA37F5A
2019-06-18 04:00:31,147 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23:group-C80D9DA37F5A changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 04:00:31,147 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: start FollowerState
2019-06-18 04:00:31,148 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-C80D9DA37F5A,id=ec675d71-cce5-49ad-95f9-a8da6a04fb23
2019-06-18 04:00:32,329 INFO  impl.FollowerState (FollowerState.java:run(101)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23:group-C80D9DA37F5A changes to CANDIDATE, lastRpcTime:1181, electionTimeout:1181ms
2019-06-18 04:00:32,329 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: shutdown FollowerState
2019-06-18 04:00:32,329 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23:group-C80D9DA37F5A changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 04:00:32,329 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: start LeaderElection
2019-06-18 04:00:32,334 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23:group-C80D9DA37F5A:LeaderElection2: begin an election at term 1 for -1: [ec675d71-cce5-49ad-95f9-a8da6a04fb23:127.0.0.1:43609], old=null
2019-06-18 04:00:32,334 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: shutdown LeaderElection
2019-06-18 04:00:32,334 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23:group-C80D9DA37F5A changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 04:00:32,335 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23:group-C80D9DA37F5A change Leader from null to ec675d71-cce5-49ad-95f9-a8da6a04fb23 at term 1 for becomeLeader, leader elected after 1198ms
2019-06-18 04:00:32,335 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 04:00:32,335 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 04:00:32,335 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 04:00:32,335 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 04:00:32,336 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: start LeaderState
2019-06-18 04:00:32,336 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23-RaftLogWorker: Starting segment from index:0
2019-06-18 04:00:32,337 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23:group-C80D9DA37F5A set configuration 0: [ec675d71-cce5-49ad-95f9-a8da6a04fb23:127.0.0.1:43609], old=null at 0
2019-06-18 04:00:32,377 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerbf5f6215-8f69-439f-80c1-700ce247c704/ratis/0d35c9b7-ea69-4eed-a74f-c80d9da37f5a/current/log_inprogress_0
2019-06-18 04:00:33,185 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 04:00:33,186 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: close
2019-06-18 04:00:33,187 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: shutdown group-C80D9DA37F5A
2019-06-18 04:00:33,187 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-C80D9DA37F5A,id=ec675d71-cce5-49ad-95f9-a8da6a04fb23
2019-06-18 04:00:33,188 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: shutdown LeaderState
2019-06-18 04:00:33,188 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23-PendingRequests: sendNotLeaderResponses
2019-06-18 04:00:33,189 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-ec675d71-cce5-49ad-95f9-a8da6a04fb23-group-C80D9DA37F5A: set stopIndex = 2
2019-06-18 04:00:33,189 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 04:00:33,189 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerbf5f6215-8f69-439f-80c1-700ce247c704/ratis/0d35c9b7-ea69-4eed-a74f-c80d9da37f5a/sm/snapshot.1_2
2019-06-18 04:00:33,190 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23:group-C80D9DA37F5A closes. The last applied log index is 2
2019-06-18 04:00:33,193 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 04:00:33,195 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23-RaftLogWorker close()
2019-06-18 04:00:33,196 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: shutdown server with port 43609 now
2019-06-18 04:00:33,197 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - ec675d71-cce5-49ad-95f9-a8da6a04fb23: shutdown server with port 43609 successfully
2019-06-18 04:00:33,204 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 04:00:33,238 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler24b21e3a-8e77-42fa-bea0-a6ba40fa5147/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 04:00:33,239 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler24b21e3a-8e77-42fa-bea0-a6ba40fa5147/hdds to VolumeSet
2019-06-18 04:00:33,239 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@26a2f7f9
2019-06-18 04:00:33,245 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@26a2f7f9
2019-06-18 04:00:33,266 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 43613
2019-06-18 04:00:33,267 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 04:00:33,267 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 04:00:33,268 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 43613 (custom)
2019-06-18 04:00:33,268 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 04:00:33,268 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 04:00:33,269 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 04:00:33,269 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 04:00:33,269 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler24b21e3a-8e77-42fa-bea0-a6ba40fa5147/ratis] (custom)
2019-06-18 04:00:33,270 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 40687
2019-06-18 04:00:33,270 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 04:00:33,271 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 04:00:33,271 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 02dacbd7-6399-4b2a-bbac-dba2a4140c60 at port 43613
2019-06-18 04:00:33,286 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: start RPC server
2019-06-18 04:00:33,288 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: GrpcService started, listening on 0.0.0.0/0.0.0.0:43613
2019-06-18 04:00:33,305 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: addNew group-BC87DA26E4AE:[02dacbd7-6399-4b2a-bbac-dba2a4140c60:127.0.0.1:43613] returns group-BC87DA26E4AE:java.util.concurrent.CompletableFuture@2887b964[Not completed]
2019-06-18 04:00:33,305 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: new RaftServerImpl for group-BC87DA26E4AE:[02dacbd7-6399-4b2a-bbac-dba2a4140c60:127.0.0.1:43613] with ContainerStateMachine:uninitialized
2019-06-18 04:00:33,306 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 04:00:33,306 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 04:00:33,306 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 04:00:33,306 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 04:00:33,307 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60:group-BC87DA26E4AE ConfigurationManager, init=-1: [02dacbd7-6399-4b2a-bbac-dba2a4140c60:127.0.0.1:43613], old=null, confs=<EMPTY_MAP>
2019-06-18 04:00:33,307 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler24b21e3a-8e77-42fa-bea0-a6ba40fa5147/ratis] (custom)
2019-06-18 04:00:33,307 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler24b21e3a-8e77-42fa-bea0-a6ba40fa5147/ratis/9744b108-b5b6-4dd1-a3bf-bc87da26e4ae does not exist. Creating ...
2019-06-18 04:00:33,310 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler24b21e3a-8e77-42fa-bea0-a6ba40fa5147/ratis/9744b108-b5b6-4dd1-a3bf-bc87da26e4ae/in_use.lock acquired by nodename 4311@ozone-unit-076618677d3hzh9r-751027030
2019-06-18 04:00:33,313 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler24b21e3a-8e77-42fa-bea0-a6ba40fa5147/ratis/9744b108-b5b6-4dd1-a3bf-bc87da26e4ae has been successfully formatted.
2019-06-18 04:00:33,313 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 04:00:33,313 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 04:00:33,313 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 04:00:33,313 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 04:00:33,314 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 04:00:33,314 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 04:00:33,314 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 02dacbd7-6399-4b2a-bbac-dba2a4140c60-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler24b21e3a-8e77-42fa-bea0-a6ba40fa5147/ratis/9744b108-b5b6-4dd1-a3bf-bc87da26e4ae
2019-06-18 04:00:33,314 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 04:00:33,314 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 04:00:33,314 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 04:00:33,314 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 04:00:33,314 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 04:00:33,314 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 04:00:33,315 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 04:00:33,315 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 04:00:33,315 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 04:00:33,315 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 04:00:33,315 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 04:00:33,316 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 04:00:33,316 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 04:00:33,316 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: start group-BC87DA26E4AE
2019-06-18 04:00:33,316 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60:group-BC87DA26E4AE changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 04:00:33,316 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: start FollowerState
2019-06-18 04:00:33,317 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BC87DA26E4AE,id=02dacbd7-6399-4b2a-bbac-dba2a4140c60
2019-06-18 04:00:34,481 INFO  impl.FollowerState (FollowerState.java:run(101)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60:group-BC87DA26E4AE changes to CANDIDATE, lastRpcTime:1165, electionTimeout:1164ms
2019-06-18 04:00:34,482 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: shutdown FollowerState
2019-06-18 04:00:34,482 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60:group-BC87DA26E4AE changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 04:00:34,482 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: start LeaderElection
2019-06-18 04:00:34,487 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60:group-BC87DA26E4AE:LeaderElection3: begin an election at term 1 for -1: [02dacbd7-6399-4b2a-bbac-dba2a4140c60:127.0.0.1:43613], old=null
2019-06-18 04:00:34,487 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: shutdown LeaderElection
2019-06-18 04:00:34,487 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60:group-BC87DA26E4AE changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 04:00:34,487 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60:group-BC87DA26E4AE change Leader from null to 02dacbd7-6399-4b2a-bbac-dba2a4140c60 at term 1 for becomeLeader, leader elected after 1173ms
2019-06-18 04:00:34,487 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 04:00:34,487 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 04:00:34,488 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 04:00:34,488 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 04:00:34,488 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: start LeaderState
2019-06-18 04:00:34,488 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60-RaftLogWorker: Starting segment from index:0
2019-06-18 04:00:34,498 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60:group-BC87DA26E4AE set configuration 0: [02dacbd7-6399-4b2a-bbac-dba2a4140c60:127.0.0.1:43613], old=null at 0
2019-06-18 04:00:34,535 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler24b21e3a-8e77-42fa-bea0-a6ba40fa5147/ratis/9744b108-b5b6-4dd1-a3bf-bc87da26e4ae/current/log_inprogress_0
2019-06-18 04:00:35,391 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 6559080976663195362 is closed with bcsId 0.
2019-06-18 04:00:35,392 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 04:00:35,392 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: close
2019-06-18 04:00:35,392 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: shutdown group-BC87DA26E4AE
2019-06-18 04:00:35,393 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BC87DA26E4AE,id=02dacbd7-6399-4b2a-bbac-dba2a4140c60
2019-06-18 04:00:35,393 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: shutdown LeaderState
2019-06-18 04:00:35,393 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60-PendingRequests: sendNotLeaderResponses
2019-06-18 04:00:35,394 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-02dacbd7-6399-4b2a-bbac-dba2a4140c60-group-BC87DA26E4AE: set stopIndex = 2
2019-06-18 04:00:35,394 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 04:00:35,395 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler24b21e3a-8e77-42fa-bea0-a6ba40fa5147/ratis/9744b108-b5b6-4dd1-a3bf-bc87da26e4ae/sm/snapshot.1_2
2019-06-18 04:00:35,395 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60:group-BC87DA26E4AE closes. The last applied log index is 2
2019-06-18 04:00:35,396 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 04:00:35,396 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60-RaftLogWorker close()
2019-06-18 04:00:35,397 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: shutdown server with port 43613 now
2019-06-18 04:00:35,399 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 02dacbd7-6399-4b2a-bbac-dba2a4140c60: shutdown server with port 43613 successfully
2019-06-18 04:00:35,401 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 04:00:35,446 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler912dfcad-1c99-4f27-a222-a95cc2e1fba0/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 04:00:35,447 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler912dfcad-1c99-4f27-a222-a95cc2e1fba0/hdds to VolumeSet
2019-06-18 04:00:35,447 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@455824ad
2019-06-18 04:00:35,448 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@455824ad
2019-06-18 04:00:35,461 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 43315
2019-06-18 04:00:35,462 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 04:00:35,463 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 04:00:35,463 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 43315 (custom)
2019-06-18 04:00:35,463 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 04:00:35,464 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 04:00:35,464 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 04:00:35,464 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 04:00:35,465 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler912dfcad-1c99-4f27-a222-a95cc2e1fba0/ratis] (custom)
2019-06-18 04:00:35,465 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 43537
2019-06-18 04:00:35,466 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 04:00:35,466 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 04:00:35,466 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 9653e8ca-351e-4c8a-970d-db937071079d at port 43315
2019-06-18 04:00:35,481 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 9653e8ca-351e-4c8a-970d-db937071079d: start RPC server
2019-06-18 04:00:35,486 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 9653e8ca-351e-4c8a-970d-db937071079d: GrpcService started, listening on 0.0.0.0/0.0.0.0:43315
Jun 18, 2019 4:00:35 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:43609} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 18, 2019 4:00:35 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:43613} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-18 04:00:35,523 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 9653e8ca-351e-4c8a-970d-db937071079d: addNew group-BCC3F0FF00D1:[9653e8ca-351e-4c8a-970d-db937071079d:127.0.0.1:43315] returns group-BCC3F0FF00D1:java.util.concurrent.CompletableFuture@15340812[Not completed]
2019-06-18 04:00:35,524 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 9653e8ca-351e-4c8a-970d-db937071079d: new RaftServerImpl for group-BCC3F0FF00D1:[9653e8ca-351e-4c8a-970d-db937071079d:127.0.0.1:43315] with ContainerStateMachine:uninitialized
2019-06-18 04:00:35,525 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 04:00:35,525 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 04:00:35,526 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 04:00:35,526 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 04:00:35,526 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 9653e8ca-351e-4c8a-970d-db937071079d:group-BCC3F0FF00D1 ConfigurationManager, init=-1: [9653e8ca-351e-4c8a-970d-db937071079d:127.0.0.1:43315], old=null, confs=<EMPTY_MAP>
2019-06-18 04:00:35,526 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler912dfcad-1c99-4f27-a222-a95cc2e1fba0/ratis] (custom)
2019-06-18 04:00:35,527 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler912dfcad-1c99-4f27-a222-a95cc2e1fba0/ratis/5675a29c-979b-448e-8bec-bcc3f0ff00d1 does not exist. Creating ...
2019-06-18 04:00:35,531 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler912dfcad-1c99-4f27-a222-a95cc2e1fba0/ratis/5675a29c-979b-448e-8bec-bcc3f0ff00d1/in_use.lock acquired by nodename 4311@ozone-unit-076618677d3hzh9r-751027030
2019-06-18 04:00:35,534 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler912dfcad-1c99-4f27-a222-a95cc2e1fba0/ratis/5675a29c-979b-448e-8bec-bcc3f0ff00d1 has been successfully formatted.
2019-06-18 04:00:35,534 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 04:00:35,534 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 04:00:35,535 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 04:00:35,535 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 04:00:35,535 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 04:00:35,536 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 04:00:35,537 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 9653e8ca-351e-4c8a-970d-db937071079d-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler912dfcad-1c99-4f27-a222-a95cc2e1fba0/ratis/5675a29c-979b-448e-8bec-bcc3f0ff00d1
2019-06-18 04:00:35,538 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 04:00:35,538 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 04:00:35,538 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 04:00:35,538 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 04:00:35,538 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 04:00:35,538 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 04:00:35,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 04:00:35,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 04:00:35,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 04:00:35,539 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 04:00:35,541 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 04:00:35,541 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 04:00:35,543 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 04:00:35,544 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 9653e8ca-351e-4c8a-970d-db937071079d: start group-BCC3F0FF00D1
2019-06-18 04:00:35,544 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 9653e8ca-351e-4c8a-970d-db937071079d:group-BCC3F0FF00D1 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 04:00:35,544 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 9653e8ca-351e-4c8a-970d-db937071079d: start FollowerState
2019-06-18 04:00:35,545 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BCC3F0FF00D1,id=9653e8ca-351e-4c8a-970d-db937071079d
2019-06-18 04:00:36,588 INFO  impl.FollowerState (FollowerState.java:run(101)) - 9653e8ca-351e-4c8a-970d-db937071079d:group-BCC3F0FF00D1 changes to CANDIDATE, lastRpcTime:1044, electionTimeout:1044ms
2019-06-18 04:00:36,589 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 9653e8ca-351e-4c8a-970d-db937071079d: shutdown FollowerState
2019-06-18 04:00:36,589 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 9653e8ca-351e-4c8a-970d-db937071079d:group-BCC3F0FF00D1 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 04:00:36,589 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 9653e8ca-351e-4c8a-970d-db937071079d: start LeaderElection
2019-06-18 04:00:36,595 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 9653e8ca-351e-4c8a-970d-db937071079d:group-BCC3F0FF00D1:LeaderElection4: begin an election at term 1 for -1: [9653e8ca-351e-4c8a-970d-db937071079d:127.0.0.1:43315], old=null
2019-06-18 04:00:36,595 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 9653e8ca-351e-4c8a-970d-db937071079d: shutdown LeaderElection
2019-06-18 04:00:36,595 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 9653e8ca-351e-4c8a-970d-db937071079d:group-BCC3F0FF00D1 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 04:00:36,595 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 9653e8ca-351e-4c8a-970d-db937071079d:group-BCC3F0FF00D1 change Leader from null to 9653e8ca-351e-4c8a-970d-db937071079d at term 1 for becomeLeader, leader elected after 1060ms
2019-06-18 04:00:36,595 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 04:00:36,596 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 04:00:36,596 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 04:00:36,596 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 04:00:36,596 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 9653e8ca-351e-4c8a-970d-db937071079d: start LeaderState
2019-06-18 04:00:36,596 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 9653e8ca-351e-4c8a-970d-db937071079d-RaftLogWorker: Starting segment from index:0
2019-06-18 04:00:36,610 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 9653e8ca-351e-4c8a-970d-db937071079d:group-BCC3F0FF00D1 set configuration 0: [9653e8ca-351e-4c8a-970d-db937071079d:127.0.0.1:43315], old=null at 0
2019-06-18 04:00:36,639 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 9653e8ca-351e-4c8a-970d-db937071079d-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler912dfcad-1c99-4f27-a222-a95cc2e1fba0/ratis/5675a29c-979b-448e-8bec-bcc3f0ff00d1/current/log_inprogress_0
2019-06-18 04:00:37,606 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 8390944527560714377 is closed with bcsId 0.
2019-06-18 04:00:37,607 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 04:00:37,607 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 9653e8ca-351e-4c8a-970d-db937071079d: close
2019-06-18 04:00:37,608 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 9653e8ca-351e-4c8a-970d-db937071079d: shutdown group-BCC3F0FF00D1
2019-06-18 04:00:37,608 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BCC3F0FF00D1,id=9653e8ca-351e-4c8a-970d-db937071079d
2019-06-18 04:00:37,608 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 9653e8ca-351e-4c8a-970d-db937071079d: shutdown LeaderState
2019-06-18 04:00:37,609 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 9653e8ca-351e-4c8a-970d-db937071079d-PendingRequests: sendNotLeaderResponses
2019-06-18 04:00:37,610 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-9653e8ca-351e-4c8a-970d-db937071079d-group-BCC3F0FF00D1: set stopIndex = 2
2019-06-18 04:00:37,610 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-18 04:00:37,610 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler912dfcad-1c99-4f27-a222-a95cc2e1fba0/ratis/5675a29c-979b-448e-8bec-bcc3f0ff00d1/sm/snapshot.1_2
2019-06-18 04:00:37,611 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 9653e8ca-351e-4c8a-970d-db937071079d:group-BCC3F0FF00D1 closes. The last applied log index is 2
2019-06-18 04:00:37,611 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 9653e8ca-351e-4c8a-970d-db937071079d-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 04:00:37,611 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 9653e8ca-351e-4c8a-970d-db937071079d-RaftLogWorker close()
2019-06-18 04:00:37,614 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 9653e8ca-351e-4c8a-970d-db937071079d: shutdown server with port 43315 now
2019-06-18 04:00:37,616 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 9653e8ca-351e-4c8a-970d-db937071079d: shutdown server with port 43315 successfully
2019-06-18 04:00:37,620 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-18 04:00:37,643 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler11f6f9e2-2d5e-42b9-998d-9d7fbf779584/hdds of  storage type : DISK and capacity : 104021790720
2019-06-18 04:00:37,643 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler11f6f9e2-2d5e-42b9-998d-9d7fbf779584/hdds to VolumeSet
2019-06-18 04:00:37,643 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@3e5d4f6b
2019-06-18 04:00:37,644 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@3e5d4f6b
2019-06-18 04:00:37,653 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 44313
2019-06-18 04:00:37,654 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-18 04:00:37,654 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-18 04:00:37,655 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 44313 (custom)
2019-06-18 04:00:37,655 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-18 04:00:37,655 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 04:00:37,655 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-18 04:00:37,656 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-18 04:00:37,656 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler11f6f9e2-2d5e-42b9-998d-9d7fbf779584/ratis] (custom)
2019-06-18 04:00:37,657 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 38821
2019-06-18 04:00:37,657 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-18 04:00:37,657 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-18 04:00:37,657 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis cba8e1df-a81d-492a-94eb-c194cc3bdf20 at port 44313
2019-06-18 04:00:37,690 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: start RPC server
2019-06-18 04:00:37,692 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: GrpcService started, listening on 0.0.0.0/0.0.0.0:44313
2019-06-18 04:00:37,701 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: addNew group-2F85883487DB:[cba8e1df-a81d-492a-94eb-c194cc3bdf20:127.0.0.1:44313] returns group-2F85883487DB:java.util.concurrent.CompletableFuture@6110dc68[Not completed]
2019-06-18 04:00:37,701 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: new RaftServerImpl for group-2F85883487DB:[cba8e1df-a81d-492a-94eb-c194cc3bdf20:127.0.0.1:44313] with ContainerStateMachine:uninitialized
2019-06-18 04:00:37,701 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-18 04:00:37,702 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-18 04:00:37,702 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-18 04:00:37,702 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-18 04:00:37,702 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20:group-2F85883487DB ConfigurationManager, init=-1: [cba8e1df-a81d-492a-94eb-c194cc3bdf20:127.0.0.1:44313], old=null, confs=<EMPTY_MAP>
2019-06-18 04:00:37,702 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler11f6f9e2-2d5e-42b9-998d-9d7fbf779584/ratis] (custom)
2019-06-18 04:00:37,702 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler11f6f9e2-2d5e-42b9-998d-9d7fbf779584/ratis/dbcf33f3-d79c-48a4-b2a6-2f85883487db does not exist. Creating ...
2019-06-18 04:00:37,705 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler11f6f9e2-2d5e-42b9-998d-9d7fbf779584/ratis/dbcf33f3-d79c-48a4-b2a6-2f85883487db/in_use.lock acquired by nodename 4311@ozone-unit-076618677d3hzh9r-751027030
2019-06-18 04:00:37,707 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler11f6f9e2-2d5e-42b9-998d-9d7fbf779584/ratis/dbcf33f3-d79c-48a4-b2a6-2f85883487db has been successfully formatted.
2019-06-18 04:00:37,707 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-18 04:00:37,707 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-18 04:00:37,707 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-18 04:00:37,707 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-18 04:00:37,708 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 04:00:37,708 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-18 04:00:37,708 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new cba8e1df-a81d-492a-94eb-c194cc3bdf20-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler11f6f9e2-2d5e-42b9-998d-9d7fbf779584/ratis/dbcf33f3-d79c-48a4-b2a6-2f85883487db
2019-06-18 04:00:37,708 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-18 04:00:37,708 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-18 04:00:37,708 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-18 04:00:37,708 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-18 04:00:37,708 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-18 04:00:37,708 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-18 04:00:37,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-18 04:00:37,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-18 04:00:37,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-18 04:00:37,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-18 04:00:37,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-18 04:00:37,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-18 04:00:37,710 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-18 04:00:37,710 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: start group-2F85883487DB
2019-06-18 04:00:37,710 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20:group-2F85883487DB changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-18 04:00:37,710 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: start FollowerState
2019-06-18 04:00:37,710 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2F85883487DB,id=cba8e1df-a81d-492a-94eb-c194cc3bdf20
2019-06-18 04:00:38,861 INFO  impl.FollowerState (FollowerState.java:run(101)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20:group-2F85883487DB changes to CANDIDATE, lastRpcTime:1151, electionTimeout:1151ms
2019-06-18 04:00:38,861 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: shutdown FollowerState
2019-06-18 04:00:38,862 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20:group-2F85883487DB changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-18 04:00:38,862 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: start LeaderElection
2019-06-18 04:00:38,867 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20:group-2F85883487DB:LeaderElection5: begin an election at term 1 for -1: [cba8e1df-a81d-492a-94eb-c194cc3bdf20:127.0.0.1:44313], old=null
2019-06-18 04:00:38,867 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: shutdown LeaderElection
2019-06-18 04:00:38,867 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20:group-2F85883487DB changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-18 04:00:38,867 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20:group-2F85883487DB change Leader from null to cba8e1df-a81d-492a-94eb-c194cc3bdf20 at term 1 for becomeLeader, leader elected after 1159ms
2019-06-18 04:00:38,867 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-18 04:00:38,867 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-18 04:00:38,867 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-18 04:00:38,867 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-18 04:00:38,868 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: start LeaderState
2019-06-18 04:00:38,868 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20-RaftLogWorker: Starting segment from index:0
2019-06-18 04:00:38,868 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20:group-2F85883487DB set configuration 0: [cba8e1df-a81d-492a-94eb-c194cc3bdf20:127.0.0.1:44313], old=null at 0
2019-06-18 04:00:38,911 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler11f6f9e2-2d5e-42b9-998d-9d7fbf779584/ratis/dbcf33f3-d79c-48a4-b2a6-2f85883487db/current/log_inprogress_0
2019-06-18 04:00:39,764 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 285603026164740995 is closed with bcsId 0.
2019-06-18 04:00:39,765 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-18 04:00:39,765 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: close
2019-06-18 04:00:39,766 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: shutdown group-2F85883487DB
2019-06-18 04:00:39,766 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2F85883487DB,id=cba8e1df-a81d-492a-94eb-c194cc3bdf20
2019-06-18 04:00:39,766 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: shutdown LeaderState
2019-06-18 04:00:39,767 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20-PendingRequests: sendNotLeaderResponses
2019-06-18 04:00:39,768 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-cba8e1df-a81d-492a-94eb-c194cc3bdf20-group-2F85883487DB: set stopIndex = 4
2019-06-18 04:00:39,768 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-18 04:00:39,768 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler11f6f9e2-2d5e-42b9-998d-9d7fbf779584/ratis/dbcf33f3-d79c-48a4-b2a6-2f85883487db/sm/snapshot.1_4
2019-06-18 04:00:39,768 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20:group-2F85883487DB closes. The last applied log index is 4
2019-06-18 04:00:39,768 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-18 04:00:39,769 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20-RaftLogWorker close()
2019-06-18 04:00:39,770 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: shutdown server with port 44313 now
2019-06-18 04:00:39,771 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - cba8e1df-a81d-492a-94eb-c194cc3bdf20: shutdown server with port 44313 successfully
2019-06-18 04:00:39,775 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
