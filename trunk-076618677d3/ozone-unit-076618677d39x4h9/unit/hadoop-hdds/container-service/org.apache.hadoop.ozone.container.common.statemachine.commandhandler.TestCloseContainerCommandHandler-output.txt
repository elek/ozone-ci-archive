2019-06-16 23:50:12,908 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfbfca65d-d15e-46c9-ae04-44f0ea679a69/hdds of  storage type : DISK and capacity : 104021790720
2019-06-16 23:50:12,913 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfbfca65d-d15e-46c9-ae04-44f0ea679a69/hdds to VolumeSet
2019-06-16 23:50:12,924 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
2019-06-16 23:50:12,976 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-06-16 23:50:13,330 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 44733
2019-06-16 23:50:13,749 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-16 23:50:13,776 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-16 23:50:13,787 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 44733 (custom)
2019-06-16 23:50:13,788 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-16 23:50:13,790 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 23:50:13,791 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-16 23:50:13,792 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-16 23:50:13,921 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfbfca65d-d15e-46c9-ae04-44f0ea679a69/ratis] (custom)
2019-06-16 23:50:13,930 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 33625
2019-06-16 23:50:13,949 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-16 23:50:13,949 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-16 23:50:13,950 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee at port 44733
2019-06-16 23:50:13,961 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: start RPC server
2019-06-16 23:50:14,082 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: GrpcService started, listening on 0.0.0.0/0.0.0.0:44733
2019-06-16 23:50:14,389 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: addNew group-E0668490F5FE:[09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:127.0.0.1:44733] returns group-E0668490F5FE:java.util.concurrent.CompletableFuture@5669f4e2[Not completed]
2019-06-16 23:50:14,418 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: new RaftServerImpl for group-E0668490F5FE:[09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:127.0.0.1:44733] with ContainerStateMachine:uninitialized
2019-06-16 23:50:14,419 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-16 23:50:14,420 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-16 23:50:14,420 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-16 23:50:14,420 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-16 23:50:14,425 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:group-E0668490F5FE ConfigurationManager, init=-1: [09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:127.0.0.1:44733], old=null, confs=<EMPTY_MAP>
2019-06-16 23:50:14,426 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfbfca65d-d15e-46c9-ae04-44f0ea679a69/ratis] (custom)
2019-06-16 23:50:14,433 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfbfca65d-d15e-46c9-ae04-44f0ea679a69/ratis/6f28b5be-6349-4cc1-aa0a-e0668490f5fe does not exist. Creating ...
2019-06-16 23:50:14,440 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfbfca65d-d15e-46c9-ae04-44f0ea679a69/ratis/6f28b5be-6349-4cc1-aa0a-e0668490f5fe/in_use.lock acquired by nodename 4301@ozone-unit-076618677d39x4h9-3035865345
2019-06-16 23:50:14,447 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfbfca65d-d15e-46c9-ae04-44f0ea679a69/ratis/6f28b5be-6349-4cc1-aa0a-e0668490f5fe has been successfully formatted.
2019-06-16 23:50:14,449 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-16 23:50:14,449 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-16 23:50:14,451 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-16 23:50:14,452 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 23:50:14,455 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 23:50:14,458 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-16 23:50:14,460 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfbfca65d-d15e-46c9-ae04-44f0ea679a69/ratis/6f28b5be-6349-4cc1-aa0a-e0668490f5fe
2019-06-16 23:50:14,460 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-16 23:50:14,461 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-16 23:50:14,462 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 23:50:14,462 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-16 23:50:14,463 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-16 23:50:14,463 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-16 23:50:14,464 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-16 23:50:14,464 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-16 23:50:14,464 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-16 23:50:14,466 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-16 23:50:14,472 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-16 23:50:14,473 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-16 23:50:14,473 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-16 23:50:14,571 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: start group-E0668490F5FE
2019-06-16 23:50:14,572 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:group-E0668490F5FE changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-16 23:50:14,574 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: start FollowerState
2019-06-16 23:50:14,575 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-E0668490F5FE,id=09bad9b8-4fcb-434b-a4e4-5f26fbc084ee
2019-06-16 23:50:15,599 INFO  impl.FollowerState (FollowerState.java:run(101)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:group-E0668490F5FE changes to CANDIDATE, lastRpcTime:1025, electionTimeout:1025ms
2019-06-16 23:50:15,599 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: shutdown FollowerState
2019-06-16 23:50:15,599 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:group-E0668490F5FE changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-16 23:50:15,601 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: start LeaderElection
2019-06-16 23:50:15,604 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:group-E0668490F5FE:LeaderElection1: begin an election at term 1 for -1: [09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:127.0.0.1:44733], old=null
2019-06-16 23:50:15,605 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: shutdown LeaderElection
2019-06-16 23:50:15,605 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:group-E0668490F5FE changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-16 23:50:15,605 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:group-E0668490F5FE change Leader from null to 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee at term 1 for becomeLeader, leader elected after 1155ms
2019-06-16 23:50:15,609 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-16 23:50:15,609 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-16 23:50:15,611 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-16 23:50:15,611 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-16 23:50:15,619 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: start LeaderState
2019-06-16 23:50:15,630 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee-RaftLogWorker: Starting segment from index:0
2019-06-16 23:50:15,635 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:group-E0668490F5FE set configuration 0: [09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:127.0.0.1:44733], old=null at 0
2019-06-16 23:50:15,759 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfbfca65d-d15e-46c9-ae04-44f0ea679a69/ratis/6f28b5be-6349-4cc1-aa0a-e0668490f5fe/current/log_inprogress_0
2019-06-16 23:50:16,795 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-06-16 23:50:16,847 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 5699505424022491661 is closed with bcsId 0.
2019-06-16 23:50:16,848 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-16 23:50:16,849 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: close
2019-06-16 23:50:16,850 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: shutdown group-E0668490F5FE
2019-06-16 23:50:16,850 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-E0668490F5FE,id=09bad9b8-4fcb-434b-a4e4-5f26fbc084ee
2019-06-16 23:50:16,850 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: shutdown LeaderState
2019-06-16 23:50:16,851 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee-PendingRequests: sendNotLeaderResponses
2019-06-16 23:50:16,853 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-09bad9b8-4fcb-434b-a4e4-5f26fbc084ee-group-E0668490F5FE: set stopIndex = 4
2019-06-16 23:50:16,853 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-16 23:50:16,853 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerfbfca65d-d15e-46c9-ae04-44f0ea679a69/ratis/6f28b5be-6349-4cc1-aa0a-e0668490f5fe/sm/snapshot.1_4
2019-06-16 23:50:16,859 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee:group-E0668490F5FE closes. The last applied log index is 4
2019-06-16 23:50:16,860 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-16 23:50:16,860 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee-RaftLogWorker close()
2019-06-16 23:50:16,861 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: shutdown server with port 44733 now
2019-06-16 23:50:16,865 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 09bad9b8-4fcb-434b-a4e4-5f26fbc084ee: shutdown server with port 44733 successfully
2019-06-16 23:50:16,874 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-16 23:50:16,899 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45abe210-92fc-4409-b197-909d93116318/hdds of  storage type : DISK and capacity : 104021790720
2019-06-16 23:50:16,899 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45abe210-92fc-4409-b197-909d93116318/hdds to VolumeSet
2019-06-16 23:50:16,899 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@3a2b2322
2019-06-16 23:50:16,900 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@3a2b2322
2019-06-16 23:50:16,913 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 39461
2019-06-16 23:50:16,914 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-16 23:50:16,915 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-16 23:50:16,915 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 39461 (custom)
2019-06-16 23:50:16,915 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-16 23:50:16,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 23:50:16,916 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-16 23:50:16,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-16 23:50:16,917 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45abe210-92fc-4409-b197-909d93116318/ratis] (custom)
2019-06-16 23:50:16,918 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 34603
2019-06-16 23:50:16,918 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-16 23:50:16,918 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-16 23:50:16,918 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 0d9ade19-93e2-494b-8d9b-094f41ae54b2 at port 39461
2019-06-16 23:50:16,953 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: start RPC server
2019-06-16 23:50:16,954 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: GrpcService started, listening on 0.0.0.0/0.0.0.0:39461
2019-06-16 23:50:16,965 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: addNew group-24DA94594448:[0d9ade19-93e2-494b-8d9b-094f41ae54b2:127.0.0.1:39461] returns group-24DA94594448:java.util.concurrent.CompletableFuture@167543fd[Not completed]
2019-06-16 23:50:16,966 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: new RaftServerImpl for group-24DA94594448:[0d9ade19-93e2-494b-8d9b-094f41ae54b2:127.0.0.1:39461] with ContainerStateMachine:uninitialized
2019-06-16 23:50:16,966 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-16 23:50:16,966 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-16 23:50:16,967 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-16 23:50:16,967 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-16 23:50:16,967 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2:group-24DA94594448 ConfigurationManager, init=-1: [0d9ade19-93e2-494b-8d9b-094f41ae54b2:127.0.0.1:39461], old=null, confs=<EMPTY_MAP>
2019-06-16 23:50:16,967 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45abe210-92fc-4409-b197-909d93116318/ratis] (custom)
2019-06-16 23:50:16,967 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45abe210-92fc-4409-b197-909d93116318/ratis/44742058-96e4-41c2-9ebf-24da94594448 does not exist. Creating ...
2019-06-16 23:50:16,970 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45abe210-92fc-4409-b197-909d93116318/ratis/44742058-96e4-41c2-9ebf-24da94594448/in_use.lock acquired by nodename 4301@ozone-unit-076618677d39x4h9-3035865345
2019-06-16 23:50:16,972 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45abe210-92fc-4409-b197-909d93116318/ratis/44742058-96e4-41c2-9ebf-24da94594448 has been successfully formatted.
2019-06-16 23:50:16,972 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-16 23:50:16,972 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-16 23:50:16,972 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-16 23:50:16,972 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 23:50:16,973 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 23:50:16,973 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-16 23:50:16,973 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 0d9ade19-93e2-494b-8d9b-094f41ae54b2-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45abe210-92fc-4409-b197-909d93116318/ratis/44742058-96e4-41c2-9ebf-24da94594448
2019-06-16 23:50:16,973 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-16 23:50:16,973 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-16 23:50:16,973 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 23:50:16,973 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-16 23:50:16,974 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-16 23:50:16,974 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-16 23:50:16,974 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-16 23:50:16,974 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-16 23:50:16,974 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-16 23:50:16,974 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-16 23:50:16,977 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-16 23:50:16,977 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-16 23:50:16,977 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-16 23:50:16,977 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: start group-24DA94594448
2019-06-16 23:50:16,978 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2:group-24DA94594448 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-16 23:50:16,978 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: start FollowerState
2019-06-16 23:50:16,978 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-24DA94594448,id=0d9ade19-93e2-494b-8d9b-094f41ae54b2
2019-06-16 23:50:18,022 INFO  impl.FollowerState (FollowerState.java:run(101)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2:group-24DA94594448 changes to CANDIDATE, lastRpcTime:1044, electionTimeout:1044ms
2019-06-16 23:50:18,022 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: shutdown FollowerState
2019-06-16 23:50:18,022 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2:group-24DA94594448 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-16 23:50:18,023 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: start LeaderElection
2019-06-16 23:50:18,026 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2:group-24DA94594448:LeaderElection2: begin an election at term 1 for -1: [0d9ade19-93e2-494b-8d9b-094f41ae54b2:127.0.0.1:39461], old=null
2019-06-16 23:50:18,026 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: shutdown LeaderElection
2019-06-16 23:50:18,026 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2:group-24DA94594448 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-16 23:50:18,026 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2:group-24DA94594448 change Leader from null to 0d9ade19-93e2-494b-8d9b-094f41ae54b2 at term 1 for becomeLeader, leader elected after 1053ms
2019-06-16 23:50:18,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-16 23:50:18,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-16 23:50:18,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-16 23:50:18,027 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-16 23:50:18,027 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: start LeaderState
2019-06-16 23:50:18,027 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2-RaftLogWorker: Starting segment from index:0
2019-06-16 23:50:18,027 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2:group-24DA94594448 set configuration 0: [0d9ade19-93e2-494b-8d9b-094f41ae54b2:127.0.0.1:39461], old=null at 0
2019-06-16 23:50:18,062 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45abe210-92fc-4409-b197-909d93116318/ratis/44742058-96e4-41c2-9ebf-24da94594448/current/log_inprogress_0
2019-06-16 23:50:19,011 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-16 23:50:19,012 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: close
2019-06-16 23:50:19,012 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: shutdown group-24DA94594448
2019-06-16 23:50:19,012 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-24DA94594448,id=0d9ade19-93e2-494b-8d9b-094f41ae54b2
2019-06-16 23:50:19,013 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: shutdown LeaderState
2019-06-16 23:50:19,013 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2-PendingRequests: sendNotLeaderResponses
2019-06-16 23:50:19,014 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-0d9ade19-93e2-494b-8d9b-094f41ae54b2-group-24DA94594448: set stopIndex = 2
2019-06-16 23:50:19,014 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-16 23:50:19,014 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45abe210-92fc-4409-b197-909d93116318/ratis/44742058-96e4-41c2-9ebf-24da94594448/sm/snapshot.1_2
2019-06-16 23:50:19,014 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2:group-24DA94594448 closes. The last applied log index is 2
2019-06-16 23:50:19,015 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-16 23:50:19,015 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2-RaftLogWorker close()
2019-06-16 23:50:19,016 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: shutdown server with port 39461 now
2019-06-16 23:50:19,017 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 0d9ade19-93e2-494b-8d9b-094f41ae54b2: shutdown server with port 39461 successfully
2019-06-16 23:50:19,023 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-16 23:50:19,054 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere0fca4ba-d36a-4ebd-832f-6a54c3cd063a/hdds of  storage type : DISK and capacity : 104021790720
2019-06-16 23:50:19,055 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere0fca4ba-d36a-4ebd-832f-6a54c3cd063a/hdds to VolumeSet
2019-06-16 23:50:19,055 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@26a2f7f9
2019-06-16 23:50:19,055 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@26a2f7f9
2019-06-16 23:50:19,068 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 35853
2019-06-16 23:50:19,069 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-16 23:50:19,070 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-16 23:50:19,070 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 35853 (custom)
2019-06-16 23:50:19,070 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-16 23:50:19,070 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 23:50:19,071 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-16 23:50:19,071 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-16 23:50:19,071 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere0fca4ba-d36a-4ebd-832f-6a54c3cd063a/ratis] (custom)
2019-06-16 23:50:19,071 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 43049
2019-06-16 23:50:19,072 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-16 23:50:19,072 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-16 23:50:19,072 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis a87a30eb-6b57-42f3-951d-dffcf308d0fb at port 35853
2019-06-16 23:50:19,077 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: start RPC server
2019-06-16 23:50:19,078 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: GrpcService started, listening on 0.0.0.0/0.0.0.0:35853
2019-06-16 23:50:19,090 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: addNew group-6EE32AEF9A64:[a87a30eb-6b57-42f3-951d-dffcf308d0fb:127.0.0.1:35853] returns group-6EE32AEF9A64:java.util.concurrent.CompletableFuture@271d345b[Not completed]
2019-06-16 23:50:19,090 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: new RaftServerImpl for group-6EE32AEF9A64:[a87a30eb-6b57-42f3-951d-dffcf308d0fb:127.0.0.1:35853] with ContainerStateMachine:uninitialized
2019-06-16 23:50:19,092 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-16 23:50:19,092 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-16 23:50:19,092 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-16 23:50:19,092 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-16 23:50:19,092 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb:group-6EE32AEF9A64 ConfigurationManager, init=-1: [a87a30eb-6b57-42f3-951d-dffcf308d0fb:127.0.0.1:35853], old=null, confs=<EMPTY_MAP>
2019-06-16 23:50:19,092 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere0fca4ba-d36a-4ebd-832f-6a54c3cd063a/ratis] (custom)
2019-06-16 23:50:19,093 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere0fca4ba-d36a-4ebd-832f-6a54c3cd063a/ratis/93d87e95-dca1-4688-92f1-6ee32aef9a64 does not exist. Creating ...
2019-06-16 23:50:19,095 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere0fca4ba-d36a-4ebd-832f-6a54c3cd063a/ratis/93d87e95-dca1-4688-92f1-6ee32aef9a64/in_use.lock acquired by nodename 4301@ozone-unit-076618677d39x4h9-3035865345
2019-06-16 23:50:19,097 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere0fca4ba-d36a-4ebd-832f-6a54c3cd063a/ratis/93d87e95-dca1-4688-92f1-6ee32aef9a64 has been successfully formatted.
2019-06-16 23:50:19,097 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-16 23:50:19,098 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-16 23:50:19,098 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-16 23:50:19,098 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 23:50:19,098 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 23:50:19,098 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-16 23:50:19,098 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new a87a30eb-6b57-42f3-951d-dffcf308d0fb-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere0fca4ba-d36a-4ebd-832f-6a54c3cd063a/ratis/93d87e95-dca1-4688-92f1-6ee32aef9a64
2019-06-16 23:50:19,098 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-16 23:50:19,098 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-16 23:50:19,098 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 23:50:19,098 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-16 23:50:19,099 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-16 23:50:19,099 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-16 23:50:19,099 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-16 23:50:19,099 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-16 23:50:19,099 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-16 23:50:19,099 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-16 23:50:19,099 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-16 23:50:19,100 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-16 23:50:19,100 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-16 23:50:19,100 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: start group-6EE32AEF9A64
2019-06-16 23:50:19,100 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb:group-6EE32AEF9A64 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-16 23:50:19,100 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: start FollowerState
2019-06-16 23:50:19,100 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-6EE32AEF9A64,id=a87a30eb-6b57-42f3-951d-dffcf308d0fb
2019-06-16 23:50:20,237 INFO  impl.FollowerState (FollowerState.java:run(101)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb:group-6EE32AEF9A64 changes to CANDIDATE, lastRpcTime:1137, electionTimeout:1137ms
2019-06-16 23:50:20,237 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: shutdown FollowerState
2019-06-16 23:50:20,238 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb:group-6EE32AEF9A64 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-16 23:50:20,238 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: start LeaderElection
2019-06-16 23:50:20,241 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb:group-6EE32AEF9A64:LeaderElection3: begin an election at term 1 for -1: [a87a30eb-6b57-42f3-951d-dffcf308d0fb:127.0.0.1:35853], old=null
2019-06-16 23:50:20,241 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: shutdown LeaderElection
2019-06-16 23:50:20,241 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb:group-6EE32AEF9A64 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-16 23:50:20,241 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb:group-6EE32AEF9A64 change Leader from null to a87a30eb-6b57-42f3-951d-dffcf308d0fb at term 1 for becomeLeader, leader elected after 1143ms
2019-06-16 23:50:20,241 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-16 23:50:20,241 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-16 23:50:20,242 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-16 23:50:20,242 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-16 23:50:20,242 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: start LeaderState
2019-06-16 23:50:20,242 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb-RaftLogWorker: Starting segment from index:0
2019-06-16 23:50:20,247 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb:group-6EE32AEF9A64 set configuration 0: [a87a30eb-6b57-42f3-951d-dffcf308d0fb:127.0.0.1:35853], old=null at 0
2019-06-16 23:50:20,277 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere0fca4ba-d36a-4ebd-832f-6a54c3cd063a/ratis/93d87e95-dca1-4688-92f1-6ee32aef9a64/current/log_inprogress_0
2019-06-16 23:50:21,145 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 4711335762090583374 is closed with bcsId 0.
2019-06-16 23:50:21,146 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-16 23:50:21,146 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: close
2019-06-16 23:50:21,147 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: shutdown group-6EE32AEF9A64
2019-06-16 23:50:21,147 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-6EE32AEF9A64,id=a87a30eb-6b57-42f3-951d-dffcf308d0fb
2019-06-16 23:50:21,147 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: shutdown LeaderState
2019-06-16 23:50:21,147 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb-PendingRequests: sendNotLeaderResponses
2019-06-16 23:50:21,148 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-a87a30eb-6b57-42f3-951d-dffcf308d0fb-group-6EE32AEF9A64: set stopIndex = 2
2019-06-16 23:50:21,148 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-16 23:50:21,148 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlere0fca4ba-d36a-4ebd-832f-6a54c3cd063a/ratis/93d87e95-dca1-4688-92f1-6ee32aef9a64/sm/snapshot.1_2
2019-06-16 23:50:21,149 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb:group-6EE32AEF9A64 closes. The last applied log index is 2
2019-06-16 23:50:21,149 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-16 23:50:21,150 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb-RaftLogWorker close()
2019-06-16 23:50:21,151 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: shutdown server with port 35853 now
2019-06-16 23:50:21,152 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - a87a30eb-6b57-42f3-951d-dffcf308d0fb: shutdown server with port 35853 successfully
2019-06-16 23:50:21,155 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-16 23:50:21,186 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9244b54d-1699-47e0-ac64-4474a257474c/hdds of  storage type : DISK and capacity : 104021790720
2019-06-16 23:50:21,186 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9244b54d-1699-47e0-ac64-4474a257474c/hdds to VolumeSet
2019-06-16 23:50:21,187 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@66153688
2019-06-16 23:50:21,190 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@66153688
2019-06-16 23:50:21,199 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 45305
2019-06-16 23:50:21,199 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-16 23:50:21,200 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-16 23:50:21,200 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 45305 (custom)
2019-06-16 23:50:21,200 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-16 23:50:21,200 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 23:50:21,200 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-16 23:50:21,201 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-16 23:50:21,201 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9244b54d-1699-47e0-ac64-4474a257474c/ratis] (custom)
2019-06-16 23:50:21,201 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 44931
2019-06-16 23:50:21,202 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-16 23:50:21,202 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-16 23:50:21,202 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3 at port 45305
2019-06-16 23:50:21,216 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: start RPC server
2019-06-16 23:50:21,217 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: GrpcService started, listening on 0.0.0.0/0.0.0.0:45305
Jun 16, 2019 11:50:21 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:39461} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 16, 2019 11:50:21 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:35853} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-16 23:50:21,231 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: addNew group-7043E1F63A4B:[dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:127.0.0.1:45305] returns group-7043E1F63A4B:java.util.concurrent.CompletableFuture@5706a190[Not completed]
2019-06-16 23:50:21,232 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: new RaftServerImpl for group-7043E1F63A4B:[dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:127.0.0.1:45305] with ContainerStateMachine:uninitialized
2019-06-16 23:50:21,232 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-16 23:50:21,232 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-16 23:50:21,232 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-16 23:50:21,232 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-16 23:50:21,232 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:group-7043E1F63A4B ConfigurationManager, init=-1: [dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:127.0.0.1:45305], old=null, confs=<EMPTY_MAP>
2019-06-16 23:50:21,233 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9244b54d-1699-47e0-ac64-4474a257474c/ratis] (custom)
2019-06-16 23:50:21,233 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9244b54d-1699-47e0-ac64-4474a257474c/ratis/615f485e-9fdb-48b3-92b3-7043e1f63a4b does not exist. Creating ...
2019-06-16 23:50:21,235 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9244b54d-1699-47e0-ac64-4474a257474c/ratis/615f485e-9fdb-48b3-92b3-7043e1f63a4b/in_use.lock acquired by nodename 4301@ozone-unit-076618677d39x4h9-3035865345
2019-06-16 23:50:21,238 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9244b54d-1699-47e0-ac64-4474a257474c/ratis/615f485e-9fdb-48b3-92b3-7043e1f63a4b has been successfully formatted.
2019-06-16 23:50:21,238 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-16 23:50:21,238 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-16 23:50:21,238 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-16 23:50:21,238 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 23:50:21,238 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 23:50:21,238 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-16 23:50:21,238 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9244b54d-1699-47e0-ac64-4474a257474c/ratis/615f485e-9fdb-48b3-92b3-7043e1f63a4b
2019-06-16 23:50:21,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-16 23:50:21,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-16 23:50:21,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 23:50:21,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-16 23:50:21,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-16 23:50:21,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-16 23:50:21,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-16 23:50:21,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-16 23:50:21,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-16 23:50:21,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-16 23:50:21,240 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-16 23:50:21,240 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-16 23:50:21,240 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-16 23:50:21,240 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: start group-7043E1F63A4B
2019-06-16 23:50:21,240 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:group-7043E1F63A4B changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-16 23:50:21,240 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: start FollowerState
2019-06-16 23:50:21,241 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-7043E1F63A4B,id=dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3
2019-06-16 23:50:22,374 INFO  impl.FollowerState (FollowerState.java:run(101)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:group-7043E1F63A4B changes to CANDIDATE, lastRpcTime:1133, electionTimeout:1133ms
2019-06-16 23:50:22,374 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: shutdown FollowerState
2019-06-16 23:50:22,374 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:group-7043E1F63A4B changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-16 23:50:22,374 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: start LeaderElection
2019-06-16 23:50:22,377 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:group-7043E1F63A4B:LeaderElection4: begin an election at term 1 for -1: [dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:127.0.0.1:45305], old=null
2019-06-16 23:50:22,377 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: shutdown LeaderElection
2019-06-16 23:50:22,377 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:group-7043E1F63A4B changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-16 23:50:22,377 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:group-7043E1F63A4B change Leader from null to dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3 at term 1 for becomeLeader, leader elected after 1139ms
2019-06-16 23:50:22,377 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-16 23:50:22,378 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-16 23:50:22,378 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-16 23:50:22,378 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-16 23:50:22,378 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: start LeaderState
2019-06-16 23:50:22,378 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3-RaftLogWorker: Starting segment from index:0
2019-06-16 23:50:22,383 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:group-7043E1F63A4B set configuration 0: [dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:127.0.0.1:45305], old=null at 0
2019-06-16 23:50:22,413 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9244b54d-1699-47e0-ac64-4474a257474c/ratis/615f485e-9fdb-48b3-92b3-7043e1f63a4b/current/log_inprogress_0
2019-06-16 23:50:23,280 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 5223853318716862622 is closed with bcsId 0.
2019-06-16 23:50:23,281 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-16 23:50:23,281 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: close
2019-06-16 23:50:23,281 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: shutdown group-7043E1F63A4B
2019-06-16 23:50:23,281 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-7043E1F63A4B,id=dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3
2019-06-16 23:50:23,282 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: shutdown LeaderState
2019-06-16 23:50:23,282 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3-PendingRequests: sendNotLeaderResponses
2019-06-16 23:50:23,283 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3-group-7043E1F63A4B: set stopIndex = 2
2019-06-16 23:50:23,283 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-16 23:50:23,283 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler9244b54d-1699-47e0-ac64-4474a257474c/ratis/615f485e-9fdb-48b3-92b3-7043e1f63a4b/sm/snapshot.1_2
2019-06-16 23:50:23,284 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3:group-7043E1F63A4B closes. The last applied log index is 2
2019-06-16 23:50:23,284 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-16 23:50:23,284 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3-RaftLogWorker close()
2019-06-16 23:50:23,285 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: shutdown server with port 45305 now
2019-06-16 23:50:23,286 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - dbb2a9ad-fbb8-45a8-ad76-063b6e8b87e3: shutdown server with port 45305 successfully
2019-06-16 23:50:23,291 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-16 23:50:23,313 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler640f9ce1-d0a5-4527-b89b-7b86e81a4d74/hdds of  storage type : DISK and capacity : 104021790720
2019-06-16 23:50:23,313 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler640f9ce1-d0a5-4527-b89b-7b86e81a4d74/hdds to VolumeSet
2019-06-16 23:50:23,313 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@68217d41
2019-06-16 23:50:23,313 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@68217d41
2019-06-16 23:50:23,325 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 44509
2019-06-16 23:50:23,326 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-16 23:50:23,326 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-16 23:50:23,327 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 44509 (custom)
2019-06-16 23:50:23,327 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-16 23:50:23,327 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 23:50:23,327 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-16 23:50:23,327 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-16 23:50:23,328 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler640f9ce1-d0a5-4527-b89b-7b86e81a4d74/ratis] (custom)
2019-06-16 23:50:23,328 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 40639
2019-06-16 23:50:23,329 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-16 23:50:23,329 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-16 23:50:23,329 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis b8e768e5-23dd-4352-a724-bee7fea3543a at port 44509
2019-06-16 23:50:23,337 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - b8e768e5-23dd-4352-a724-bee7fea3543a: start RPC server
2019-06-16 23:50:23,338 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - b8e768e5-23dd-4352-a724-bee7fea3543a: GrpcService started, listening on 0.0.0.0/0.0.0.0:44509
2019-06-16 23:50:23,348 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - b8e768e5-23dd-4352-a724-bee7fea3543a: addNew group-B54E34C2F778:[b8e768e5-23dd-4352-a724-bee7fea3543a:127.0.0.1:44509] returns group-B54E34C2F778:java.util.concurrent.CompletableFuture@42a52807[Not completed]
2019-06-16 23:50:23,348 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - b8e768e5-23dd-4352-a724-bee7fea3543a: new RaftServerImpl for group-B54E34C2F778:[b8e768e5-23dd-4352-a724-bee7fea3543a:127.0.0.1:44509] with ContainerStateMachine:uninitialized
2019-06-16 23:50:23,349 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-16 23:50:23,350 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-16 23:50:23,350 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-16 23:50:23,350 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-16 23:50:23,350 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - b8e768e5-23dd-4352-a724-bee7fea3543a:group-B54E34C2F778 ConfigurationManager, init=-1: [b8e768e5-23dd-4352-a724-bee7fea3543a:127.0.0.1:44509], old=null, confs=<EMPTY_MAP>
2019-06-16 23:50:23,350 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler640f9ce1-d0a5-4527-b89b-7b86e81a4d74/ratis] (custom)
2019-06-16 23:50:23,350 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler640f9ce1-d0a5-4527-b89b-7b86e81a4d74/ratis/49a76e66-8cbe-4a9a-9fc6-b54e34c2f778 does not exist. Creating ...
2019-06-16 23:50:23,353 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler640f9ce1-d0a5-4527-b89b-7b86e81a4d74/ratis/49a76e66-8cbe-4a9a-9fc6-b54e34c2f778/in_use.lock acquired by nodename 4301@ozone-unit-076618677d39x4h9-3035865345
2019-06-16 23:50:23,355 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler640f9ce1-d0a5-4527-b89b-7b86e81a4d74/ratis/49a76e66-8cbe-4a9a-9fc6-b54e34c2f778 has been successfully formatted.
2019-06-16 23:50:23,355 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-16 23:50:23,356 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-16 23:50:23,356 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-16 23:50:23,356 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-16 23:50:23,356 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 23:50:23,356 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-16 23:50:23,356 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new b8e768e5-23dd-4352-a724-bee7fea3543a-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler640f9ce1-d0a5-4527-b89b-7b86e81a4d74/ratis/49a76e66-8cbe-4a9a-9fc6-b54e34c2f778
2019-06-16 23:50:23,356 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-16 23:50:23,356 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-16 23:50:23,356 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-16 23:50:23,357 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-16 23:50:23,357 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-16 23:50:23,357 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-16 23:50:23,357 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-16 23:50:23,357 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-16 23:50:23,357 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-16 23:50:23,357 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-16 23:50:23,357 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-16 23:50:23,358 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-16 23:50:23,358 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-16 23:50:23,358 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - b8e768e5-23dd-4352-a724-bee7fea3543a: start group-B54E34C2F778
2019-06-16 23:50:23,358 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - b8e768e5-23dd-4352-a724-bee7fea3543a:group-B54E34C2F778 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-16 23:50:23,358 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - b8e768e5-23dd-4352-a724-bee7fea3543a: start FollowerState
2019-06-16 23:50:23,358 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B54E34C2F778,id=b8e768e5-23dd-4352-a724-bee7fea3543a
2019-06-16 23:50:24,401 INFO  impl.FollowerState (FollowerState.java:run(101)) - b8e768e5-23dd-4352-a724-bee7fea3543a:group-B54E34C2F778 changes to CANDIDATE, lastRpcTime:1043, electionTimeout:1043ms
2019-06-16 23:50:24,402 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - b8e768e5-23dd-4352-a724-bee7fea3543a: shutdown FollowerState
2019-06-16 23:50:24,402 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - b8e768e5-23dd-4352-a724-bee7fea3543a:group-B54E34C2F778 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-16 23:50:24,402 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - b8e768e5-23dd-4352-a724-bee7fea3543a: start LeaderElection
2019-06-16 23:50:24,405 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - b8e768e5-23dd-4352-a724-bee7fea3543a:group-B54E34C2F778:LeaderElection5: begin an election at term 1 for -1: [b8e768e5-23dd-4352-a724-bee7fea3543a:127.0.0.1:44509], old=null
2019-06-16 23:50:24,405 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - b8e768e5-23dd-4352-a724-bee7fea3543a: shutdown LeaderElection
2019-06-16 23:50:24,406 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - b8e768e5-23dd-4352-a724-bee7fea3543a:group-B54E34C2F778 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-16 23:50:24,406 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - b8e768e5-23dd-4352-a724-bee7fea3543a:group-B54E34C2F778 change Leader from null to b8e768e5-23dd-4352-a724-bee7fea3543a at term 1 for becomeLeader, leader elected after 1050ms
2019-06-16 23:50:24,406 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-16 23:50:24,406 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-16 23:50:24,406 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-16 23:50:24,406 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-16 23:50:24,406 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - b8e768e5-23dd-4352-a724-bee7fea3543a: start LeaderState
2019-06-16 23:50:24,407 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - b8e768e5-23dd-4352-a724-bee7fea3543a-RaftLogWorker: Starting segment from index:0
2019-06-16 23:50:24,409 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - b8e768e5-23dd-4352-a724-bee7fea3543a:group-B54E34C2F778 set configuration 0: [b8e768e5-23dd-4352-a724-bee7fea3543a:127.0.0.1:44509], old=null at 0
2019-06-16 23:50:24,442 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - b8e768e5-23dd-4352-a724-bee7fea3543a-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler640f9ce1-d0a5-4527-b89b-7b86e81a4d74/ratis/49a76e66-8cbe-4a9a-9fc6-b54e34c2f778/current/log_inprogress_0
2019-06-16 23:50:25,397 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 1485766949431699919 is closed with bcsId 0.
2019-06-16 23:50:25,397 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-16 23:50:25,397 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - b8e768e5-23dd-4352-a724-bee7fea3543a: close
2019-06-16 23:50:25,398 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - b8e768e5-23dd-4352-a724-bee7fea3543a: shutdown group-B54E34C2F778
2019-06-16 23:50:25,398 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B54E34C2F778,id=b8e768e5-23dd-4352-a724-bee7fea3543a
2019-06-16 23:50:25,398 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - b8e768e5-23dd-4352-a724-bee7fea3543a: shutdown LeaderState
2019-06-16 23:50:25,398 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - b8e768e5-23dd-4352-a724-bee7fea3543a-PendingRequests: sendNotLeaderResponses
2019-06-16 23:50:25,399 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-b8e768e5-23dd-4352-a724-bee7fea3543a-group-B54E34C2F778: set stopIndex = 4
2019-06-16 23:50:25,399 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-16 23:50:25,399 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler640f9ce1-d0a5-4527-b89b-7b86e81a4d74/ratis/49a76e66-8cbe-4a9a-9fc6-b54e34c2f778/sm/snapshot.1_4
2019-06-16 23:50:25,400 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - b8e768e5-23dd-4352-a724-bee7fea3543a:group-B54E34C2F778 closes. The last applied log index is 4
2019-06-16 23:50:25,400 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - b8e768e5-23dd-4352-a724-bee7fea3543a-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-16 23:50:25,401 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - b8e768e5-23dd-4352-a724-bee7fea3543a-RaftLogWorker close()
2019-06-16 23:50:25,401 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - b8e768e5-23dd-4352-a724-bee7fea3543a: shutdown server with port 44509 now
2019-06-16 23:50:25,402 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - b8e768e5-23dd-4352-a724-bee7fea3543a: shutdown server with port 44509 successfully
2019-06-16 23:50:25,403 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
