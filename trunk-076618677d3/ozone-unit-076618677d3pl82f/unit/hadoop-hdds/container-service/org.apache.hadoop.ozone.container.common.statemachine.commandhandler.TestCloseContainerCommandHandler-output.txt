2019-06-17 14:01:58,212 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler68805c9a-9e76-4f75-a458-95c05e8f2bb0/hdds of  storage type : DISK and capacity : 104021790720
2019-06-17 14:01:58,216 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler68805c9a-9e76-4f75-a458-95c05e8f2bb0/hdds to VolumeSet
2019-06-17 14:01:58,227 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
2019-06-17 14:01:58,276 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-06-17 14:01:58,681 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 34567
2019-06-17 14:01:59,203 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-17 14:01:59,231 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-17 14:01:59,243 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 34567 (custom)
2019-06-17 14:01:59,244 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-17 14:01:59,247 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 14:01:59,248 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-17 14:01:59,249 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-17 14:01:59,395 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler68805c9a-9e76-4f75-a458-95c05e8f2bb0/ratis] (custom)
2019-06-17 14:01:59,406 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 33209
2019-06-17 14:01:59,426 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-17 14:01:59,426 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-17 14:01:59,428 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis a695fc2e-ce2b-455c-b401-f1303e508083 at port 34567
2019-06-17 14:01:59,466 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - a695fc2e-ce2b-455c-b401-f1303e508083: start RPC server
2019-06-17 14:01:59,604 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - a695fc2e-ce2b-455c-b401-f1303e508083: GrpcService started, listening on 0.0.0.0/0.0.0.0:34567
2019-06-17 14:01:59,939 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - a695fc2e-ce2b-455c-b401-f1303e508083: addNew group-3ED83BE63FB9:[a695fc2e-ce2b-455c-b401-f1303e508083:127.0.0.1:34567] returns group-3ED83BE63FB9:java.util.concurrent.CompletableFuture@5cec4b89[Not completed]
2019-06-17 14:01:59,975 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - a695fc2e-ce2b-455c-b401-f1303e508083: new RaftServerImpl for group-3ED83BE63FB9:[a695fc2e-ce2b-455c-b401-f1303e508083:127.0.0.1:34567] with ContainerStateMachine:uninitialized
2019-06-17 14:01:59,976 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-17 14:01:59,976 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-17 14:01:59,976 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-17 14:01:59,977 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-17 14:01:59,981 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - a695fc2e-ce2b-455c-b401-f1303e508083:group-3ED83BE63FB9 ConfigurationManager, init=-1: [a695fc2e-ce2b-455c-b401-f1303e508083:127.0.0.1:34567], old=null, confs=<EMPTY_MAP>
2019-06-17 14:01:59,982 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler68805c9a-9e76-4f75-a458-95c05e8f2bb0/ratis] (custom)
2019-06-17 14:01:59,988 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler68805c9a-9e76-4f75-a458-95c05e8f2bb0/ratis/718cf9ea-d3e2-430b-84fc-3ed83be63fb9 does not exist. Creating ...
2019-06-17 14:01:59,997 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler68805c9a-9e76-4f75-a458-95c05e8f2bb0/ratis/718cf9ea-d3e2-430b-84fc-3ed83be63fb9/in_use.lock acquired by nodename 4310@ozone-unit-076618677d3pl82f-1825396653
2019-06-17 14:02:00,005 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler68805c9a-9e76-4f75-a458-95c05e8f2bb0/ratis/718cf9ea-d3e2-430b-84fc-3ed83be63fb9 has been successfully formatted.
2019-06-17 14:02:00,006 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-17 14:02:00,007 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-17 14:02:00,009 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-17 14:02:00,010 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 14:02:00,013 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 14:02:00,016 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-17 14:02:00,018 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new a695fc2e-ce2b-455c-b401-f1303e508083-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler68805c9a-9e76-4f75-a458-95c05e8f2bb0/ratis/718cf9ea-d3e2-430b-84fc-3ed83be63fb9
2019-06-17 14:02:00,019 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-17 14:02:00,019 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-17 14:02:00,021 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 14:02:00,021 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-17 14:02:00,022 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-17 14:02:00,022 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-17 14:02:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-17 14:02:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-17 14:02:00,024 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-17 14:02:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-17 14:02:00,030 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-17 14:02:00,031 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-17 14:02:00,031 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-17 14:02:00,146 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - a695fc2e-ce2b-455c-b401-f1303e508083: start group-3ED83BE63FB9
2019-06-17 14:02:00,147 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a695fc2e-ce2b-455c-b401-f1303e508083:group-3ED83BE63FB9 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-17 14:02:00,148 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a695fc2e-ce2b-455c-b401-f1303e508083: start FollowerState
2019-06-17 14:02:00,149 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3ED83BE63FB9,id=a695fc2e-ce2b-455c-b401-f1303e508083
2019-06-17 14:02:01,251 INFO  impl.FollowerState (FollowerState.java:run(101)) - a695fc2e-ce2b-455c-b401-f1303e508083:group-3ED83BE63FB9 changes to CANDIDATE, lastRpcTime:1103, electionTimeout:1103ms
2019-06-17 14:02:01,251 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - a695fc2e-ce2b-455c-b401-f1303e508083: shutdown FollowerState
2019-06-17 14:02:01,252 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a695fc2e-ce2b-455c-b401-f1303e508083:group-3ED83BE63FB9 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-17 14:02:01,254 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a695fc2e-ce2b-455c-b401-f1303e508083: start LeaderElection
2019-06-17 14:02:01,257 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - a695fc2e-ce2b-455c-b401-f1303e508083:group-3ED83BE63FB9:LeaderElection1: begin an election at term 1 for -1: [a695fc2e-ce2b-455c-b401-f1303e508083:127.0.0.1:34567], old=null
2019-06-17 14:02:01,258 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - a695fc2e-ce2b-455c-b401-f1303e508083: shutdown LeaderElection
2019-06-17 14:02:01,258 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - a695fc2e-ce2b-455c-b401-f1303e508083:group-3ED83BE63FB9 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-17 14:02:01,258 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - a695fc2e-ce2b-455c-b401-f1303e508083:group-3ED83BE63FB9 change Leader from null to a695fc2e-ce2b-455c-b401-f1303e508083 at term 1 for becomeLeader, leader elected after 1251ms
2019-06-17 14:02:01,262 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-17 14:02:01,262 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-17 14:02:01,265 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-17 14:02:01,265 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-17 14:02:01,275 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - a695fc2e-ce2b-455c-b401-f1303e508083: start LeaderState
2019-06-17 14:02:01,292 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - a695fc2e-ce2b-455c-b401-f1303e508083-RaftLogWorker: Starting segment from index:0
2019-06-17 14:02:01,301 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - a695fc2e-ce2b-455c-b401-f1303e508083:group-3ED83BE63FB9 set configuration 0: [a695fc2e-ce2b-455c-b401-f1303e508083:127.0.0.1:34567], old=null at 0
2019-06-17 14:02:01,478 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - a695fc2e-ce2b-455c-b401-f1303e508083-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler68805c9a-9e76-4f75-a458-95c05e8f2bb0/ratis/718cf9ea-d3e2-430b-84fc-3ed83be63fb9/current/log_inprogress_0
2019-06-17 14:02:02,403 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-06-17 14:02:02,471 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 4873074715342766874 is closed with bcsId 0.
2019-06-17 14:02:02,472 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-17 14:02:02,473 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - a695fc2e-ce2b-455c-b401-f1303e508083: close
2019-06-17 14:02:02,474 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - a695fc2e-ce2b-455c-b401-f1303e508083: shutdown group-3ED83BE63FB9
2019-06-17 14:02:02,475 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-3ED83BE63FB9,id=a695fc2e-ce2b-455c-b401-f1303e508083
2019-06-17 14:02:02,475 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - a695fc2e-ce2b-455c-b401-f1303e508083: shutdown LeaderState
2019-06-17 14:02:02,476 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - a695fc2e-ce2b-455c-b401-f1303e508083-PendingRequests: sendNotLeaderResponses
2019-06-17 14:02:02,479 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-a695fc2e-ce2b-455c-b401-f1303e508083-group-3ED83BE63FB9: set stopIndex = 4
2019-06-17 14:02:02,479 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-17 14:02:02,479 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler68805c9a-9e76-4f75-a458-95c05e8f2bb0/ratis/718cf9ea-d3e2-430b-84fc-3ed83be63fb9/sm/snapshot.1_4
2019-06-17 14:02:02,485 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - a695fc2e-ce2b-455c-b401-f1303e508083:group-3ED83BE63FB9 closes. The last applied log index is 4
2019-06-17 14:02:02,486 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - a695fc2e-ce2b-455c-b401-f1303e508083-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-17 14:02:02,487 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - a695fc2e-ce2b-455c-b401-f1303e508083-RaftLogWorker close()
2019-06-17 14:02:02,488 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - a695fc2e-ce2b-455c-b401-f1303e508083: shutdown server with port 34567 now
2019-06-17 14:02:02,491 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - a695fc2e-ce2b-455c-b401-f1303e508083: shutdown server with port 34567 successfully
2019-06-17 14:02:02,506 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-17 14:02:02,544 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlereeca3f80-31b6-4e03-a22a-f3454e538930/hdds of  storage type : DISK and capacity : 104021790720
2019-06-17 14:02:02,544 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlereeca3f80-31b6-4e03-a22a-f3454e538930/hdds to VolumeSet
2019-06-17 14:02:02,545 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@655523dd
2019-06-17 14:02:02,545 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@655523dd
2019-06-17 14:02:02,564 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 40523
2019-06-17 14:02:02,565 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-17 14:02:02,565 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-17 14:02:02,566 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 40523 (custom)
2019-06-17 14:02:02,566 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-17 14:02:02,566 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 14:02:02,566 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-17 14:02:02,567 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-17 14:02:02,568 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlereeca3f80-31b6-4e03-a22a-f3454e538930/ratis] (custom)
2019-06-17 14:02:02,568 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 40513
2019-06-17 14:02:02,569 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-17 14:02:02,569 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-17 14:02:02,569 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 02d51a24-555e-4a12-92df-59af8b94b9b8 at port 40523
2019-06-17 14:02:02,589 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: start RPC server
2019-06-17 14:02:02,590 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: GrpcService started, listening on 0.0.0.0/0.0.0.0:40523
2019-06-17 14:02:02,604 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: addNew group-A249FFB3A4CB:[02d51a24-555e-4a12-92df-59af8b94b9b8:127.0.0.1:40523] returns group-A249FFB3A4CB:java.util.concurrent.CompletableFuture@6e29c1b4[Not completed]
2019-06-17 14:02:02,605 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: new RaftServerImpl for group-A249FFB3A4CB:[02d51a24-555e-4a12-92df-59af8b94b9b8:127.0.0.1:40523] with ContainerStateMachine:uninitialized
2019-06-17 14:02:02,605 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-17 14:02:02,605 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-17 14:02:02,606 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-17 14:02:02,606 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-17 14:02:02,606 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 02d51a24-555e-4a12-92df-59af8b94b9b8:group-A249FFB3A4CB ConfigurationManager, init=-1: [02d51a24-555e-4a12-92df-59af8b94b9b8:127.0.0.1:40523], old=null, confs=<EMPTY_MAP>
2019-06-17 14:02:02,606 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlereeca3f80-31b6-4e03-a22a-f3454e538930/ratis] (custom)
2019-06-17 14:02:02,607 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlereeca3f80-31b6-4e03-a22a-f3454e538930/ratis/026f1c8d-8b3d-4ba9-a0f8-a249ffb3a4cb does not exist. Creating ...
2019-06-17 14:02:02,609 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlereeca3f80-31b6-4e03-a22a-f3454e538930/ratis/026f1c8d-8b3d-4ba9-a0f8-a249ffb3a4cb/in_use.lock acquired by nodename 4310@ozone-unit-076618677d3pl82f-1825396653
2019-06-17 14:02:02,612 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlereeca3f80-31b6-4e03-a22a-f3454e538930/ratis/026f1c8d-8b3d-4ba9-a0f8-a249ffb3a4cb has been successfully formatted.
2019-06-17 14:02:02,612 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-17 14:02:02,612 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-17 14:02:02,612 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-17 14:02:02,612 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 14:02:02,613 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 14:02:02,613 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-17 14:02:02,613 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 02d51a24-555e-4a12-92df-59af8b94b9b8-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlereeca3f80-31b6-4e03-a22a-f3454e538930/ratis/026f1c8d-8b3d-4ba9-a0f8-a249ffb3a4cb
2019-06-17 14:02:02,613 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-17 14:02:02,613 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-17 14:02:02,618 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 14:02:02,619 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-17 14:02:02,621 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-17 14:02:02,621 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-17 14:02:02,621 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-17 14:02:02,621 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-17 14:02:02,622 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-17 14:02:02,622 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-17 14:02:02,627 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-17 14:02:02,628 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-17 14:02:02,628 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-17 14:02:02,628 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: start group-A249FFB3A4CB
2019-06-17 14:02:02,628 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 02d51a24-555e-4a12-92df-59af8b94b9b8:group-A249FFB3A4CB changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-17 14:02:02,628 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: start FollowerState
2019-06-17 14:02:02,629 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-A249FFB3A4CB,id=02d51a24-555e-4a12-92df-59af8b94b9b8
2019-06-17 14:02:03,746 INFO  impl.FollowerState (FollowerState.java:run(101)) - 02d51a24-555e-4a12-92df-59af8b94b9b8:group-A249FFB3A4CB changes to CANDIDATE, lastRpcTime:1117, electionTimeout:1117ms
2019-06-17 14:02:03,746 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: shutdown FollowerState
2019-06-17 14:02:03,746 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 02d51a24-555e-4a12-92df-59af8b94b9b8:group-A249FFB3A4CB changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-17 14:02:03,746 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: start LeaderElection
2019-06-17 14:02:03,749 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 02d51a24-555e-4a12-92df-59af8b94b9b8:group-A249FFB3A4CB:LeaderElection2: begin an election at term 1 for -1: [02d51a24-555e-4a12-92df-59af8b94b9b8:127.0.0.1:40523], old=null
2019-06-17 14:02:03,750 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: shutdown LeaderElection
2019-06-17 14:02:03,750 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 02d51a24-555e-4a12-92df-59af8b94b9b8:group-A249FFB3A4CB changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-17 14:02:03,750 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 02d51a24-555e-4a12-92df-59af8b94b9b8:group-A249FFB3A4CB change Leader from null to 02d51a24-555e-4a12-92df-59af8b94b9b8 at term 1 for becomeLeader, leader elected after 1137ms
2019-06-17 14:02:03,750 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-17 14:02:03,750 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-17 14:02:03,750 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-17 14:02:03,750 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-17 14:02:03,751 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: start LeaderState
2019-06-17 14:02:03,751 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 02d51a24-555e-4a12-92df-59af8b94b9b8-RaftLogWorker: Starting segment from index:0
2019-06-17 14:02:03,758 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 02d51a24-555e-4a12-92df-59af8b94b9b8:group-A249FFB3A4CB set configuration 0: [02d51a24-555e-4a12-92df-59af8b94b9b8:127.0.0.1:40523], old=null at 0
2019-06-17 14:02:03,787 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 02d51a24-555e-4a12-92df-59af8b94b9b8-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlereeca3f80-31b6-4e03-a22a-f3454e538930/ratis/026f1c8d-8b3d-4ba9-a0f8-a249ffb3a4cb/current/log_inprogress_0
2019-06-17 14:02:04,663 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-17 14:02:04,664 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: close
2019-06-17 14:02:04,665 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: shutdown group-A249FFB3A4CB
2019-06-17 14:02:04,665 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-A249FFB3A4CB,id=02d51a24-555e-4a12-92df-59af8b94b9b8
2019-06-17 14:02:04,665 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: shutdown LeaderState
2019-06-17 14:02:04,666 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 02d51a24-555e-4a12-92df-59af8b94b9b8-PendingRequests: sendNotLeaderResponses
2019-06-17 14:02:04,667 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-02d51a24-555e-4a12-92df-59af8b94b9b8-group-A249FFB3A4CB: set stopIndex = 2
2019-06-17 14:02:04,667 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-17 14:02:04,669 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlereeca3f80-31b6-4e03-a22a-f3454e538930/ratis/026f1c8d-8b3d-4ba9-a0f8-a249ffb3a4cb/sm/snapshot.1_2
2019-06-17 14:02:04,669 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 02d51a24-555e-4a12-92df-59af8b94b9b8:group-A249FFB3A4CB closes. The last applied log index is 2
2019-06-17 14:02:04,670 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 02d51a24-555e-4a12-92df-59af8b94b9b8-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-17 14:02:04,671 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 02d51a24-555e-4a12-92df-59af8b94b9b8-RaftLogWorker close()
2019-06-17 14:02:04,671 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: shutdown server with port 40523 now
2019-06-17 14:02:04,673 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 02d51a24-555e-4a12-92df-59af8b94b9b8: shutdown server with port 40523 successfully
2019-06-17 14:02:04,683 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-17 14:02:04,714 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler02774da8-b073-45db-bbaf-22c935b10c30/hdds of  storage type : DISK and capacity : 104021790720
2019-06-17 14:02:04,715 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler02774da8-b073-45db-bbaf-22c935b10c30/hdds to VolumeSet
2019-06-17 14:02:04,715 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@dc7b462
2019-06-17 14:02:04,716 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@dc7b462
2019-06-17 14:02:04,729 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 34877
2019-06-17 14:02:04,730 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-17 14:02:04,731 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-17 14:02:04,731 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 34877 (custom)
2019-06-17 14:02:04,731 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-17 14:02:04,732 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 14:02:04,732 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-17 14:02:04,732 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-17 14:02:04,733 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler02774da8-b073-45db-bbaf-22c935b10c30/ratis] (custom)
2019-06-17 14:02:04,733 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 33933
2019-06-17 14:02:04,734 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-17 14:02:04,734 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-17 14:02:04,734 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis ccf34570-e1ae-4c30-ad99-9d5e6331b600 at port 34877
2019-06-17 14:02:04,763 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: start RPC server
2019-06-17 14:02:04,764 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: GrpcService started, listening on 0.0.0.0/0.0.0.0:34877
2019-06-17 14:02:04,781 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: addNew group-A62DD4B8C31A:[ccf34570-e1ae-4c30-ad99-9d5e6331b600:127.0.0.1:34877] returns group-A62DD4B8C31A:java.util.concurrent.CompletableFuture@67d30316[Not completed]
2019-06-17 14:02:04,782 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: new RaftServerImpl for group-A62DD4B8C31A:[ccf34570-e1ae-4c30-ad99-9d5e6331b600:127.0.0.1:34877] with ContainerStateMachine:uninitialized
2019-06-17 14:02:04,783 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-17 14:02:04,783 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-17 14:02:04,783 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-17 14:02:04,783 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-17 14:02:04,783 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600:group-A62DD4B8C31A ConfigurationManager, init=-1: [ccf34570-e1ae-4c30-ad99-9d5e6331b600:127.0.0.1:34877], old=null, confs=<EMPTY_MAP>
2019-06-17 14:02:04,784 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler02774da8-b073-45db-bbaf-22c935b10c30/ratis] (custom)
2019-06-17 14:02:04,784 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler02774da8-b073-45db-bbaf-22c935b10c30/ratis/1ab7d204-8122-4757-8ed6-a62dd4b8c31a does not exist. Creating ...
2019-06-17 14:02:04,787 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler02774da8-b073-45db-bbaf-22c935b10c30/ratis/1ab7d204-8122-4757-8ed6-a62dd4b8c31a/in_use.lock acquired by nodename 4310@ozone-unit-076618677d3pl82f-1825396653
2019-06-17 14:02:04,789 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler02774da8-b073-45db-bbaf-22c935b10c30/ratis/1ab7d204-8122-4757-8ed6-a62dd4b8c31a has been successfully formatted.
2019-06-17 14:02:04,789 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-17 14:02:04,790 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-17 14:02:04,790 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-17 14:02:04,790 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 14:02:04,790 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 14:02:04,790 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-17 14:02:04,790 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new ccf34570-e1ae-4c30-ad99-9d5e6331b600-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler02774da8-b073-45db-bbaf-22c935b10c30/ratis/1ab7d204-8122-4757-8ed6-a62dd4b8c31a
2019-06-17 14:02:04,790 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-17 14:02:04,790 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-17 14:02:04,791 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 14:02:04,791 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-17 14:02:04,791 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-17 14:02:04,791 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-17 14:02:04,791 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-17 14:02:04,791 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-17 14:02:04,792 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-17 14:02:04,792 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-17 14:02:04,793 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-17 14:02:04,794 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-17 14:02:04,794 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-17 14:02:04,794 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: start group-A62DD4B8C31A
2019-06-17 14:02:04,794 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600:group-A62DD4B8C31A changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-17 14:02:04,794 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: start FollowerState
2019-06-17 14:02:04,795 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-A62DD4B8C31A,id=ccf34570-e1ae-4c30-ad99-9d5e6331b600
2019-06-17 14:02:05,819 INFO  impl.FollowerState (FollowerState.java:run(101)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600:group-A62DD4B8C31A changes to CANDIDATE, lastRpcTime:1024, electionTimeout:1024ms
2019-06-17 14:02:05,819 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: shutdown FollowerState
2019-06-17 14:02:05,819 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600:group-A62DD4B8C31A changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-17 14:02:05,819 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: start LeaderElection
2019-06-17 14:02:05,823 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600:group-A62DD4B8C31A:LeaderElection3: begin an election at term 1 for -1: [ccf34570-e1ae-4c30-ad99-9d5e6331b600:127.0.0.1:34877], old=null
2019-06-17 14:02:05,823 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: shutdown LeaderElection
2019-06-17 14:02:05,823 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600:group-A62DD4B8C31A changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-17 14:02:05,823 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600:group-A62DD4B8C31A change Leader from null to ccf34570-e1ae-4c30-ad99-9d5e6331b600 at term 1 for becomeLeader, leader elected after 1033ms
2019-06-17 14:02:05,824 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-17 14:02:05,824 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-17 14:02:05,824 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-17 14:02:05,824 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-17 14:02:05,824 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: start LeaderState
2019-06-17 14:02:05,825 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600-RaftLogWorker: Starting segment from index:0
2019-06-17 14:02:05,825 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600:group-A62DD4B8C31A set configuration 0: [ccf34570-e1ae-4c30-ad99-9d5e6331b600:127.0.0.1:34877], old=null at 0
2019-06-17 14:02:05,864 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler02774da8-b073-45db-bbaf-22c935b10c30/ratis/1ab7d204-8122-4757-8ed6-a62dd4b8c31a/current/log_inprogress_0
2019-06-17 14:02:06,841 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 5487224427141917041 is closed with bcsId 0.
2019-06-17 14:02:06,841 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-17 14:02:06,842 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: close
2019-06-17 14:02:06,843 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: shutdown group-A62DD4B8C31A
2019-06-17 14:02:06,843 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-A62DD4B8C31A,id=ccf34570-e1ae-4c30-ad99-9d5e6331b600
2019-06-17 14:02:06,843 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: shutdown LeaderState
2019-06-17 14:02:06,844 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600-PendingRequests: sendNotLeaderResponses
2019-06-17 14:02:06,845 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-ccf34570-e1ae-4c30-ad99-9d5e6331b600-group-A62DD4B8C31A: set stopIndex = 2
2019-06-17 14:02:06,845 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-17 14:02:06,845 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler02774da8-b073-45db-bbaf-22c935b10c30/ratis/1ab7d204-8122-4757-8ed6-a62dd4b8c31a/sm/snapshot.1_2
2019-06-17 14:02:06,846 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600:group-A62DD4B8C31A closes. The last applied log index is 2
2019-06-17 14:02:06,846 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-17 14:02:06,847 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600-RaftLogWorker close()
2019-06-17 14:02:06,849 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: shutdown server with port 34877 now
2019-06-17 14:02:06,850 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - ccf34570-e1ae-4c30-ad99-9d5e6331b600: shutdown server with port 34877 successfully
2019-06-17 14:02:06,852 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-17 14:02:06,888 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7ef18bb6-9ed4-4581-9bce-397886602e47/hdds of  storage type : DISK and capacity : 104021790720
2019-06-17 14:02:06,888 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7ef18bb6-9ed4-4581-9bce-397886602e47/hdds to VolumeSet
2019-06-17 14:02:06,889 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@3971f0fe
2019-06-17 14:02:06,889 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@3971f0fe
2019-06-17 14:02:06,905 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 33059
2019-06-17 14:02:06,906 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-17 14:02:06,907 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-17 14:02:06,907 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 33059 (custom)
2019-06-17 14:02:06,908 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-17 14:02:06,908 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 14:02:06,908 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-17 14:02:06,908 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-17 14:02:06,909 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7ef18bb6-9ed4-4581-9bce-397886602e47/ratis] (custom)
2019-06-17 14:02:06,909 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 42731
2019-06-17 14:02:06,910 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-17 14:02:06,910 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-17 14:02:06,910 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis ed1a2b4b-9b6e-4304-8795-d054f055d6a5 at port 33059
2019-06-17 14:02:06,941 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: start RPC server
2019-06-17 14:02:06,942 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: GrpcService started, listening on 0.0.0.0/0.0.0.0:33059
Jun 17, 2019 2:02:06 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:40523} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 17, 2019 2:02:06 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:34877} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-17 14:02:06,961 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: addNew group-C38E48B42E52:[ed1a2b4b-9b6e-4304-8795-d054f055d6a5:127.0.0.1:33059] returns group-C38E48B42E52:java.util.concurrent.CompletableFuture@546b011e[Not completed]
2019-06-17 14:02:06,965 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: new RaftServerImpl for group-C38E48B42E52:[ed1a2b4b-9b6e-4304-8795-d054f055d6a5:127.0.0.1:33059] with ContainerStateMachine:uninitialized
2019-06-17 14:02:06,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-17 14:02:06,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-17 14:02:06,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-17 14:02:06,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-17 14:02:06,966 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5:group-C38E48B42E52 ConfigurationManager, init=-1: [ed1a2b4b-9b6e-4304-8795-d054f055d6a5:127.0.0.1:33059], old=null, confs=<EMPTY_MAP>
2019-06-17 14:02:06,966 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7ef18bb6-9ed4-4581-9bce-397886602e47/ratis] (custom)
2019-06-17 14:02:06,966 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7ef18bb6-9ed4-4581-9bce-397886602e47/ratis/fc858e6a-7cb4-466f-b74d-c38e48b42e52 does not exist. Creating ...
2019-06-17 14:02:06,968 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7ef18bb6-9ed4-4581-9bce-397886602e47/ratis/fc858e6a-7cb4-466f-b74d-c38e48b42e52/in_use.lock acquired by nodename 4310@ozone-unit-076618677d3pl82f-1825396653
2019-06-17 14:02:06,970 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7ef18bb6-9ed4-4581-9bce-397886602e47/ratis/fc858e6a-7cb4-466f-b74d-c38e48b42e52 has been successfully formatted.
2019-06-17 14:02:06,971 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-17 14:02:06,971 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-17 14:02:06,971 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-17 14:02:06,971 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 14:02:06,971 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 14:02:06,971 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-17 14:02:06,971 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new ed1a2b4b-9b6e-4304-8795-d054f055d6a5-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7ef18bb6-9ed4-4581-9bce-397886602e47/ratis/fc858e6a-7cb4-466f-b74d-c38e48b42e52
2019-06-17 14:02:06,971 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-17 14:02:06,971 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-17 14:02:06,971 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 14:02:06,971 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-17 14:02:06,972 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-17 14:02:06,972 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-17 14:02:06,972 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-17 14:02:06,972 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-17 14:02:06,972 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-17 14:02:06,972 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-17 14:02:06,973 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-17 14:02:06,973 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-17 14:02:06,974 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-17 14:02:06,974 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: start group-C38E48B42E52
2019-06-17 14:02:06,974 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5:group-C38E48B42E52 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-17 14:02:06,974 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: start FollowerState
2019-06-17 14:02:06,978 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-C38E48B42E52,id=ed1a2b4b-9b6e-4304-8795-d054f055d6a5
2019-06-17 14:02:08,059 INFO  impl.FollowerState (FollowerState.java:run(101)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5:group-C38E48B42E52 changes to CANDIDATE, lastRpcTime:1085, electionTimeout:1082ms
2019-06-17 14:02:08,060 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: shutdown FollowerState
2019-06-17 14:02:08,060 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5:group-C38E48B42E52 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-17 14:02:08,060 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: start LeaderElection
2019-06-17 14:02:08,063 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5:group-C38E48B42E52:LeaderElection4: begin an election at term 1 for -1: [ed1a2b4b-9b6e-4304-8795-d054f055d6a5:127.0.0.1:33059], old=null
2019-06-17 14:02:08,063 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: shutdown LeaderElection
2019-06-17 14:02:08,063 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5:group-C38E48B42E52 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-17 14:02:08,063 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5:group-C38E48B42E52 change Leader from null to ed1a2b4b-9b6e-4304-8795-d054f055d6a5 at term 1 for becomeLeader, leader elected after 1092ms
2019-06-17 14:02:08,063 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-17 14:02:08,064 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-17 14:02:08,064 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-17 14:02:08,064 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-17 14:02:08,064 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: start LeaderState
2019-06-17 14:02:08,064 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5-RaftLogWorker: Starting segment from index:0
2019-06-17 14:02:08,065 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5:group-C38E48B42E52 set configuration 0: [ed1a2b4b-9b6e-4304-8795-d054f055d6a5:127.0.0.1:33059], old=null at 0
2019-06-17 14:02:08,100 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7ef18bb6-9ed4-4581-9bce-397886602e47/ratis/fc858e6a-7cb4-466f-b74d-c38e48b42e52/current/log_inprogress_0
2019-06-17 14:02:09,022 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 5767602334945733781 is closed with bcsId 0.
2019-06-17 14:02:09,023 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-17 14:02:09,023 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: close
2019-06-17 14:02:09,023 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: shutdown group-C38E48B42E52
2019-06-17 14:02:09,024 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-C38E48B42E52,id=ed1a2b4b-9b6e-4304-8795-d054f055d6a5
2019-06-17 14:02:09,024 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: shutdown LeaderState
2019-06-17 14:02:09,024 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5-PendingRequests: sendNotLeaderResponses
2019-06-17 14:02:09,025 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-ed1a2b4b-9b6e-4304-8795-d054f055d6a5-group-C38E48B42E52: set stopIndex = 2
2019-06-17 14:02:09,025 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-17 14:02:09,026 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler7ef18bb6-9ed4-4581-9bce-397886602e47/ratis/fc858e6a-7cb4-466f-b74d-c38e48b42e52/sm/snapshot.1_2
2019-06-17 14:02:09,026 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5:group-C38E48B42E52 closes. The last applied log index is 2
2019-06-17 14:02:09,026 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-17 14:02:09,027 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5-RaftLogWorker close()
2019-06-17 14:02:09,028 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: shutdown server with port 33059 now
2019-06-17 14:02:09,029 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - ed1a2b4b-9b6e-4304-8795-d054f055d6a5: shutdown server with port 33059 successfully
2019-06-17 14:02:09,032 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-17 14:02:09,057 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler6899ba1b-8cc5-4645-a1d0-fdf449715acb/hdds of  storage type : DISK and capacity : 104021790720
2019-06-17 14:02:09,057 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler6899ba1b-8cc5-4645-a1d0-fdf449715acb/hdds to VolumeSet
2019-06-17 14:02:09,058 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@4fad6218
2019-06-17 14:02:09,058 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@4fad6218
2019-06-17 14:02:09,070 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 45849
2019-06-17 14:02:09,070 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-17 14:02:09,071 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-17 14:02:09,071 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 45849 (custom)
2019-06-17 14:02:09,071 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-17 14:02:09,071 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 14:02:09,071 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-17 14:02:09,072 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-17 14:02:09,072 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler6899ba1b-8cc5-4645-a1d0-fdf449715acb/ratis] (custom)
2019-06-17 14:02:09,072 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 43329
2019-06-17 14:02:09,073 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-17 14:02:09,073 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-17 14:02:09,073 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis c0f61c13-9ebf-4e46-ab18-08a5e07b4692 at port 45849
2019-06-17 14:02:09,095 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: start RPC server
2019-06-17 14:02:09,098 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: GrpcService started, listening on 0.0.0.0/0.0.0.0:45849
2019-06-17 14:02:09,109 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: addNew group-1F4717B50D43:[c0f61c13-9ebf-4e46-ab18-08a5e07b4692:127.0.0.1:45849] returns group-1F4717B50D43:java.util.concurrent.CompletableFuture@147890d3[Not completed]
2019-06-17 14:02:09,110 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: new RaftServerImpl for group-1F4717B50D43:[c0f61c13-9ebf-4e46-ab18-08a5e07b4692:127.0.0.1:45849] with ContainerStateMachine:uninitialized
2019-06-17 14:02:09,111 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-17 14:02:09,111 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-17 14:02:09,111 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-17 14:02:09,111 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-17 14:02:09,112 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692:group-1F4717B50D43 ConfigurationManager, init=-1: [c0f61c13-9ebf-4e46-ab18-08a5e07b4692:127.0.0.1:45849], old=null, confs=<EMPTY_MAP>
2019-06-17 14:02:09,112 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler6899ba1b-8cc5-4645-a1d0-fdf449715acb/ratis] (custom)
2019-06-17 14:02:09,112 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler6899ba1b-8cc5-4645-a1d0-fdf449715acb/ratis/ee226642-0a48-421f-aa9f-1f4717b50d43 does not exist. Creating ...
2019-06-17 14:02:09,115 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler6899ba1b-8cc5-4645-a1d0-fdf449715acb/ratis/ee226642-0a48-421f-aa9f-1f4717b50d43/in_use.lock acquired by nodename 4310@ozone-unit-076618677d3pl82f-1825396653
2019-06-17 14:02:09,117 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler6899ba1b-8cc5-4645-a1d0-fdf449715acb/ratis/ee226642-0a48-421f-aa9f-1f4717b50d43 has been successfully formatted.
2019-06-17 14:02:09,118 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-17 14:02:09,118 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-17 14:02:09,118 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-17 14:02:09,118 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-17 14:02:09,118 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 14:02:09,118 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-17 14:02:09,118 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new c0f61c13-9ebf-4e46-ab18-08a5e07b4692-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler6899ba1b-8cc5-4645-a1d0-fdf449715acb/ratis/ee226642-0a48-421f-aa9f-1f4717b50d43
2019-06-17 14:02:09,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-17 14:02:09,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-17 14:02:09,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-17 14:02:09,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-17 14:02:09,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-17 14:02:09,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-17 14:02:09,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-17 14:02:09,120 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-17 14:02:09,120 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-17 14:02:09,120 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-17 14:02:09,121 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-17 14:02:09,121 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-17 14:02:09,122 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-17 14:02:09,122 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: start group-1F4717B50D43
2019-06-17 14:02:09,122 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692:group-1F4717B50D43 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-17 14:02:09,122 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: start FollowerState
2019-06-17 14:02:09,123 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-1F4717B50D43,id=c0f61c13-9ebf-4e46-ab18-08a5e07b4692
2019-06-17 14:02:10,226 INFO  impl.FollowerState (FollowerState.java:run(101)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692:group-1F4717B50D43 changes to CANDIDATE, lastRpcTime:1103, electionTimeout:1103ms
2019-06-17 14:02:10,226 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: shutdown FollowerState
2019-06-17 14:02:10,226 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692:group-1F4717B50D43 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-17 14:02:10,226 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: start LeaderElection
2019-06-17 14:02:10,231 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692:group-1F4717B50D43:LeaderElection5: begin an election at term 1 for -1: [c0f61c13-9ebf-4e46-ab18-08a5e07b4692:127.0.0.1:45849], old=null
2019-06-17 14:02:10,231 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: shutdown LeaderElection
2019-06-17 14:02:10,231 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692:group-1F4717B50D43 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-17 14:02:10,232 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692:group-1F4717B50D43 change Leader from null to c0f61c13-9ebf-4e46-ab18-08a5e07b4692 at term 1 for becomeLeader, leader elected after 1113ms
2019-06-17 14:02:10,232 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-17 14:02:10,232 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-17 14:02:10,232 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-17 14:02:10,232 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-17 14:02:10,232 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: start LeaderState
2019-06-17 14:02:10,232 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692-RaftLogWorker: Starting segment from index:0
2019-06-17 14:02:10,233 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692:group-1F4717B50D43 set configuration 0: [c0f61c13-9ebf-4e46-ab18-08a5e07b4692:127.0.0.1:45849], old=null at 0
2019-06-17 14:02:10,268 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler6899ba1b-8cc5-4645-a1d0-fdf449715acb/ratis/ee226642-0a48-421f-aa9f-1f4717b50d43/current/log_inprogress_0
2019-06-17 14:02:11,170 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 8481897721945208632 is closed with bcsId 0.
2019-06-17 14:02:11,171 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-17 14:02:11,172 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: close
2019-06-17 14:02:11,172 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: shutdown group-1F4717B50D43
2019-06-17 14:02:11,172 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-1F4717B50D43,id=c0f61c13-9ebf-4e46-ab18-08a5e07b4692
2019-06-17 14:02:11,172 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: shutdown LeaderState
2019-06-17 14:02:11,173 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692-PendingRequests: sendNotLeaderResponses
2019-06-17 14:02:11,175 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-c0f61c13-9ebf-4e46-ab18-08a5e07b4692-group-1F4717B50D43: set stopIndex = 4
2019-06-17 14:02:11,175 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-17 14:02:11,176 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler6899ba1b-8cc5-4645-a1d0-fdf449715acb/ratis/ee226642-0a48-421f-aa9f-1f4717b50d43/sm/snapshot.1_4
2019-06-17 14:02:11,178 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692:group-1F4717B50D43 closes. The last applied log index is 4
2019-06-17 14:02:11,178 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-17 14:02:11,179 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692-RaftLogWorker close()
2019-06-17 14:02:11,180 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: shutdown server with port 45849 now
2019-06-17 14:02:11,182 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - c0f61c13-9ebf-4e46-ab18-08a5e07b4692: shutdown server with port 45849 successfully
2019-06-17 14:02:11,186 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
