2019-06-15 12:47:06,391 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2fe05bce-fdc1-49af-a371-41c26763cbfc/hdds of  storage type : DISK and capacity : 104021790720
2019-06-15 12:47:06,396 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2fe05bce-fdc1-49af-a371-41c26763cbfc/hdds to VolumeSet
2019-06-15 12:47:06,411 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
2019-06-15 12:47:06,446 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1500b2f3
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-06-15 12:47:06,900 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 39993
2019-06-15 12:47:07,325 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-15 12:47:07,350 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 12:47:07,359 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 39993 (custom)
2019-06-15 12:47:07,360 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 12:47:07,363 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 12:47:07,363 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 12:47:07,364 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 12:47:07,531 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2fe05bce-fdc1-49af-a371-41c26763cbfc/ratis] (custom)
2019-06-15 12:47:07,543 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 35437
2019-06-15 12:47:07,569 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-15 12:47:07,569 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-15 12:47:07,570 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 502c87e5-024d-4865-8c1f-a64c26e877b3 at port 39993
2019-06-15 12:47:07,600 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: start RPC server
2019-06-15 12:47:07,751 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: GrpcService started, listening on 0.0.0.0/0.0.0.0:39993
2019-06-15 12:47:08,091 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: addNew group-DB7E960075BE:[502c87e5-024d-4865-8c1f-a64c26e877b3:127.0.0.1:39993] returns group-DB7E960075BE:java.util.concurrent.CompletableFuture@3d7c71d2[Not completed]
2019-06-15 12:47:08,121 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: new RaftServerImpl for group-DB7E960075BE:[502c87e5-024d-4865-8c1f-a64c26e877b3:127.0.0.1:39993] with ContainerStateMachine:uninitialized
2019-06-15 12:47:08,122 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 12:47:08,122 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 12:47:08,123 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 12:47:08,123 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 12:47:08,129 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 502c87e5-024d-4865-8c1f-a64c26e877b3:group-DB7E960075BE ConfigurationManager, init=-1: [502c87e5-024d-4865-8c1f-a64c26e877b3:127.0.0.1:39993], old=null, confs=<EMPTY_MAP>
2019-06-15 12:47:08,129 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2fe05bce-fdc1-49af-a371-41c26763cbfc/ratis] (custom)
2019-06-15 12:47:08,136 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2fe05bce-fdc1-49af-a371-41c26763cbfc/ratis/6922e33d-dbe1-4f75-b959-db7e960075be does not exist. Creating ...
2019-06-15 12:47:08,146 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2fe05bce-fdc1-49af-a371-41c26763cbfc/ratis/6922e33d-dbe1-4f75-b959-db7e960075be/in_use.lock acquired by nodename 4200@ozone-unit-076618677d3-6whwr-556242372
2019-06-15 12:47:08,153 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2fe05bce-fdc1-49af-a371-41c26763cbfc/ratis/6922e33d-dbe1-4f75-b959-db7e960075be has been successfully formatted.
2019-06-15 12:47:08,155 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 12:47:08,155 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 12:47:08,157 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 12:47:08,160 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 12:47:08,163 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 12:47:08,167 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 12:47:08,170 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 502c87e5-024d-4865-8c1f-a64c26e877b3-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2fe05bce-fdc1-49af-a371-41c26763cbfc/ratis/6922e33d-dbe1-4f75-b959-db7e960075be
2019-06-15 12:47:08,170 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 12:47:08,171 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 12:47:08,173 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 12:47:08,173 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 12:47:08,173 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 12:47:08,174 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 12:47:08,175 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 12:47:08,175 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 12:47:08,176 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 12:47:08,178 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 12:47:08,183 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 12:47:08,184 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 12:47:08,184 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 12:47:08,283 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: start group-DB7E960075BE
2019-06-15 12:47:08,284 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 502c87e5-024d-4865-8c1f-a64c26e877b3:group-DB7E960075BE changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 12:47:08,285 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: start FollowerState
2019-06-15 12:47:08,287 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-DB7E960075BE,id=502c87e5-024d-4865-8c1f-a64c26e877b3
2019-06-15 12:47:09,296 INFO  impl.FollowerState (FollowerState.java:run(101)) - 502c87e5-024d-4865-8c1f-a64c26e877b3:group-DB7E960075BE changes to CANDIDATE, lastRpcTime:1010, electionTimeout:1010ms
2019-06-15 12:47:09,296 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: shutdown FollowerState
2019-06-15 12:47:09,296 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 502c87e5-024d-4865-8c1f-a64c26e877b3:group-DB7E960075BE changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-15 12:47:09,298 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: start LeaderElection
2019-06-15 12:47:09,301 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 502c87e5-024d-4865-8c1f-a64c26e877b3:group-DB7E960075BE:LeaderElection1: begin an election at term 1 for -1: [502c87e5-024d-4865-8c1f-a64c26e877b3:127.0.0.1:39993], old=null
2019-06-15 12:47:09,302 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: shutdown LeaderElection
2019-06-15 12:47:09,303 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 502c87e5-024d-4865-8c1f-a64c26e877b3:group-DB7E960075BE changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-15 12:47:09,303 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 502c87e5-024d-4865-8c1f-a64c26e877b3:group-DB7E960075BE change Leader from null to 502c87e5-024d-4865-8c1f-a64c26e877b3 at term 1 for becomeLeader, leader elected after 1147ms
2019-06-15 12:47:09,306 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-15 12:47:09,307 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-15 12:47:09,309 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-15 12:47:09,309 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-15 12:47:09,319 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: start LeaderState
2019-06-15 12:47:09,337 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 502c87e5-024d-4865-8c1f-a64c26e877b3-RaftLogWorker: Starting segment from index:0
2019-06-15 12:47:09,358 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 502c87e5-024d-4865-8c1f-a64c26e877b3:group-DB7E960075BE set configuration 0: [502c87e5-024d-4865-8c1f-a64c26e877b3:127.0.0.1:39993], old=null at 0
2019-06-15 12:47:09,485 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 502c87e5-024d-4865-8c1f-a64c26e877b3-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2fe05bce-fdc1-49af-a371-41c26763cbfc/ratis/6922e33d-dbe1-4f75-b959-db7e960075be/current/log_inprogress_0
2019-06-15 12:47:10,544 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-06-15 12:47:10,605 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 2263777288215673892 is closed with bcsId 0.
2019-06-15 12:47:10,606 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-15 12:47:10,606 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: close
2019-06-15 12:47:10,608 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: shutdown group-DB7E960075BE
2019-06-15 12:47:10,608 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-DB7E960075BE,id=502c87e5-024d-4865-8c1f-a64c26e877b3
2019-06-15 12:47:10,608 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: shutdown LeaderState
2019-06-15 12:47:10,609 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 502c87e5-024d-4865-8c1f-a64c26e877b3-PendingRequests: sendNotLeaderResponses
2019-06-15 12:47:10,611 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-502c87e5-024d-4865-8c1f-a64c26e877b3-group-DB7E960075BE: set stopIndex = 4
2019-06-15 12:47:10,611 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-15 12:47:10,611 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler2fe05bce-fdc1-49af-a371-41c26763cbfc/ratis/6922e33d-dbe1-4f75-b959-db7e960075be/sm/snapshot.1_4
2019-06-15 12:47:10,619 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 502c87e5-024d-4865-8c1f-a64c26e877b3:group-DB7E960075BE closes. The last applied log index is 4
2019-06-15 12:47:10,620 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 502c87e5-024d-4865-8c1f-a64c26e877b3-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 12:47:10,621 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 502c87e5-024d-4865-8c1f-a64c26e877b3-RaftLogWorker close()
2019-06-15 12:47:10,622 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: shutdown server with port 39993 now
2019-06-15 12:47:10,629 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 502c87e5-024d-4865-8c1f-a64c26e877b3: shutdown server with port 39993 successfully
2019-06-15 12:47:10,641 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-15 12:47:10,680 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler79858dd7-a916-49cb-9baa-bbc4aaebdc3f/hdds of  storage type : DISK and capacity : 104021790720
2019-06-15 12:47:10,681 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler79858dd7-a916-49cb-9baa-bbc4aaebdc3f/hdds to VolumeSet
2019-06-15 12:47:10,681 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@655523dd
2019-06-15 12:47:10,681 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@655523dd
2019-06-15 12:47:10,694 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 41277
2019-06-15 12:47:10,695 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-15 12:47:10,696 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 12:47:10,696 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 41277 (custom)
2019-06-15 12:47:10,696 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 12:47:10,696 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 12:47:10,696 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 12:47:10,696 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 12:47:10,697 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler79858dd7-a916-49cb-9baa-bbc4aaebdc3f/ratis] (custom)
2019-06-15 12:47:10,698 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 46325
2019-06-15 12:47:10,698 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-15 12:47:10,698 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-15 12:47:10,698 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis caf40271-13db-4c91-bf81-dc0b2d210fd7 at port 41277
2019-06-15 12:47:10,706 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: start RPC server
2019-06-15 12:47:10,708 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: GrpcService started, listening on 0.0.0.0/0.0.0.0:41277
2019-06-15 12:47:10,719 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: addNew group-C11A951152B8:[caf40271-13db-4c91-bf81-dc0b2d210fd7:127.0.0.1:41277] returns group-C11A951152B8:java.util.concurrent.CompletableFuture@7d10892d[Not completed]
2019-06-15 12:47:10,731 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: new RaftServerImpl for group-C11A951152B8:[caf40271-13db-4c91-bf81-dc0b2d210fd7:127.0.0.1:41277] with ContainerStateMachine:uninitialized
2019-06-15 12:47:10,742 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 12:47:10,742 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 12:47:10,742 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 12:47:10,742 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 12:47:10,742 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - caf40271-13db-4c91-bf81-dc0b2d210fd7:group-C11A951152B8 ConfigurationManager, init=-1: [caf40271-13db-4c91-bf81-dc0b2d210fd7:127.0.0.1:41277], old=null, confs=<EMPTY_MAP>
2019-06-15 12:47:10,743 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler79858dd7-a916-49cb-9baa-bbc4aaebdc3f/ratis] (custom)
2019-06-15 12:47:10,743 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler79858dd7-a916-49cb-9baa-bbc4aaebdc3f/ratis/c53a253c-dc2b-4da4-958e-c11a951152b8 does not exist. Creating ...
2019-06-15 12:47:10,746 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler79858dd7-a916-49cb-9baa-bbc4aaebdc3f/ratis/c53a253c-dc2b-4da4-958e-c11a951152b8/in_use.lock acquired by nodename 4200@ozone-unit-076618677d3-6whwr-556242372
2019-06-15 12:47:10,749 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler79858dd7-a916-49cb-9baa-bbc4aaebdc3f/ratis/c53a253c-dc2b-4da4-958e-c11a951152b8 has been successfully formatted.
2019-06-15 12:47:10,749 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 12:47:10,749 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 12:47:10,749 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 12:47:10,750 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 12:47:10,750 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 12:47:10,752 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 12:47:10,752 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new caf40271-13db-4c91-bf81-dc0b2d210fd7-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler79858dd7-a916-49cb-9baa-bbc4aaebdc3f/ratis/c53a253c-dc2b-4da4-958e-c11a951152b8
2019-06-15 12:47:10,752 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 12:47:10,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 12:47:10,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 12:47:10,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 12:47:10,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 12:47:10,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 12:47:10,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 12:47:10,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 12:47:10,753 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 12:47:10,754 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 12:47:10,754 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 12:47:10,754 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 12:47:10,754 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 12:47:10,755 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: start group-C11A951152B8
2019-06-15 12:47:10,755 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - caf40271-13db-4c91-bf81-dc0b2d210fd7:group-C11A951152B8 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 12:47:10,755 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: start FollowerState
2019-06-15 12:47:10,755 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-C11A951152B8,id=caf40271-13db-4c91-bf81-dc0b2d210fd7
2019-06-15 12:47:11,852 INFO  impl.FollowerState (FollowerState.java:run(101)) - caf40271-13db-4c91-bf81-dc0b2d210fd7:group-C11A951152B8 changes to CANDIDATE, lastRpcTime:1097, electionTimeout:1096ms
2019-06-15 12:47:11,852 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: shutdown FollowerState
2019-06-15 12:47:11,852 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - caf40271-13db-4c91-bf81-dc0b2d210fd7:group-C11A951152B8 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-15 12:47:11,852 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: start LeaderElection
2019-06-15 12:47:11,855 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - caf40271-13db-4c91-bf81-dc0b2d210fd7:group-C11A951152B8:LeaderElection2: begin an election at term 1 for -1: [caf40271-13db-4c91-bf81-dc0b2d210fd7:127.0.0.1:41277], old=null
2019-06-15 12:47:11,856 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: shutdown LeaderElection
2019-06-15 12:47:11,856 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - caf40271-13db-4c91-bf81-dc0b2d210fd7:group-C11A951152B8 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-15 12:47:11,856 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - caf40271-13db-4c91-bf81-dc0b2d210fd7:group-C11A951152B8 change Leader from null to caf40271-13db-4c91-bf81-dc0b2d210fd7 at term 1 for becomeLeader, leader elected after 1106ms
2019-06-15 12:47:11,856 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-15 12:47:11,856 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-15 12:47:11,856 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-15 12:47:11,857 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-15 12:47:11,857 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: start LeaderState
2019-06-15 12:47:11,857 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - caf40271-13db-4c91-bf81-dc0b2d210fd7-RaftLogWorker: Starting segment from index:0
2019-06-15 12:47:11,862 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - caf40271-13db-4c91-bf81-dc0b2d210fd7:group-C11A951152B8 set configuration 0: [caf40271-13db-4c91-bf81-dc0b2d210fd7:127.0.0.1:41277], old=null at 0
2019-06-15 12:47:11,894 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - caf40271-13db-4c91-bf81-dc0b2d210fd7-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler79858dd7-a916-49cb-9baa-bbc4aaebdc3f/ratis/c53a253c-dc2b-4da4-958e-c11a951152b8/current/log_inprogress_0
2019-06-15 12:47:12,791 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-15 12:47:12,792 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: close
2019-06-15 12:47:12,792 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: shutdown group-C11A951152B8
2019-06-15 12:47:12,793 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-C11A951152B8,id=caf40271-13db-4c91-bf81-dc0b2d210fd7
2019-06-15 12:47:12,793 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: shutdown LeaderState
2019-06-15 12:47:12,793 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - caf40271-13db-4c91-bf81-dc0b2d210fd7-PendingRequests: sendNotLeaderResponses
2019-06-15 12:47:12,794 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-caf40271-13db-4c91-bf81-dc0b2d210fd7-group-C11A951152B8: set stopIndex = 2
2019-06-15 12:47:12,794 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-15 12:47:12,795 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler79858dd7-a916-49cb-9baa-bbc4aaebdc3f/ratis/c53a253c-dc2b-4da4-958e-c11a951152b8/sm/snapshot.1_2
2019-06-15 12:47:12,795 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - caf40271-13db-4c91-bf81-dc0b2d210fd7:group-C11A951152B8 closes. The last applied log index is 2
2019-06-15 12:47:12,796 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - caf40271-13db-4c91-bf81-dc0b2d210fd7-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 12:47:12,797 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - caf40271-13db-4c91-bf81-dc0b2d210fd7-RaftLogWorker close()
2019-06-15 12:47:12,798 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: shutdown server with port 41277 now
2019-06-15 12:47:12,801 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - caf40271-13db-4c91-bf81-dc0b2d210fd7: shutdown server with port 41277 successfully
2019-06-15 12:47:12,809 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-15 12:47:12,838 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler67f8c28d-c7a8-40cb-8d6b-7d5a2b9d0271/hdds of  storage type : DISK and capacity : 104021790720
2019-06-15 12:47:12,839 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler67f8c28d-c7a8-40cb-8d6b-7d5a2b9d0271/hdds to VolumeSet
2019-06-15 12:47:12,839 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@dc7b462
2019-06-15 12:47:12,839 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@dc7b462
2019-06-15 12:47:12,854 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 46515
2019-06-15 12:47:12,855 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-15 12:47:12,856 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 12:47:12,856 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 46515 (custom)
2019-06-15 12:47:12,857 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 12:47:12,857 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 12:47:12,857 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 12:47:12,857 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 12:47:12,858 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler67f8c28d-c7a8-40cb-8d6b-7d5a2b9d0271/ratis] (custom)
2019-06-15 12:47:12,859 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 34353
2019-06-15 12:47:12,859 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-15 12:47:12,859 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-15 12:47:12,860 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 6578f3e0-77d2-423a-916e-4e2b0b5a64c3 at port 46515
2019-06-15 12:47:12,871 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: start RPC server
2019-06-15 12:47:12,872 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: GrpcService started, listening on 0.0.0.0/0.0.0.0:46515
2019-06-15 12:47:12,882 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: addNew group-F47F9C14BA4B:[6578f3e0-77d2-423a-916e-4e2b0b5a64c3:127.0.0.1:46515] returns group-F47F9C14BA4B:java.util.concurrent.CompletableFuture@1a751945[Not completed]
2019-06-15 12:47:12,883 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: new RaftServerImpl for group-F47F9C14BA4B:[6578f3e0-77d2-423a-916e-4e2b0b5a64c3:127.0.0.1:46515] with ContainerStateMachine:uninitialized
2019-06-15 12:47:12,883 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 12:47:12,884 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 12:47:12,884 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 12:47:12,884 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 12:47:12,884 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3:group-F47F9C14BA4B ConfigurationManager, init=-1: [6578f3e0-77d2-423a-916e-4e2b0b5a64c3:127.0.0.1:46515], old=null, confs=<EMPTY_MAP>
2019-06-15 12:47:12,884 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler67f8c28d-c7a8-40cb-8d6b-7d5a2b9d0271/ratis] (custom)
2019-06-15 12:47:12,884 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler67f8c28d-c7a8-40cb-8d6b-7d5a2b9d0271/ratis/ed6400c8-813d-44cb-ac98-f47f9c14ba4b does not exist. Creating ...
2019-06-15 12:47:12,889 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler67f8c28d-c7a8-40cb-8d6b-7d5a2b9d0271/ratis/ed6400c8-813d-44cb-ac98-f47f9c14ba4b/in_use.lock acquired by nodename 4200@ozone-unit-076618677d3-6whwr-556242372
2019-06-15 12:47:12,892 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler67f8c28d-c7a8-40cb-8d6b-7d5a2b9d0271/ratis/ed6400c8-813d-44cb-ac98-f47f9c14ba4b has been successfully formatted.
2019-06-15 12:47:12,892 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 12:47:12,892 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 12:47:12,892 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 12:47:12,892 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 12:47:12,892 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 12:47:12,892 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 12:47:12,893 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 6578f3e0-77d2-423a-916e-4e2b0b5a64c3-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler67f8c28d-c7a8-40cb-8d6b-7d5a2b9d0271/ratis/ed6400c8-813d-44cb-ac98-f47f9c14ba4b
2019-06-15 12:47:12,893 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 12:47:12,893 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 12:47:12,893 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 12:47:12,893 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 12:47:12,893 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 12:47:12,893 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 12:47:12,893 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 12:47:12,893 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 12:47:12,893 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 12:47:12,893 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 12:47:12,894 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 12:47:12,894 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 12:47:12,894 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 12:47:12,894 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: start group-F47F9C14BA4B
2019-06-15 12:47:12,894 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3:group-F47F9C14BA4B changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 12:47:12,894 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: start FollowerState
2019-06-15 12:47:12,895 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-F47F9C14BA4B,id=6578f3e0-77d2-423a-916e-4e2b0b5a64c3
2019-06-15 12:47:13,932 INFO  impl.FollowerState (FollowerState.java:run(101)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3:group-F47F9C14BA4B changes to CANDIDATE, lastRpcTime:1037, electionTimeout:1037ms
2019-06-15 12:47:13,932 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: shutdown FollowerState
2019-06-15 12:47:13,932 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3:group-F47F9C14BA4B changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-15 12:47:13,932 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: start LeaderElection
2019-06-15 12:47:13,936 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3:group-F47F9C14BA4B:LeaderElection3: begin an election at term 1 for -1: [6578f3e0-77d2-423a-916e-4e2b0b5a64c3:127.0.0.1:46515], old=null
2019-06-15 12:47:13,936 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: shutdown LeaderElection
2019-06-15 12:47:13,936 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3:group-F47F9C14BA4B changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-15 12:47:13,936 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3:group-F47F9C14BA4B change Leader from null to 6578f3e0-77d2-423a-916e-4e2b0b5a64c3 at term 1 for becomeLeader, leader elected after 1043ms
2019-06-15 12:47:13,936 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-15 12:47:13,936 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-15 12:47:13,936 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-15 12:47:13,936 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-15 12:47:13,937 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: start LeaderState
2019-06-15 12:47:13,937 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3-RaftLogWorker: Starting segment from index:0
2019-06-15 12:47:13,937 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3:group-F47F9C14BA4B set configuration 0: [6578f3e0-77d2-423a-916e-4e2b0b5a64c3:127.0.0.1:46515], old=null at 0
2019-06-15 12:47:13,976 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler67f8c28d-c7a8-40cb-8d6b-7d5a2b9d0271/ratis/ed6400c8-813d-44cb-ac98-f47f9c14ba4b/current/log_inprogress_0
2019-06-15 12:47:15,215 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 7239466328267628816 is closed with bcsId 0.
2019-06-15 12:47:15,216 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-15 12:47:15,216 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: close
2019-06-15 12:47:15,216 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: shutdown group-F47F9C14BA4B
2019-06-15 12:47:15,217 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-F47F9C14BA4B,id=6578f3e0-77d2-423a-916e-4e2b0b5a64c3
2019-06-15 12:47:15,217 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: shutdown LeaderState
2019-06-15 12:47:15,217 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3-PendingRequests: sendNotLeaderResponses
2019-06-15 12:47:15,218 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-6578f3e0-77d2-423a-916e-4e2b0b5a64c3-group-F47F9C14BA4B: set stopIndex = 2
2019-06-15 12:47:15,218 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-15 12:47:15,219 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler67f8c28d-c7a8-40cb-8d6b-7d5a2b9d0271/ratis/ed6400c8-813d-44cb-ac98-f47f9c14ba4b/sm/snapshot.1_2
2019-06-15 12:47:15,219 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3:group-F47F9C14BA4B closes. The last applied log index is 2
2019-06-15 12:47:15,219 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 12:47:15,220 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3-RaftLogWorker close()
2019-06-15 12:47:15,226 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: shutdown server with port 46515 now
2019-06-15 12:47:15,231 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 6578f3e0-77d2-423a-916e-4e2b0b5a64c3: shutdown server with port 46515 successfully
2019-06-15 12:47:15,256 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-15 12:47:15,300 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd74b97dd-f487-4314-9cb4-facadc737b58/hdds of  storage type : DISK and capacity : 104021790720
2019-06-15 12:47:15,300 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd74b97dd-f487-4314-9cb4-facadc737b58/hdds to VolumeSet
2019-06-15 12:47:15,300 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@3971f0fe
2019-06-15 12:47:15,301 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@3971f0fe
2019-06-15 12:47:15,314 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 34507
2019-06-15 12:47:15,315 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-15 12:47:15,316 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 12:47:15,316 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 34507 (custom)
2019-06-15 12:47:15,316 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 12:47:15,317 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 12:47:15,317 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 12:47:15,317 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 12:47:15,318 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd74b97dd-f487-4314-9cb4-facadc737b58/ratis] (custom)
2019-06-15 12:47:15,318 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 40107
2019-06-15 12:47:15,319 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-15 12:47:15,319 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-15 12:47:15,319 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis ea82f698-cc8d-4ee1-9adc-5be122deb889 at port 34507
2019-06-15 12:47:15,334 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: start RPC server
2019-06-15 12:47:15,339 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: GrpcService started, listening on 0.0.0.0/0.0.0.0:34507
Jun 15, 2019 12:47:15 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:41277} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Jun 15, 2019 12:47:15 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:46515} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:118)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:401)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:270)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-06-15 12:47:15,370 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: addNew group-8B5C1CC3A46F:[ea82f698-cc8d-4ee1-9adc-5be122deb889:127.0.0.1:34507] returns group-8B5C1CC3A46F:java.util.concurrent.CompletableFuture@4d48c71f[Not completed]
2019-06-15 12:47:15,371 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: new RaftServerImpl for group-8B5C1CC3A46F:[ea82f698-cc8d-4ee1-9adc-5be122deb889:127.0.0.1:34507] with ContainerStateMachine:uninitialized
2019-06-15 12:47:15,371 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 12:47:15,371 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 12:47:15,372 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 12:47:15,372 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 12:47:15,372 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - ea82f698-cc8d-4ee1-9adc-5be122deb889:group-8B5C1CC3A46F ConfigurationManager, init=-1: [ea82f698-cc8d-4ee1-9adc-5be122deb889:127.0.0.1:34507], old=null, confs=<EMPTY_MAP>
2019-06-15 12:47:15,372 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd74b97dd-f487-4314-9cb4-facadc737b58/ratis] (custom)
2019-06-15 12:47:15,373 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd74b97dd-f487-4314-9cb4-facadc737b58/ratis/1debede1-dc6b-4188-866a-8b5c1cc3a46f does not exist. Creating ...
2019-06-15 12:47:15,376 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd74b97dd-f487-4314-9cb4-facadc737b58/ratis/1debede1-dc6b-4188-866a-8b5c1cc3a46f/in_use.lock acquired by nodename 4200@ozone-unit-076618677d3-6whwr-556242372
2019-06-15 12:47:15,378 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd74b97dd-f487-4314-9cb4-facadc737b58/ratis/1debede1-dc6b-4188-866a-8b5c1cc3a46f has been successfully formatted.
2019-06-15 12:47:15,378 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 12:47:15,379 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 12:47:15,379 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 12:47:15,379 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 12:47:15,379 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 12:47:15,379 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 12:47:15,379 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new ea82f698-cc8d-4ee1-9adc-5be122deb889-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd74b97dd-f487-4314-9cb4-facadc737b58/ratis/1debede1-dc6b-4188-866a-8b5c1cc3a46f
2019-06-15 12:47:15,380 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 12:47:15,380 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 12:47:15,380 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 12:47:15,380 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 12:47:15,380 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 12:47:15,380 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 12:47:15,381 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 12:47:15,381 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 12:47:15,381 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 12:47:15,381 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 12:47:15,382 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 12:47:15,382 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 12:47:15,382 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 12:47:15,382 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: start group-8B5C1CC3A46F
2019-06-15 12:47:15,382 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ea82f698-cc8d-4ee1-9adc-5be122deb889:group-8B5C1CC3A46F changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 12:47:15,383 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: start FollowerState
2019-06-15 12:47:15,383 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-8B5C1CC3A46F,id=ea82f698-cc8d-4ee1-9adc-5be122deb889
2019-06-15 12:47:16,404 INFO  impl.FollowerState (FollowerState.java:run(101)) - ea82f698-cc8d-4ee1-9adc-5be122deb889:group-8B5C1CC3A46F changes to CANDIDATE, lastRpcTime:1021, electionTimeout:1020ms
2019-06-15 12:47:16,404 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: shutdown FollowerState
2019-06-15 12:47:16,404 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ea82f698-cc8d-4ee1-9adc-5be122deb889:group-8B5C1CC3A46F changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-15 12:47:16,404 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: start LeaderElection
2019-06-15 12:47:16,407 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - ea82f698-cc8d-4ee1-9adc-5be122deb889:group-8B5C1CC3A46F:LeaderElection4: begin an election at term 1 for -1: [ea82f698-cc8d-4ee1-9adc-5be122deb889:127.0.0.1:34507], old=null
2019-06-15 12:47:16,408 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: shutdown LeaderElection
2019-06-15 12:47:16,408 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - ea82f698-cc8d-4ee1-9adc-5be122deb889:group-8B5C1CC3A46F changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-15 12:47:16,408 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - ea82f698-cc8d-4ee1-9adc-5be122deb889:group-8B5C1CC3A46F change Leader from null to ea82f698-cc8d-4ee1-9adc-5be122deb889 at term 1 for becomeLeader, leader elected after 1029ms
2019-06-15 12:47:16,408 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-15 12:47:16,408 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-15 12:47:16,408 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-15 12:47:16,408 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-15 12:47:16,408 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: start LeaderState
2019-06-15 12:47:16,409 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - ea82f698-cc8d-4ee1-9adc-5be122deb889-RaftLogWorker: Starting segment from index:0
2019-06-15 12:47:16,409 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - ea82f698-cc8d-4ee1-9adc-5be122deb889:group-8B5C1CC3A46F set configuration 0: [ea82f698-cc8d-4ee1-9adc-5be122deb889:127.0.0.1:34507], old=null at 0
2019-06-15 12:47:16,456 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - ea82f698-cc8d-4ee1-9adc-5be122deb889-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd74b97dd-f487-4314-9cb4-facadc737b58/ratis/1debede1-dc6b-4188-866a-8b5c1cc3a46f/current/log_inprogress_0
2019-06-15 12:47:17,430 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 4234034022843129663 is closed with bcsId 0.
2019-06-15 12:47:17,430 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-15 12:47:17,431 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: close
2019-06-15 12:47:17,431 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: shutdown group-8B5C1CC3A46F
2019-06-15 12:47:17,431 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-8B5C1CC3A46F,id=ea82f698-cc8d-4ee1-9adc-5be122deb889
2019-06-15 12:47:17,431 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: shutdown LeaderState
2019-06-15 12:47:17,431 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - ea82f698-cc8d-4ee1-9adc-5be122deb889-PendingRequests: sendNotLeaderResponses
2019-06-15 12:47:17,432 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-ea82f698-cc8d-4ee1-9adc-5be122deb889-group-8B5C1CC3A46F: set stopIndex = 2
2019-06-15 12:47:17,432 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:2)
2019-06-15 12:47:17,433 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerd74b97dd-f487-4314-9cb4-facadc737b58/ratis/1debede1-dc6b-4188-866a-8b5c1cc3a46f/sm/snapshot.1_2
2019-06-15 12:47:17,433 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - ea82f698-cc8d-4ee1-9adc-5be122deb889:group-8B5C1CC3A46F closes. The last applied log index is 2
2019-06-15 12:47:17,433 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - ea82f698-cc8d-4ee1-9adc-5be122deb889-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 12:47:17,434 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - ea82f698-cc8d-4ee1-9adc-5be122deb889-RaftLogWorker close()
2019-06-15 12:47:17,435 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: shutdown server with port 34507 now
2019-06-15 12:47:17,436 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - ea82f698-cc8d-4ee1-9adc-5be122deb889: shutdown server with port 34507 successfully
2019-06-15 12:47:17,441 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-06-15 12:47:17,463 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerac59bea1-f0b9-4d1d-9d5f-6bec3605ab48/hdds of  storage type : DISK and capacity : 104021790720
2019-06-15 12:47:17,464 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerac59bea1-f0b9-4d1d-9d5f-6bec3605ab48/hdds to VolumeSet
2019-06-15 12:47:17,464 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@1bf39d06
2019-06-15 12:47:17,464 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@1bf39d06
2019-06-15 12:47:17,473 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:newXceiverServerRatis(401)) - Found a free port for the server : 40727
2019-06-15 12:47:17,473 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-06-15 12:47:17,474 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-06-15 12:47:17,474 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 40727 (custom)
2019-06-15 12:47:17,474 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-06-15 12:47:17,474 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 12:47:17,475 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-06-15 12:47:17,475 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-06-15 12:47:17,475 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerac59bea1-f0b9-4d1d-9d5f-6bec3605ab48/ratis] (custom)
2019-06-15 12:47:17,476 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:<init>(97)) - Found a free port for the server : 44877
2019-06-15 12:47:17,476 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-06-15 12:47:17,476 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-06-15 12:47:17,476 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(418)) - Starting XceiverServerRatis 58399e2f-9fb4-412a-a14c-394a333f3cda at port 40727
2019-06-15 12:47:17,496 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: start RPC server
2019-06-15 12:47:17,499 INFO  server.GrpcService (GrpcService.java:startImpl(148)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: GrpcService started, listening on 0.0.0.0/0.0.0.0:40727
2019-06-15 12:47:17,508 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: addNew group-40A7E9CDF7E3:[58399e2f-9fb4-412a-a14c-394a333f3cda:127.0.0.1:40727] returns group-40A7E9CDF7E3:java.util.concurrent.CompletableFuture@1a85c88d[Not completed]
2019-06-15 12:47:17,509 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(91)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: new RaftServerImpl for group-40A7E9CDF7E3:[58399e2f-9fb4-412a-a14c-394a333f3cda:127.0.0.1:40727] with ContainerStateMachine:uninitialized
2019-06-15 12:47:17,509 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 1s (custom)
2019-06-15 12:47:17,510 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 1200ms (custom)
2019-06-15 12:47:17,510 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-06-15 12:47:17,510 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-06-15 12:47:17,510 INFO  impl.RaftServerImpl (ServerState.java:<init>(101)) - 58399e2f-9fb4-412a-a14c-394a333f3cda:group-40A7E9CDF7E3 ConfigurationManager, init=-1: [58399e2f-9fb4-412a-a14c-394a333f3cda:127.0.0.1:40727], old=null, confs=<EMPTY_MAP>
2019-06-15 12:47:17,510 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerac59bea1-f0b9-4d1d-9d5f-6bec3605ab48/ratis] (custom)
2019-06-15 12:47:17,510 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerac59bea1-f0b9-4d1d-9d5f-6bec3605ab48/ratis/c6f9c4f2-ff1d-436b-aab1-40a7e9cdf7e3 does not exist. Creating ...
2019-06-15 12:47:17,513 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerac59bea1-f0b9-4d1d-9d5f-6bec3605ab48/ratis/c6f9c4f2-ff1d-436b-aab1-40a7e9cdf7e3/in_use.lock acquired by nodename 4200@ozone-unit-076618677d3-6whwr-556242372
2019-06-15 12:47:17,515 INFO  storage.RaftStorage (RaftStorage.java:format(75)) - Storage directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerac59bea1-f0b9-4d1d-9d5f-6bec3605ab48/ratis/c6f9c4f2-ff1d-436b-aab1-40a7e9cdf7e3 has been successfully formatted.
2019-06-15 12:47:17,516 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(199)) - The snapshot info is null.Setting the last applied index to:(t:0, i:~)
2019-06-15 12:47:17,516 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-06-15 12:47:17,516 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-06-15 12:47:17,516 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-06-15 12:47:17,516 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 12:47:17,516 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-06-15 12:47:17,516 INFO  storage.RaftLogWorker (RaftLogWorker.java:<init>(123)) - new 58399e2f-9fb4-412a-a14c-394a333f3cda-RaftLogWorker for Storage Directory /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerac59bea1-f0b9-4d1d-9d5f-6bec3605ab48/ratis/c6f9c4f2-ff1d-436b-aab1-40a7e9cdf7e3
2019-06-15 12:47:17,516 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-06-15 12:47:17,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-06-15 12:47:17,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 16384 (custom)
2019-06-15 12:47:17,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-06-15 12:47:17,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-06-15 12:47:17,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-06-15 12:47:17,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-06-15 12:47:17,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-06-15 12:47:17,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-06-15 12:47:17,518 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-06-15 12:47:17,522 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-06-15 12:47:17,522 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-06-15 12:47:17,522 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-06-15 12:47:17,523 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(173)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: start group-40A7E9CDF7E3
2019-06-15 12:47:17,523 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 58399e2f-9fb4-412a-a14c-394a333f3cda:group-40A7E9CDF7E3 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-06-15 12:47:17,523 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: start FollowerState
2019-06-15 12:47:17,523 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-40A7E9CDF7E3,id=58399e2f-9fb4-412a-a14c-394a333f3cda
2019-06-15 12:47:18,707 INFO  impl.FollowerState (FollowerState.java:run(101)) - 58399e2f-9fb4-412a-a14c-394a333f3cda:group-40A7E9CDF7E3 changes to CANDIDATE, lastRpcTime:1183, electionTimeout:1183ms
2019-06-15 12:47:18,707 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: shutdown FollowerState
2019-06-15 12:47:18,707 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 58399e2f-9fb4-412a-a14c-394a333f3cda:group-40A7E9CDF7E3 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-06-15 12:47:18,707 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: start LeaderElection
2019-06-15 12:47:18,710 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 58399e2f-9fb4-412a-a14c-394a333f3cda:group-40A7E9CDF7E3:LeaderElection5: begin an election at term 1 for -1: [58399e2f-9fb4-412a-a14c-394a333f3cda:127.0.0.1:40727], old=null
2019-06-15 12:47:18,711 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: shutdown LeaderElection
2019-06-15 12:47:18,711 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(164)) - 58399e2f-9fb4-412a-a14c-394a333f3cda:group-40A7E9CDF7E3 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-06-15 12:47:18,711 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 58399e2f-9fb4-412a-a14c-394a333f3cda:group-40A7E9CDF7E3 change Leader from null to 58399e2f-9fb4-412a-a14c-394a333f3cda at term 1 for becomeLeader, leader elected after 1195ms
2019-06-15 12:47:18,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-06-15 12:47:18,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-06-15 12:47:18,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-06-15 12:47:18,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-06-15 12:47:18,711 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: start LeaderState
2019-06-15 12:47:18,712 INFO  storage.RaftLogWorker (RaftLogWorker.java:startLogSegment(298)) - 58399e2f-9fb4-412a-a14c-394a333f3cda-RaftLogWorker: Starting segment from index:0
2019-06-15 12:47:18,734 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 58399e2f-9fb4-412a-a14c-394a333f3cda:group-40A7E9CDF7E3 set configuration 0: [58399e2f-9fb4-412a-a14c-394a333f3cda:127.0.0.1:40727], old=null at 0
2019-06-15 12:47:18,757 INFO  storage.RaftLogWorker (RaftLogWorker.java:execute(469)) - 58399e2f-9fb4-412a-a14c-394a333f3cda-RaftLogWorker: created new log segment /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerac59bea1-f0b9-4d1d-9d5f-6bec3605ab48/ratis/c6f9c4f2-ff1d-436b-aab1-40a7e9cdf7e3/current/log_inprogress_0
2019-06-15 12:47:19,585 INFO  interfaces.Container (KeyValueContainer.java:compactDB(356)) - Container 1330010305328177464 is closed with bcsId 0.
2019-06-15 12:47:19,586 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-06-15 12:47:19,586 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: close
2019-06-15 12:47:19,587 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(238)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: shutdown group-40A7E9CDF7E3
2019-06-15 12:47:19,587 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-40A7E9CDF7E3,id=58399e2f-9fb4-412a-a14c-394a333f3cda
2019-06-15 12:47:19,587 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: shutdown LeaderState
2019-06-15 12:47:19,587 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(140)) - 58399e2f-9fb4-412a-a14c-394a333f3cda-PendingRequests: sendNotLeaderResponses
2019-06-15 12:47:19,589 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(109)) - StateMachineUpdater-58399e2f-9fb4-412a-a14c-394a333f3cda-group-40A7E9CDF7E3: set stopIndex = 4
2019-06-15 12:47:19,589 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(245)) - Taking snapshot at termIndex:(t:1, i:4)
2019-06-15 12:47:19,589 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(249)) - Taking a snapshot to file /opt/src/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerac59bea1-f0b9-4d1d-9d5f-6bec3605ab48/ratis/c6f9c4f2-ff1d-436b-aab1-40a7e9cdf7e3/sm/snapshot.1_4
2019-06-15 12:47:19,590 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 58399e2f-9fb4-412a-a14c-394a333f3cda:group-40A7E9CDF7E3 closes. The last applied log index is 4
2019-06-15 12:47:19,590 INFO  storage.RaftLogWorker (RaftLogWorker.java:run(236)) - 58399e2f-9fb4-412a-a14c-394a333f3cda-RaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-06-15 12:47:19,591 INFO  storage.RaftLogWorker (RaftLogWorker.java:close(168)) - 58399e2f-9fb4-412a-a14c-394a333f3cda-RaftLogWorker close()
2019-06-15 12:47:19,592 INFO  server.GrpcService (GrpcService.java:closeImpl(154)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: shutdown server with port 40727 now
2019-06-15 12:47:19,593 INFO  server.GrpcService (GrpcService.java:closeImpl(162)) - 58399e2f-9fb4-412a-a14c-394a333f3cda: shutdown server with port 40727 successfully
2019-06-15 12:47:19,597 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
